!function(){function t(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}System.register([],(function(e,i){"use strict";var n=document.createElement("style");return n.textContent='html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;font-size:100%;vertical-align:baseline;background-color:transparent;border:0;outline:0}html,body{position:absolute;top:0;left:0;overflow:hidden;width:100%;height:100vh;background-color:#000}canvas{position:absolute;image-rendering:pixelated}body{touch-action:manipulation;overflow:hidden;margin:0;padding:0;line-height:1;background:linear-gradient(to bottom,rgba(0,0,0,0),rgba(0,0,0,0),rgba(0,0,0,.6)),url(/img/tile.png) center center;background-size:auto;image-rendering:pixelated}ol,ul{list-style:none}blockquote,q{quotes:none}:focus{outline:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-spacing:0;border-collapse:collapse}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}button,html [type=button],[type=reset],[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button}::-webkit-scrollbar{width:0;background-color:transparent}@font-face{font-family:AdvoCut;font-weight:400;font-style:normal;font-display:swap;src:url(/fonts/advocut/advocut-webfont.eot);src:url(/fonts/advocut/advocut-webfont.eot?#iefix) format("embedded-opentype"),url(/fonts/advocut/advocut-webfont.woff) format("woff"),url(/fonts/advocut/advocut-webfont.ttf) format("truetype"),url(/fonts/advocut/advocut-webfont.svg#AndinaRegular) format("svg")}@keyframes move-parchment-left{0%,to{left:0}45%,55%{left:41%}}@keyframes move-parchment-right{0%,to{right:0}45%,55%{right:41%}}@keyframes parchment-middle-1{0%,to{width:346px;margin-left:-173px;background-position:-38px -294px}45%,55%{width:0;margin-left:0;background-position:-211px -294px}}@keyframes parchment-middle-2{0%,to{width:692px;margin-left:-346px;background-position:-76px -588px}45%,55%{width:0;margin-left:0;background-position:-422px -588px}}@keyframes parchment-middle-3{0%,to{width:1038px;margin-left:-519px;background-position:-114px -882px}45%,55%{width:0;margin-left:0;background-position:-633px -882px}}@keyframes blink{50%{color:transparent}}.dimmed{filter:brightness(50%)}.check{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;top:100%;display:block;padding-left:1em;text-align:left}.check input{cursor:pointer;position:absolute;width:0;height:0;opacity:0}.check .checkmark{position:absolute;top:-1.5px;left:0;width:16px;height:16px}@media only screen and (min-width: 1501px){.check .checkmark{width:24px;height:24px;background:url(/img/3/characterdialogsheet.png) -327px -720px}.check:hover input~.checkmark,.check input:focus~.checkmark{background-position-x:-354px}.check input:active~.checkmark{background-position-x:-381px}.check input:checked~.checkmark{background-position-x:-408px}.check:hover input:checked~.checkmark,.check input:focus:checked~.checkmark{background-position-x:-435px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.check .checkmark{width:16px;height:16px;background:url(/img/2/characterdialogsheet.png) -218px -480px}.check:hover input~.checkmark,.check input:focus~.checkmark{background-position-x:-236px}.check input:active~.checkmark{background-position-x:-254px}.check input:checked~.checkmark{background-position-x:-272px}.check:hover input:checked~.checkmark,.check input:focus:checked~.checkmark{background-position-x:-290px}}@media only screen and (max-width: 1000px){.check .checkmark{width:8px;height:8px;background:url(/img/1/characterdialogsheet.png) -109px -240px}.check:hover input~.checkmark,.check input:focus~.checkmark{background-position-x:-118px}.check input:active~.checkmark{background-position-x:-127px}.check input:checked~.checkmark{background-position-x:-136px}.check:hover input:checked~.checkmark,.check input:focus:checked~.checkmark{background-position-x:-145px}}#parchment,#parchment input,#parchment select{font-family:AdvoCut,sans-serif}#parchment{opacity:0}#parchment p{font-family:AdvoCut,sans-serif}#parchment input{width:50%;color:#eee;text-align:center;background-color:rgba(0,0,0,.05);animation:glow .5s linear infinite alternate}#parchment input:focus{color:#fff;background-color:rgba(0,0,0,.1);border-color:rgba(0,0,0,.3);animation:none}#parchment input.field-error{background-color:rgba(255,0,0,.1);border-color:#f84444}#parchment select{width:25%;color:#000;text-align:center;background-color:rgba(0,0,0,.05)}#load-character,#create-character,#world-select,#credits,#about,#git,#death,#news,#error{pointer-events:none;position:absolute;z-index:1000;left:50%;font-family:AdvoCut,sans-serif;text-align:center;opacity:0;transition:none}#credits,#about,#death,#news,#git{top:50%}#parchment,#create-character,#load-character,#world-select,#error{position:absolute;z-index:2;top:55%;left:50%;text-align:center}.parchment-left{position:absolute;top:0;left:0}.parchment-right{position:absolute;top:0;right:0}.parchment-middle{position:absolute;top:0;left:50%}.parchment-left,.parchment-middle,.parchment-right,#respawn{image-rendering:pixelated}.animate .parchment-left{animation:move-parchment-left 1s ease-in-out 1}.animate .parchment-right{animation:move-parchment-right 1s ease-in-out 1}.left-ornament,.right-ornament{position:relative;display:inline-block;image-rendering:pixelated}#about p,#news p{width:80%;margin-top:5%;margin-left:10%}#news p{margin-top:3%}.close-about{margin-top:2%}.close-news{margin-top:5%}#death p{margin-top:10%}#death #respawn{cursor:pointer;margin-top:5%;background-color:transparent;border:none}.credits #credits,.about #about,.git #git,.death #death,.news #news,.error #error,.create-character #create-character,.world-select #world-select,.load-character #load-character{pointer-events:auto;opacity:1;transition:.5s opacity linear}@media only screen and (min-width: 1501px){#parchment h1,#news h1,#about h1{margin-top:60px}#parchment,#create-character,#load-character,#world-select,#error{width:1266px;height:546px;margin-top:-273px;margin-left:-633px}#parchment input,#parchment select{padding:0 15px;font-size:30px;border:3px dashed #b2af9b;border-radius:9px}#parchment input{height:60px;margin-top:30px}#parchment select{height:48px;margin-top:24px}#load-character h1,#create-character h1,#world-select h1{margin-top:30px}#credits,#about,#death,#news,#git{width:1266px;height:546px;margin-top:-273px;margin-left:-633px;font-size:30px}.parchment-left,.parchment-middle,.parchment-right,#respawn{background-image:url(/img/3/spritesheet.png);background-size:1266px auto}.parchment-left{width:114px;height:546px;background-position:0 -882px}.parchment-middle{width:1038px;height:546px;margin-left:-519px;background-position:-114px -882px}.parchment-right{width:114px;height:546px;background-position:-1152px -882px}.left-ornament,.right-ornament{top:9px;width:93px;height:36px;margin:0 20px;background-image:url(/img/3/spritesheet.png);background-size:1266px auto}.left-ornament{background-position-x:-1062px}.right-ornament{background-position-x:-1155px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#parchment h1,#news h1,#about h1{margin-top:40px}#parchment,#create-character,#load-character,#world-select,#error{width:844px;height:364px;margin-top:-182px;margin-left:-422px}#parchment input,#parchment select{padding:0 10px;font-size:20px;border:2px dashed #b2af9b;border-radius:6px}#parchment input{height:40px;margin-top:20px}#parchment select{height:32px;margin-top:16px}#load-character h1,#create-character h1,#world-select h1{margin-top:20px}#credits,#about,#death,#news,#git{width:844px;height:364px;margin-top:-182px;margin-left:-422px;font-size:20px}.parchment-left,.parchment-middle,.parchment-right,#respawn{background-image:url(/img/2/spritesheet.png);background-size:844px auto}.parchment-left{width:76px;height:364px;background-position:0 -588px}.parchment-middle{width:692px;height:364px;margin-left:-346px;background-position:-76px -588px}.parchment-right{width:76px;height:364px;background-position:-768px -588px}.left-ornament,.right-ornament{top:6px;width:62px;height:24px;margin:0 15px;background-image:url(/img/2/spritesheet.png);background-size:844px auto}.left-ornament{background-position-x:-708px}.right-ornament{background-position-x:-770px}}@media only screen and (max-width: 1000px){#parchment h1,#news h1,#about h1{margin-top:20px}#parchment,#create-character,#load-character,#world-select,#error{width:422px;height:182px;margin-top:-91px;margin-left:-211px}#parchment input,#parchment select{padding:0 5px;font-size:10px;border:1px dashed #b2af9b;border-radius:3px}#parchment input{height:20px;margin-top:10px}#parchment select{height:16px;margin-top:8px}#load-character h1,#create-character h1,#world-select h1{margin-top:10px}#credits,#about,#death,#news,#git{width:422px;height:182px;margin-top:-91px;margin-left:-211px;font-size:10px}.parchment-left,.parchment-middle,.parchment-right,#respawn{background-image:url(/img/1/spritesheet.png);background-size:422px auto}.parchment-left{width:38px;height:182px;background-position:0 -294px}.parchment-middle{width:346px;height:182px;margin-left:-173px;background-position:-38px -294px}.parchment-right{width:38px;height:182px;background-position:-384px -294px}.left-ornament,.right-ornament{top:3px;width:31px;height:12px;margin:0 10px;background-image:url(/img/1/spritesheet.png);background-size:422px auto}.left-ornament{background-position-x:-354px}.right-ornament{background-position-x:-385px}}@media only screen and (min-width: 1501px){#parchment h1,#load-character h1,#news h1,#about h1{margin-top:30px;font-size:30px}#create-character h1{margin-top:10px;font-size:30px}.left-ornament,.right-ornament{top:12px}#parchment,#create-character,#load-character,#world-select,#error{font-size:20px}#parchment.create-character input{height:45px;margin-top:24px}.animate .parchment-middle{animation:parchment-middle-3 1s ease-in-out 1}.game.death .parchment-middle,.game.news .parchment-middle{width:1038px;margin-left:-519px;background-position:-114px -882px}#respawn{width:375px;height:153px;margin:63px auto 0;background-position:0 -1428px}#respawn:active{background-position:-375px -1428px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#parchment,#create-character,#world-select,#load-character,#error{font-size:20px}#parchment.create-character input{height:30px;margin-top:15px}.animate .parchment-middle{animation:parchment-middle-2 1s ease-in-out 1}.game.death .parchment-middle,.game.news .parchment-middle{width:692px;margin-left:-346px;background-position:-76px -588px}#respawn{width:250px;height:102px;margin:42px auto 0;background-position:0 -952px}#respawn:active{background-position:-250px -952px}}@media only screen and (max-width: 1000px){#parchment,#create-character,#load-character,#world-select,#error{font-size:10px}#parchment.create-character input{height:15px;margin-top:8px}.animate .parchment-middle{animation:parchment-middle-1 1s ease-in-out 1}.game.death .parchment-middle,.game.news .parchment-middle{width:346px;margin-left:-173px;background-position:-38px -294px}#respawn{width:125px;height:51px;margin:21px auto 0;background-position:0 -476px}#respawn:active{background-position:-125px -476px}}#login,#new-account{top:120%}#cancel-register,#play{top:92.5%}#login{left:15%}#cancel-register{left:10%}#new-account{left:60%}#play{left:65%}#remember-me{left:20%}#guest{left:64%}#guest-text{top:5%;left:110%}input[type=range]{width:100%;background-image:-webkit-gradient(linear,left top,right top,color-stop(1,#4d4d4d),color-stop(1,#c5c5c5));-webkit-appearance:none;-moz-appearance:none;appearance:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none!important;appearance:none!important}input[type=range]::-webkit-slider-thumb{background-color:#707070;border:1px solid #000}input[type=range]::-webkit-slider-thumb:active{background-color:#fcda5c}@media only screen and (min-width: 1501px){#remember-me-text,#guest-text{height:24px;padding-left:15px;font-size:24px}#login{background-position-x:-288px}#new-account{background-position-x:-576px}#cancel-register,#cancel-worlds{background-position-x:-864px}#continue-worlds{background-position-x:-1152px}#play,#login,#new-account,#cancel-register,#cancel-worlds,#continue-worlds{cursor:pointer;position:absolute;width:288px;height:81px;background-color:transparent;background-image:url(/img/3/buttons.png);border:none}#play:hover,#play:focus,#login:hover,#login:focus,#new-account:hover,#new-account:focus,#cancel-register:hover,#cancel-register:focus,#cancel-worlds:hover,#cancel-worlds:focus,#continue-worlds:hover,#continue-worlds:focus{background-position-y:-81px}#play:active,#login:active,#new-account:active,#cancel-register:active,#cancel-worlds:active,#continue-worlds:active{background-position-y:-162px}#play:disabled,#login:disabled,#new-account:disabled,#cancel-register:disabled,#cancel-worlds:disabled,#continue-worlds:disabled{cursor:wait;background-position-y:-243px}.validation-error,.validation-warning,.status{font-size:24px}.validation-summary{width:384px}input[type=range]{height:9px;border-radius:9px}input[type=range]::-webkit-slider-thumb{width:15px;height:24px;border-radius:6px}.stroke{text-shadow:3px 3px 0 #373737,3px -3px 0 #373737,0 3px 0 #373737,3px 0 0 #373737,-3px 3px 0 #373737,-3px -3px 0 #373737,0 -3px 0 #373737,0 3px 0 #373737,-3px 0 0 #373737}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#remember-me-text,#guest-text{height:16px;padding-left:10px;font-size:16px}#login{background-position-x:-192px}#new-account{background-position-x:-384px}#cancel-register,#cancel-worlds{background-position-x:-576px}#continue-worlds{background-position-x:-768px}#play,#login,#new-account,#cancel-register,#cancel-worlds,#continue-worlds{cursor:pointer;position:absolute;width:192px;height:54px;background-color:transparent;background-image:url(/img/2/buttons.png);border:none}#play:hover,#play:focus,#login:hover,#login:focus,#new-account:hover,#new-account:focus,#cancel-register:hover,#cancel-register:focus,#cancel-worlds:hover,#cancel-worlds:focus,#continue-worlds:hover,#continue-worlds:focus{background-position-y:-54px}#play:active,#login:active,#new-account:active,#cancel-register:active,#cancel-worlds:active,#continue-worlds:active{background-position-y:-108px}#play:disabled,#login:disabled,#new-account:disabled,#cancel-register:disabled,#cancel-worlds:disabled,#continue-worlds:disabled{cursor:wait;background-position-y:-162px}.validation-error,.validation-warning,.status{font-size:16px}.validation-summary{width:256px}input[type=range]{height:6px;border-radius:6px}input[type=range]::-webkit-slider-thumb{width:10px;height:16px;border-radius:4px}.stroke{text-shadow:2px 2px 0 #373737,2px -2px 0 #373737,0 2px 0 #373737,2px 0 0 #373737,-2px 2px 0 #373737,-2px -2px 0 #373737,0 -2px 0 #373737,0 2px 0 #373737,-2px 0 0 #373737}}@media only screen and (max-width: 1000px){#remember-me-text,#guest-text{height:8px;padding-left:5px;font-size:8px}#login{background-position-x:-96px}#new-account{background-position-x:-192px}#cancel-register,#cancel-worlds{background-position-x:-288px}#continue-worlds{background-position-x:-384px}#play,#login,#new-account,#cancel-register,#cancel-worlds,#continue-worlds{cursor:pointer;position:absolute;width:96px;height:27px;background-color:transparent;background-image:url(/img/1/buttons.png);border:none}#play:hover,#play:focus,#login:hover,#login:focus,#new-account:hover,#new-account:focus,#cancel-register:hover,#cancel-register:focus,#cancel-worlds:hover,#cancel-worlds:focus,#continue-worlds:hover,#continue-worlds:focus{background-position-y:-27px}#play:active,#login:active,#new-account:active,#cancel-register:active,#cancel-worlds:active,#continue-worlds:active{background-position-y:-54px}#play:disabled,#login:disabled,#new-account:disabled,#cancel-register:disabled,#cancel-worlds:disabled,#continue-worlds:disabled{cursor:wait;background-position-y:-81px}.validation-error,.validation-warning,.status{font-size:8px}.validation-summary{width:128px}input[type=range]{height:3px;border-radius:3px}input[type=range]::-webkit-slider-thumb{width:5px;height:8px;border-radius:2px}.stroke{text-shadow:1px 1px 0 #373737,1px -1px 0 #373737,0 1px 0 #373737,1px 0 0 #373737,-1px 1px 0 #373737,-1px -1px 0 #373737,0 -1px 0 #373737,0 1px 0 #373737,-1px 0 0 #373737}}@media only screen and (min-width: 1501px){.validation-error,.validation-warning,.status{font-size:24px}.stroke{text-shadow:2px 2px 0 #373737,2px -2px 0 #373737,0 2px 0 #373737,2px 0 0 #373737,-2px 2px 0 #373737,-2px -2px 0 #373737,0 -2px 0 #373737,0 2px 0 #373737,-2px 0 0 #373737}#remember-me-text,#guest-text{width:168px}.validation-summary{width:366px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#remember-me-text,#guest-text{width:112px}input[type=range]::-webkit-slider-thumb{height:15px}}@media only screen and (max-width: 1000px){#remember-me-text,#guest-text{width:70px}#yes{left:0}#no{left:40%}#about h1,#credits h1{font-size:16px}}.footer-button{color:#c6c0a3;text-decoration:none}body.intro #intro-container{transition:.4s opacity linear}body.intro footer,body.intro #logo,body.intro #parchment{opacity:1}body.intro #game-container{pointer-events:none;opacity:0}body.intro footer{position:absolute;bottom:5%;left:0;width:100%;font-family:AdvoCut,sans-serif;font-size:18px;color:#c6c0a3;text-align:center;text-shadow:0 1px 0 black;transition:.2s opacity linear}body.intro footer div{display:inline-block;padding:0 5px}body.intro footer div span:hover{cursor:pointer;color:#fcda5c}@media only screen and (min-width: 1501px){body.intro footer{font-size:28px}}body.intro #load-character form,body.intro #create-character form,body.intro #world-select form{position:relative}body.intro .validation-summary{height:1em;margin:.5em auto}body.intro .validation-error{font-size:15px;color:#800;text-shadow:2px 2px 2px #f66}body.intro .validation-warning{font-size:15px;color:#a8a210;text-shadow:2px 2px 2px #fc6}body.intro .status{font-size:15px;color:#03c;text-shadow:2px 2px 2px #39f}body.intro .loader{position:relative;margin-top:30%}@media only screen and (min-width: 1501px){body.intro .loader{font-size:26px}}body.intro .loader-dot{animation:1s blink infinite}body.intro .loader-dot:nth-child(2){animation-delay:.25s}body.intro .loader-dot:nth-child(3){animation-delay:.5s}#world-select-button{cursor:pointer;position:absolute;bottom:0;left:0;margin:3.5em;padding:.5em 1em;font-family:AdvoCut,sans-serif,arial;font-size:24px;color:#eee;background-color:#d83939;border:2px solid #373737;border-radius:.25em}#world-select-button:hover{background-color:#e26d6d;border-color:#fcda5c}#world-select-button:active{background-color:#db4848}#world-select-button strong{display:block;letter-spacing:.05em}#world-select-button span{font-size:20px}#world-select form{display:flex;flex-flow:column;height:65%;padding:1em 5em}#worlds{overflow-y:auto;padding:0 5em}#worlds li{cursor:pointer;display:flex;flex:1;justify-content:space-evenly;padding:.5em 0}#worlds li:nth-child(odd){background-color:rgba(0,0,0,.25)}#worlds li:hover{background-color:rgba(0,0,0,.5)}#worlds li:active{background-color:rgba(0,0,0,.75)}#worlds li.active{color:#fcda5c;background-color:rgba(0,0,0,.75);outline:2px solid #fcda5c}.button-row{display:flex;justify-content:space-between;width:100%;margin:.5em 0}#cancel-worlds,#continue-worlds{position:relative}@media only screen and (min-width: 1501px){#world-select form{padding:1em 7.5em}}#alert{width:100%;height:50px;font-family:AdvoCut,arial,sans-serif;font-size:20px;line-height:50px;color:#eee;text-align:center;background-color:#d83939;border-bottom:1px solid #000}#game-version{position:absolute;right:0;bottom:0;padding:3em;font-family:AdvoCut,sans-serif,arial;font-size:24px;color:#eee}#ability-shortcut{position:absolute;margin-left:40%;opacity:0;transition:opacity 2s}#ability-shortcut ul{overflow:hidden;width:128%;margin-left:7%;padding:0;list-style-type:none}#ability-shortcut ul li{float:left;margin-top:1%;margin-right:4%}@media only screen and (min-width: 1501px){#ability-shortcut{cursor:url(/img/3/hand.png),auto;bottom:5px;width:300px;height:60px;background-image:url(/img/3/skillslots.png)}.ability-quickslot{cursor:url(/img/3/hand.png),auto;position:absolute;width:48px;height:48px}.quickslot-icon-intimidate{background-image:url(/img/3/abilityicons.png);background-position:0 1px}.quickslot-icon-run{background-image:url(/img/3/abilityicons.png);background-position:-48px 1px}.quickslot-icon-awareness{background-image:url(/img/3/abilityicons.png);background-position:-96px 1px}.quickslot-icon-dualistsmark{background-image:url(/img/3/abilityicons.png);background-position:-144px 1px}.quickslot-icon-hotshot{background-image:url(/img/3/abilityicons.png);background-position:-192px 1px}.quickslot-icon-thickskin{background-image:url(/img/3/abilityicons.png);background-position:-240px 1px}.quickslot-icon-precognition{background-image:url(/img/3/abilityicons.png);background-position:-288px 1px}.quickslot-icon-secretcalling{background-image:url(/img/3/abilityicons.png);background-position:-336px 1px}#ability-quickslot1{top:6px;left:27px}#ability-quickslot2{top:6px;left:93px}#ability-quickslot3{top:6px;left:159px}#ability-quickslot4{top:6px;left:225px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#ability-shortcut{cursor:url(/img/3/hand.png),auto;bottom:5px;width:200px;height:40px;background-image:url(/img/2/skillslots.png)}.ability-quickslot{cursor:url(/img/3/hand.png),auto;position:absolute;width:32px;height:32px}.quickslot-icon-intimidate{background-image:url(/img/2/abilityicons.png);background-position:0 1px}.quickslot-icon-run{background-image:url(/img/2/abilityicons.png);background-position:-32px 1px}.quickslot-icon-awareness{background-image:url(/img/2/abilityicons.png);background-position:-64px 1px}.quickslot-icon-dualistsmark{background-image:url(/img/2/abilityicons.png);background-position:-96px 1px}.quickslot-icon-hotshot{background-image:url(/img/2/abilityicons.png);background-position:-128px 1px}.quickslot-icon-thickskin{background-image:url(/img/2/abilityicons.png);background-position:-160px 1px}.quickslot-icon-precognition{background-image:url(/img/2/abilityicons.png);background-position:-192px 1px}.quickslot-icon-secretcalling{background-image:url(/img/2/abilityicons.png);background-position:-224px 1px}#ability-quickslot1{top:4px;left:18px}#ability-quickslot2{top:4px;left:62px}#ability-quickslot3{top:4px;left:106px}#ability-quickslot4{top:4px;left:150px}}@media only screen and (max-width: 1000px){#ability-shortcut{cursor:url(/img/3/hand.png),auto;bottom:5px;width:100px;height:20px;background-image:url(/img/1/skillslots.png)}.ability-quickslot{cursor:url(/img/3/hand.png),auto;position:absolute;width:16px;height:16px}.quickslot-icon-intimidate{background-image:url(/img/1/abilityicons.png);background-position:0 1px}.quickslot-icon-run{background-image:url(/img/1/abilityicons.png);background-position:-16px 1px}.quickslot-icon-awareness{background-image:url(/img/1/abilityicons.png);background-position:-32px 1px}.quickslot-icon-dualistsmark{background-image:url(/img/1/abilityicons.png);background-position:-48px 1px}.quickslot-icon-hotshot{background-image:url(/img/1/abilityicons.png);background-position:-64px 1px}.quickslot-icon-thickskin{background-image:url(/img/1/abilityicons.png);background-position:-80px 1px}.quickslot-icon-precognition{background-image:url(/img/1/abilityicons.png);background-position:-96px 1px}.quickslot-icon-secretcalling{background-image:url(/img/1/abilityicons.png);background-position:-112px 1px}#ability-quickslot1{top:2px;left:9px}#ability-quickslot2{top:2px;left:31px}#ability-quickslot3{top:2px;left:53px}#ability-quickslot4{top:2px;left:75px}}@media only screen and (max-width: 1000px){#ability-shortcut{width:200px;height:40px;margin-left:10%;background-image:url(/img/2/skillslots.png)}.ability-quickslot{width:32px;height:32px}.quickslot-icon-intimidate{background-image:url(/img/2/abilityicons.png);background-position:0 1px}.quickslot-icon-run{background-image:url(/img/2/abilityicons.png);background-position:-32px 1px}.quickslot-icon-awareness{background-image:url(/img/2/abilityicons.png);background-position:-64px 1px}.quickslot-icon-dualistsmark{background-image:url(/img/2/abilityicons.png);background-position:-96px 1px}.quickslot-icon-hotshot{background-image:url(/img/2/abilityicons.png);background-position:-128px 1px}.quickslot-icon-thickskin{background-image:url(/img/2/abilityicons.png);background-position:-160px 1px}.quickslot-icon-precognition{background-image:url(/img/2/abilityicons.png);background-position:-188px 1px}.quickslot-icon-secretcalling{background-image:url(/img/2/abilityicons.png);background-position:-224px 1px}#ability-quickslot1{top:4px;left:18px}#ability-quickslot2{top:4px;left:62px}#ability-quickslot3{top:4px;left:106px}#ability-quickslot4{top:4px;left:150px}}#action-container{position:absolute;display:none;font-family:AdvoCut,sans-serif}#action-container ul{position:absolute;display:inline-flex}.action-item-name{text-align:center}.action-item-name,.action-item-description{color:#fff}@media only screen and (min-width: 1501px){#action-container{right:303px;bottom:102px;width:192px;height:219px;background:url(/img/3/main.png) -672px -1152px no-repeat}#action-container ul{bottom:12px;left:12px}#action-container ul li{margin-left:9px}.action-wield,.action-equip{background:url(/img/3/main.png) -1200px -1152px no-repeat}.action-drop{background:url(/img/3/main.png) -1200px -1200px no-repeat}.action-eat{background:url(/img/3/main.png) -1200px -1248px no-repeat}.action-button{width:48px;height:48px}.action-button:hover{background-position-x:-1296px}.action-button:active{background-position-x:-1248px}.action-item-name{margin-top:9px;margin-left:12px;font-size:15px}.action-item-description{margin-left:9px;font-size:12px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#action-container{right:202px;bottom:68px;width:128px;height:146px;background:url(/img/2/main.png) -448px -768px no-repeat}#action-container ul{bottom:8px;left:8px}#action-container ul li{margin-left:6px}.action-wield,.action-equip{background:url(/img/2/main.png) -800px -768px no-repeat}.action-drop{background:url(/img/2/main.png) -800px -800px no-repeat}.action-eat{background:url(/img/2/main.png) -800px -832px no-repeat}.action-button{width:32px;height:32px}.action-button:hover{background-position-x:-864px}.action-button:active{background-position-x:-832px}.action-item-name{margin-top:6px;margin-left:8px;font-size:10px}.action-item-description{margin-left:6px;font-size:8px}}@media only screen and (min-width: 1501px){#action-container{right:298px;bottom:80px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#action-container{right:202px;bottom:68px}}#attack-info{position:absolute;left:40%;display:none;background-color:rgba(0,0,0,.5)}#attack-info .name,#attack-info .health{position:absolute;font-family:AdvoCut,sans-serif;color:#fff;text-align:center}#attack-info .name{overflow:hidden;width:100%}#attack-info .details{overflow:hidden;width:100%;font-family:AdvoCut,sans-serif;color:#fff;text-align:center}#attack-info .health{left:5%;overflow:hidden;width:90%}@media only screen and (min-width: 1501px){#attack-info{top:0;width:300px;height:75px;border:6px solid #373737;border-bottom-right-radius:24px;border-bottom-left-radius:24px}#attack-info .details{margin-top:27px}#attack-info .health{height:18px;background-color:red;border:3px solid #373737;border-radius:6px;transition:.5s width ease}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#attack-info{top:0;width:200px;height:50px;border:4px solid #373737;border-bottom-right-radius:16px;border-bottom-left-radius:16px}#attack-info .details{margin-top:18px}#attack-info .health{height:12px;background-color:red;border:2px solid #373737;border-radius:4px;transition:.5s width ease}}@media only screen and (max-width: 1000px){#attack-info{top:0;width:100px;height:25px;border:2px solid #373737;border-bottom-right-radius:8px;border-bottom-left-radius:8px}#attack-info .details{margin-top:9px}#attack-info .health{height:6px;background-color:red;border:1px solid #373737;border-radius:2px;transition:.5s width ease}}#bank{cursor:url(/img/3/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#bank-container{float:right}#bank-slot{position:absolute;top:9%}.bank-slot{float:left}.bank-image{width:100%;height:100%;background-size:600%}.bank-item-count{font-family:AdvoCut,sans-serif!important;color:gold!important}.bank-item-count{text-shadow:1px 1px black}@media only screen and (min-width: 1501px){#bank{width:900px;height:501px}#bank-container,#bank-inventory-container{background-image:url(/img/3/bank.png)}#bank-container{width:513px;height:501px;background-position:-396px 0}#bank-slot{left:420px;overflow-y:scroll;width:432px;height:390px}.bank-slot{width:48px;height:48px;margin-bottom:18px;margin-left:6px;background:url(/img/3/containers.png) -900px -516px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#bank{width:600px;height:334px}#bank-container,#bank-inventory-container{background-image:url(/img/2/bank.png)}#bank-container{width:342px;height:334px;background-position:-264px 0}#bank-slot{left:280px;overflow-y:scroll;width:288px;height:260px}.bank-slot{width:32px;height:32px;margin-bottom:12px;margin-left:4px;background:url(/img/2/containers.png) -600px -344px}}@media only screen and (max-width: 1000px){#bank{width:300px;height:167px}#bank-container,#bank-inventory-container{background-image:url(/img/1/bank.png)}#bank-container{width:171px;height:167px;background-position:-132px 0}#bank-slot{left:140px;overflow-y:scroll;width:144px;height:130px}.bank-slot{width:16px;height:16px;margin-bottom:6px;margin-left:2px;background:url(/img/1/containers.png) -300px -172px}}@media only screen and (max-width: 1000px){#bank{transform:scale(1.5)}}#bubbles{pointer-events:none;position:absolute;z-index:5;top:0;left:0;overflow:hidden;width:100%;height:100%;font-family:AdvoCut,sans-serif}#bubbles p{margin-top:6px}#bubbles a{pointer-events:auto;color:#fcda5c;text-decoration:none}.pointer{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;display:inline-block}.bubble{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;display:inline-block;padding:3px 10px 0;color:rgba(255,255,255,.8);text-align:center;background-color:rgba(45,45,45,.9);border-radius:8px}.bubble-tip{position:relative;top:10px;width:11px;height:10px;margin:0 auto;background-image:url(/img/thingy.png)}#buttons{cursor:url(/img/3/hand.png),auto;position:absolute;right:0;bottom:0;overflow-x:hidden;overflow-y:hidden;background-color:rgba(0,0,0,0)}#buttons ul{float:right;overflow:hidden;margin:0;padding:0;list-style-type:none}#buttons ul li{float:left}#chat-button,#inventory-button,#profile-button,#settings-button,#warp-button,#audio-button,#achievements-button,#quests-button,#friends-button{position:relative;width:42px;height:45px;background:url(/img/3/main.png) no-repeat;background-position-y:-942px}#chat-button{background-position:-588px -987px}#chat-button:hover{background-position-x:-630px}#chat-button.active,#chat-button:active{background-position-x:-672px}#inventory-button{background-position-x:-588px}#inventory-button:hover{background-position-x:-630px}#inventory-button.active,#inventory-button:active{background-position-x:-672px}#profile-button{background-position-x:-714px}#profile-button:hover{background-position-x:-756px}#profile-button.active,#profile-button:active{background-position-x:-798px}#settings-button{background-position-x:-1218px}#settings-button:hover{background-position-x:-1260px}#settings-button.active,#settings-button:active{background-position-x:-1302px}#warp-button{background-position-x:-966px}#warp-button:hover{background-position-x:-1008px}#warp-button.active,#warp-button:active{background-position-x:-1050px}#audio-button{background-position-x:-294px}#audio-button:hover{background-position-x:-378px}#audio-button.active,#audio-button:active{background-position-x:-336px}#achievements-button{background-position-x:-126px}#achievements-button:hover{background-position-x:-168px}#achievements-button.active,#achievements-button:active{background-position-x:-210px}#quests-button{background-position-x:-840px}#quests-button:hover{background-position-x:-882px}#quests-button.active,#quests-button:active{background-position-x:-924px}#friends-button{background-position-x:-1092px}#friends-button:hover{background-position-x:-1134px}#friends-button.active,#friends-button:active{background-position-x:-1176px}#chat{pointer-events:none;position:absolute;bottom:30px;left:12px;display:none}#chat p{font-family:AdvoCut,sans-serif}#chat-log{overflow-y:scroll;height:100%;text-shadow:2px 2px 2px black;background:linear-gradient(0deg,rgba(0,0,0,.4),20%,transparent);border:1px solid black;border-top-left-radius:4px;border-top-right-radius:4px}#chat-log::-webkit-scrollbar-thumb{pointer-events:auto}#chat-input{pointer-events:auto;display:none;width:calc(100% - 6px);background-color:rgba(0,0,0,.75);border:1px solid black;border-bottom-right-radius:4px;border-bottom-left-radius:4px}#chat-log,#chat-input{font-family:AdvoCut,sans-serif;font-size:16px;color:#fff}@media only screen and (min-width: 1501px){#chat{width:750px;height:300px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#chat{width:500px;height:200px}}@media only screen and (max-width: 1000px){#chat{width:250px;height:100px}}@media only screen and (max-width: 1000px){#chat{bottom:70px;left:4px}}#game-container{position:inherit;z-index:100;width:100%;height:100%;margin:0;background-color:rgba(0,0,0,.2);transition:1s opacity linear}#background,#text-canvas,#foreground,#cursor,#overlay{transform:translateZ(0);margin:0;padding:0}#canvas,#foreground,#background,#text-canvas,#overlay,#game-container,#border,#cursor{cursor:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media only screen and (max-width: 1000px){#canvas,#foreground,#background,#text-canvas,#overlay,#game-container,#border,#cursor{cursor:url(/img/3/hand.png),auto}}#border{position:absolute;top:0;left:0;width:100%;height:100%;margin-left:0;padding:0;background:none;border:0}.container-slot{margin:auto}.container-slot>p{font-size:20px;color:#a81005;text-align:center}.container-slot>p.yellow{color:#a8a805}.container-slot>p.green{color:#10a805}@media only screen and (min-width: 1501px){.container{cursor:url(/img/3/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;width:1032px;height:471px;margin:auto;background:url(/img/3/spritesheet.png) 0 -240px no-repeat}.container-slot{width:306px;height:45px;margin-top:6px;background:url(/img/3/characterdialogsheet.png) -432px -768px}.container-slot:hover{background-position-y:-960px}.container-slot:active{background-position-y:-1008px}.container-slot>p{padding-top:12px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.container{cursor:url(/img/3/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;width:688px;height:314px;margin:auto;background:url(/img/2/spritesheet.png) 0 -160px no-repeat}.container-slot{width:204px;height:30px;margin-top:4px;background:url(/img/2/characterdialogsheet.png) -288px -512px}.container-slot:hover{background-position-y:-640px}.container-slot:active{background-position-y:-672px}.container-slot>p{padding-top:8px}}@media only screen and (max-width: 1000px){.container{cursor:url(/img/3/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;width:344px;height:157px;margin:auto;background:url(/img/1/spritesheet.png) 0 -80px no-repeat}.container-slot{width:102px;height:15px;margin-top:2px;background:url(/img/1/characterdialogsheet.png) -144px -256px}.container-slot:hover{background-position-y:-320px}.container-slot:active{background-position-y:-336px}.container-slot>p{padding-top:4px}}@media only screen and (max-width: 1000px){.container-slot>p{padding-top:2px;font-size:10px}}.close-container{top:-2%!important;left:96%!important}#profile-dialog,#settings-page{position:absolute;right:0;bottom:45px;display:none}#bank-inventory-container,#enchant-container{float:left}.inventory-slots{position:absolute;top:13%;left:6%}.item-count,.inventory-item-count{font-family:AdvoCut,sans-serif;color:#fff}.close{position:absolute;top:-3%;left:92%}.ok{position:absolute}@media only screen and (min-width: 1501px){#bank-inventory-container,#enchant-container{width:387px;height:381px;background-position:0 0}.item-count{width:48px;height:21px;margin-left:3;text-align:center}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{margin-top:57px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#bank-inventory-container,#enchant-container{width:258px;height:254px;background-position:0 0}.item-count{width:32px;height:14px;margin-left:2;text-align:center}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{margin-top:38px}}@media only screen and (max-width: 1000px){#bank-inventory-container,#enchant-container{width:129px;height:127px;background-position:0 0}.item-count{width:16px;height:7px;margin-left:1;text-align:center}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{margin-top:19px}}@media only screen and (min-width: 1501px){.item-count{font-size:14px}.close{width:48px;height:48px;background:url(/img/3/containers.png) -96px -498px}.close:active{background-position-x:-144px}.close:hover{background-position-x:-192px}.ok{width:42px;height:42px;background:url(/img/3/containers.png) -1143px -183px}.ok:hover{background-position-x:-1143px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.item-count{font-size:11px}.ok{width:28px;height:28px;background-position:-762px -122px}.ok,.done{width:27px;height:14px;background:url(/img/2/containers.png) -642px -108px}.ok:hover,.done:hover{background-position:-642px -108px}.close{width:32px;height:32px;background:url(/img/2/containers.png) -64px -332px}.close:active{background-position-x:-96px}.close:hover{background-position-x:-128px}.ok:hover{background-position:-762px -94px}}@media only screen and (max-width: 1000px){.ok,.done{top:55%;left:85%;width:14px;height:14px;background:url(/img/1/containers.png) -387px -79px}.ok:hover,.done:hover{background-position-y:-65px}.item-count{font-size:6px}}#drop-dialog{position:absolute;top:50%;left:50%;display:none;margin-right:-28px;margin-left:-100px;padding:5px;font-family:AdvoCut,sans-serif;font-size:16px;color:#e3e3e3;background-color:rgba(45,45,45,.8);border-radius:6px}#drop-count{font-family:AdvoCut,sans-serif}#drop-dialog.active{display:block}#drop-title{margin-bottom:10px;text-align:center}#drop-accept,#drop-cancel{cursor:pointer;font-size:18px;background-color:rgba(120,120,120,.3)}#drop-accept:hover,#drop-cancel:hover{background-color:rgba(120,120,120,.4)}#drop-accept:active,#drop-cancel:active{color:#fcda5c;background-color:rgba(120,120,120,.4)}#enchant{cursor:url(/img/3/hand.png),auto;position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#enchant-inventory-slots{left:13%}#enchant-selected-item,#enchant-shards{position:absolute;top:80%;background-size:600%}#enchant-selected-item{left:11%}#enchant-shards{left:34%}@media only screen and (min-width: 1501px){#enchant{transform:scale(1.6);width:387px;height:465px;background:url(/img/3/containers.png) 0 0}#enchant-selected-item,#enchant-shards{width:48px;height:45px}#enchant-container{background-image:url(/img/3/containers.png)}.inventory-slots{width:288px;height:240px}#shards-count{width:48px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#enchant{transform:scale(1.6);width:258px;height:310px;background:url(/img/2/containers.png) 0 0}#enchant-selected-item,#enchant-shards{width:32px;height:30px}#enchant-container{background-image:url(/img/2/containers.png)}.inventory-slots{width:192px;height:160px}#shards-count{width:32px}}@media only screen and (max-width: 1000px){#enchant{transform:scale(1.6);width:129px;height:155px;background:url(/img/1/containers.png) 0 0}#enchant-selected-item,#enchant-shards{width:16px;height:15px}#enchant-container{background-image:url(/img/1/containers.png)}.inventory-slots{width:96px;height:80px}#shards-count{width:16px}}#inventory{cursor:url(/img/3/hand.png),auto;position:absolute;right:10px;bottom:56px;display:none;font-family:AdvoCut,sans-serif}#inventory ul{overflow:hidden;margin:0;padding:0;list-style-type:none}#inventory ul li{float:left}#inventory-container{position:absolute}.inventory-item-image{pointer-events:none;background-size:600%;filter:opacity(100%)}@media only screen and (min-width: 1501px){#inventory{width:288px;height:324px;background:url(/img/3/main.png) -864px -1056px no-repeat}#inventory-container{top:9px;right:9px;width:270px;height:306px}.item-slot{margin-top:6px;margin-bottom:21px;margin-left:4.5px;background:url(/img/3/main.png) -1200px -1056px no-repeat}.item-slot:hover{background-position-x:-1248px}.item-slot:active{background-position-x:-1296px}.item-slot,.inventory-item-image{width:48px;height:48px}.inventory-item-count{width:48px;height:21px;font-size:18px;text-align:center}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#inventory{width:192px;height:216px;background:url(/img/2/main.png) -576px -704px no-repeat}#inventory-container{top:6px;right:6px;width:180px;height:204px}.item-slot{margin-top:4px;margin-bottom:14px;margin-left:3px;background:url(/img/2/main.png) -800px -704px no-repeat}.item-slot:hover{background-position-x:-832px}.item-slot:active{background-position-x:-864px}.item-slot,.inventory-item-image{width:32px;height:32px}.inventory-item-count{width:32px;height:14px;font-size:12px;text-align:center}}#map-frame{pointer-events:auto;cursor:url(/img/3/hand.png),auto;position:absolute;z-index:100;top:0;right:0;bottom:0;left:0;display:none;margin:auto;background-repeat:no-repeat}.map-button{position:absolute;background-position-y:0}#close-map-frame{top:0;left:95%}.warp-button{position:absolute}@media only screen and (min-width: 1501px){#warp0{top:120px;left:360px;background:url(/img/3/mapicons.png) 0 0}#warp1{top:165px;left:75px;background:url(/img/3/mapicons.png) -225px 0}#warp2{top:210px;left:525px;background:url(/img/3/mapicons.png) -180px 0}#warp3{top:360px;left:405px;background:url(/img/3/mapicons.png) -135px 0}#warp4{top:360px;left:225px;background:url(/img/3/mapicons.png) -90px 0}#warp5{top:420px;left:60px;background:url(/img/3/mapicons.png) -270px 0}#warp6{top:240px;left:270px;background:url(/img/3/mapicons.png) 231px 0}#warp0:hover,#warp1:hover,#warp2:hover,#warp3:hover,#warp4:hover,#warp5:hover,#warp6:hover{background-position-y:-60px}#warp0:active,#warp1:active,#warp2:active,#warp3:active,#warp4:active,#warp5:active,#warp6:active{background-position-y:-120px}#map-frame{width:810px;height:540px;background-image:url(/img/3/mapframe.png)}.map-button{width:45px;height:48px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#warp0{top:80px;left:240px;background:url(/img/2/mapicons.png) 0 0}#warp1{top:110px;left:50px;background:url(/img/2/mapicons.png) -150px 0}#warp2{top:140px;left:350px;background:url(/img/2/mapicons.png) -120px 0}#warp3{top:240px;left:270px;background:url(/img/2/mapicons.png) -90px 0}#warp4{top:240px;left:150px;background:url(/img/2/mapicons.png) -60px 0}#warp5{top:280px;left:40px;background:url(/img/2/mapicons.png) -180px 0}#warp6{top:160px;left:180px;background:url(/img/2/mapicons.png) 154px 0}#warp0:hover,#warp1:hover,#warp2:hover,#warp3:hover,#warp4:hover,#warp5:hover,#warp6:hover{background-position-y:-40px}#warp0:active,#warp1:active,#warp2:active,#warp3:active,#warp4:active,#warp5:active,#warp6:active{background-position-y:-80px}#map-frame{width:540px;height:360px;background-image:url(/img/2/mapframe.png)}.map-button{width:30px;height:32px}}@media only screen and (max-width: 1000px){#warp0{top:40px;left:120px;background:url(/img/1/mapicons.png) 0 0}#warp1{top:55px;left:25px;background:url(/img/1/mapicons.png) -75px 0}#warp2{top:70px;left:175px;background:url(/img/1/mapicons.png) -60px 0}#warp3{top:120px;left:135px;background:url(/img/1/mapicons.png) -45px 0}#warp4{top:120px;left:75px;background:url(/img/1/mapicons.png) -30px 0}#warp5{top:140px;left:20px;background:url(/img/1/mapicons.png) -90px 0}#warp6{top:80px;left:90px;background:url(/img/1/mapicons.png) 77px 0}#warp0:hover,#warp1:hover,#warp2:hover,#warp3:hover,#warp4:hover,#warp5:hover,#warp6:hover{background-position-y:-20px}#warp0:active,#warp1:active,#warp2:active,#warp3:active,#warp4:active,#warp5:active,#warp6:active{background-position-y:-40px}#map-frame{width:270px;height:180px;background-image:url(/img/1/mapframe.png)}.map-button{width:15px;height:16px}}@media only screen and (max-width: 1000px){#map-frame{transform:scale(1.6)}#close-map-frame{top:-6px;left:90%}}#notify,#confirm{pointer-events:auto;position:absolute;top:45%;left:35%;display:none}#exclamation,#question{top:30%;left:10%}.done{position:absolute;top:70%;left:85%}#cancel{position:absolute;top:70%;left:70%}#message{pointer-events:none;position:absolute;top:48%;left:42%;font-family:AdvoCut,sans-serif}.fade{position:absolute;top:0;left:0;display:none;width:100%;height:98%;background-color:rgba(0,0,0,.3)}#notification{pointer-events:none;position:absolute;top:100%;left:50%;opacity:.8;transition:.7s top ease}#notification-text-title{position:relative;top:25%;font-family:AdvoCut,sans-serif;font-size:20px;color:#45ebfc;text-align:center;text-shadow:2px 2px #0e0a00}#notification-text-description{position:relative;top:25%;margin-top:10px;font-family:AdvoCut,sans-serif;font-size:14px;color:#fff;text-align:center;text-shadow:2px 2px #0e0a00}@media only screen and (min-width: 1501px){#notification{width:648px;height:102px;margin-left:-324px;background:url(/img/3/spritesheet.png) no-repeat}#question,#exclamation{position:relative;display:block;width:45px;height:48px}#question{background:url(/img/3/containers.png) -1047px -141px}#exclamation{background:url(/img/3/containers.png) -1002px -141px}#message{width:360px;height:69px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#notification{width:432px;height:68px;margin-left:-216px;background:url(/img/2/spritesheet.png) no-repeat}#question,#exclamation{position:relative;display:block;width:30px;height:32px}#question{background:url(/img/2/containers.png) -698px -94px}#exclamation{background:url(/img/2/containers.png) -668px -94px}#message{width:240px;height:46px}}@media only screen and (max-width: 1000px){#notification{width:216px;height:34px;margin-left:-108px;background:url(/img/1/spritesheet.png) no-repeat}#question,#exclamation{position:relative;display:block;width:15px;height:16px}#question{background:url(/img/1/containers.png) -349px -47px}#exclamation{background:url(/img/1/containers.png) -334px -47px}#message{width:120px;height:23px}}@media only screen and (min-width: 1501px){#notification{margin-left:-344px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#notify,#confirm{width:333px;height:94px;background:url(/img/2/containers.png) -601px 0}#notification-text-title{font-size:18px}#notification-text-description{font-size:12px}#cancel{width:40px;height:14px;background:url(/img/2/containers.png) -601px -108px}#cancel:hover,#cancel:focus{background-position-y:-94px}#message{width:240px;height:46px}}@media only screen and (max-width: 1000px){#notification{width:432px;height:68px;margin-left:-216px;background:url(/img/2/spritesheet.png) no-repeat}#notify,#confirm{width:166px;height:47px;background:url(/img/1/containers.png) -300px 0}#cancel{top:55%;left:75%;width:14px;height:14px;background:url(/img/1/containers.png) -371px -79px}#cancel:hover,#cancel:focus{background-position-x:-65px}}@keyframes flash{0%{background:#ffa2a2}to{background:#e22525}}@keyframes flash-green{0%{background:#a2ffa2}to{background:#25e225}}@keyframes flash-poison{0%{background:#42e373}to{background:#146e2b}}#player-info{position:absolute;top:10px;left:10px}#health-bar-text,#mana-bar-text{font-family:AdvoCut,sans-serif;text-align:center;vertical-align:middle}#health,#health-info{cursor:url(/img/3/hand.png),auto}#health{background:linear-gradient(to right,#f00,#ef5a5a);transition:.5s width ease}#mana{background:linear-gradient(to right,rgb(12,55,208),#257cd2);transition:.5s width ease}#exp{background:linear-gradient(to left,#4f4,#080);transition:.5s width ease}#health.white{animation:flash .5s linear infinite}#health.green{animation:flash-green .5s linear infinite}#health.poison{animation:flash-poison .5s linear infinite}@media only screen and (min-width: 1501px){#health,#health-bar,#mana,#mana-bar{position:absolute;width:230px;height:26px;margin:0;padding:0;text-align:center;border:0}#health,#health-bar{top:4.5px;left:30px}#mana,#mana-bar{top:44px;left:30px}#health-info,#mana-info{position:absolute;width:264px;height:39px;margin:0;padding:0;color:#fff;text-align:center;border:0}#health-info{top:0;left:0;background-image:url(/img/3/main.png);background-position:0 -834px}#mana-info{top:38px;left:0;background-image:url(/img/3/main.png);background-position:-264px -834px}#exp,#exp-bar{position:absolute;top:30px;left:36px;width:228px;height:15px}#exp{margin:0;padding:0;border:0}#exp-bar{color:#fff;background-image:url(/img/3/main.png);background-position:0 -873px}#health-bar-text,#mana-bar-text{margin:10px 0 0 30px;font-size:18px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#health,#health-bar,#mana,#mana-bar{position:absolute;width:154px;height:20px;margin:0;padding:0;text-align:center;border:0}#health,#health-bar{top:3px;left:20px}#health-info,#mana-info{position:absolute;width:176px;height:26px;margin:0;padding:0;color:#fff;text-align:center;border:0}#health-info{top:0;left:0;background-image:url(/img/2/main.png);background-position:0 -556px}#mana-info{top:26px;left:0;background-image:url(/img/2/main.png);background-position:-176px -556px}#mana,#mana-bar{top:28px;left:20px}#exp,#exp-bar{position:absolute;top:20px;left:24px;width:152px;height:9px}#exp{margin:0;padding:0;border:0}#exp-bar{color:#fff;background-image:url(/img/2/main.png);background-position:0 -582px}#health-bar-text,#mana-bar-text{margin:5px 0 0 20px}}.page{cursor:url(/img/3/hand.png),auto;-webkit-user-select:none;-moz-user-select:none;user-select:none}#quest-list{position:absolute;top:50%;left:8%;overflow:auto}#skills-list{position:absolute;top:6%;left:8%;overflow:auto}.profession-item{width:100%;height:10%;font-family:AdvoCut,sans-serif}.profession-name{z-index:1;float:left;width:98%;margin-top:3px;font-size:22px;color:#fff;text-align:center;background-color:rgba(51,153,255,.4);border:2px solid #373737}#armour-slot-info{text-align:right}.profile-info{position:absolute;left:24px;width:92px;height:12px;font-family:AdvoCut,sans-serif;font-size:6px;font-weight:700;line-height:12px;text-align:center;text-shadow:1px 1px #808080}.profile-item-info{pointer-events:none;position:absolute;font-family:AdvoCut,sans-serif;font-size:12px;font-weight:700}.navigator{position:absolute;top:89%;left:37%}@media only screen and (min-width: 1501px){#state-page,.state-page{display:block;background:url(/img/3/characterdialogsheet.png) 0 0}#abilities-page{display:none;background:url(/img/3/characterdialogsheet.png) -372px 0}#settings-page{display:none;background:url(/img/3/characterdialogsheet.png) -744px 0}#quest-page{display:none;background:url(/img/3/characterdialogsheet.png) -1116px 0}#guild-page{display:none;background:url(/img/3/characterdialogsheet.png) -1488px 0}#skills-page{display:none;background:url(/img/3/characterdialogsheet.png) -744px -651px}#profile-dialog,.page{position:absolute;width:372px;height:651px}.profile-slot{position:absolute;width:48px;height:45px;background-position:0 0}.profile-info{position:absolute;left:72px;width:276px;height:36px;font-family:AdvoCut,sans-serif;font-size:18px;font-weight:700;line-height:36px;text-align:center;text-shadow:1px 1px #808080}#equipment-button{position:absolute;top:55%;right:153px;width:63px;height:51px;background:url(/img/3/characterdialogsheet.png) 0 -771px}#equipment-button:hover{background:url(/img/3/characterdialogsheet.png) -126px -771px}#equipment-button:active,#equipment-button.active{background:url(/img/3/characterdialogsheet.png) -63px -771px}.weapon-slot,.armour-slot,.pendant-slot,.ring-slot,.boots-slot{margin-top:-6px;background-size:600%}.weapon-slot{top:360px;left:12px}.armour-slot{top:357px;left:312px}.pendant-slot{top:234px;left:162px}.ring-slot{top:516px;left:81px}.boots-slot{top:519px;left:246px}#profile-name{top:24px}#profile-level{top:87px}#profile-experience{top:150px}.navigator{width:126px;height:51px}.previous,.next{position:absolute;top:0;left:auto;left:initial;width:63px;height:51px;background-image:url(/img/3/characterdialogsheet.png)}.previous{cursor:pointer;left:0;background-position:0 -720px}.previous.disabled{cursor:url(/img/3/hand.png),auto;background-position:0 -669px}.next{cursor:pointer;left:63px;background-position:-63px -669px}.next.disabled{cursor:url(/img/3/hand.png),auto;background-position:-63px -720px}#skills-list{width:318px;height:537px}#achievement-count,#quest-count{width:90px;height:24px;font-size:24px}.ability,.ability-icon{position:absolute;display:none;width:48px;height:48px}.ability-icon{display:block}.ability-icon-intimidate{background-image:url(/img/3/abilityicons.png);background-position:0 1px}.ability-icon-run{background-image:url(/img/3/abilityicons.png);background-position:-48px 1px}.ability-icon-awareness{background-image:url(/img/3/abilityicons.png);background-position:-96px 1px}.ability-icon-dualistsmark{background-image:url(/img/3/abilityicons.png);background-position:-144px 1px}.ability-icon-hotshot{background-image:url(/img/3/abilityicons.png);background-position:-192px 1px}.ability-icon-thickskin{background-image:url(/img/3/abilityicons.png);background-position:-240px 1px}.ability-icon-precognition{background-image:url(/img/3/abilityicons.png);background-position:-288px 1px}.ability-icon-secretcalling{background-image:url(/img/3/abilityicons.png);background-position:-336px 1px}.ability-level{position:absolute;width:15px;height:18px;margin-top:30px;background-image:url(/img/3/characterdialogsheet.png);background-position:-291px -726px}.ability-level1{margin-left:57px}.ability-level2{margin-left:75px}.ability-level3{margin-left:93px}.ability-level4{margin-left:111px}#activeability1{top:48px;left:42px}#activeability2{top:48px;left:210px}#activeability3{top:108px;left:42px}#activeability4{top:108px;left:210px}#activeability5{top:168px;left:42px}#activeability6{top:168px;left:210px}#activeability7{top:228px;left:42px}#activeability8{top:228px;left:210px}#passiveability1{top:336px;left:42px}#passiveability2{top:336px;left:210px}#passiveability3{top:396px;left:42px}#passiveability4{top:396px;left:210px}#passiveability5{top:456px;left:42px}#passiveability6{top:456px;left:210px}#passiveability7{top:516px;left:42px}#passiveability8{top:516px;left:210px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#state-page,.state-page{display:block;background:url(/img/2/characterdialogsheet.png) 0 0}#abilities-page{display:none;background:url(/img/2/characterdialogsheet.png) -248px 0}#settings-page{display:none;background:url(/img/2/characterdialogsheet.png) -496px 0}#quest-page{display:none;background:url(/img/2/characterdialogsheet.png) -744px 0}#guild-page{display:none;background:url(/img/2/characterdialogsheet.png) -992px 0}#skills-page{display:none;background:url(/img/2/characterdialogsheet.png) -496px -434px}#profile-dialog,.page{position:absolute;width:248px;height:434px}.profile-slot{position:absolute;width:32px;height:30px;background-position:0 0}.profile-info{position:absolute;left:48px;width:184px;height:24px;font-family:AdvoCut,sans-serif;font-size:12px;font-weight:700;line-height:24px;text-align:center;text-shadow:1px 1px #808080}#equipment-button{position:absolute;top:55%;right:102px;width:42px;height:34px;background:url(/img/2/characterdialogsheet.png) 0 -514px}#equipment-button:hover{background:url(/img/2/characterdialogsheet.png) -84px -514px}#equipment-button:active,#equipment-button.active{background:url(/img/2/characterdialogsheet.png) -42px -514px}.weapon-slot,.armour-slot,.pendant-slot,.ring-slot,.boots-slot{margin-top:-4px;background-size:600%}.weapon-slot{top:240px;left:8px}.armour-slot{top:238px;left:208px}.pendant-slot{top:156px;left:108px}.ring-slot{top:344px;left:54px}.boots-slot{top:346px;left:164px}#profile-name{top:16px}#profile-level{top:58px}#profile-experience{top:100px}.navigator{width:84px;height:34px}.previous,.next{position:absolute;top:0;left:auto;left:initial;width:42px;height:34px;background-image:url(/img/2/characterdialogsheet.png)}.previous{cursor:pointer;left:0;background-position:0 -480px}.previous.disabled{cursor:url(/img/3/hand.png),auto;background-position:0 -446px}.next{cursor:pointer;left:42px;background-position:-42px -446px}.next.disabled{cursor:url(/img/3/hand.png),auto;background-position:-42px -480px}#skills-list{width:212px;height:358px}#achievement-count,#quest-count{width:60px;height:16px;font-size:16px}.ability,.ability-icon{position:absolute;display:none;width:32px;height:32px}.ability-icon{display:block}.ability-icon-intimidate{background-image:url(/img/2/abilityicons.png);background-position:0 1px}.ability-icon-run{background-image:url(/img/2/abilityicons.png);background-position:-32px 1px}.ability-icon-awareness{background-image:url(/img/2/abilityicons.png);background-position:-64px 1px}.ability-icon-dualistsmark{background-image:url(/img/2/abilityicons.png);background-position:-96px 1px}.ability-icon-hotshot{background-image:url(/img/2/abilityicons.png);background-position:-128px 1px}.ability-icon-thickskin{background-image:url(/img/2/abilityicons.png);background-position:-160px 1px}.ability-icon-precognition{background-image:url(/img/2/abilityicons.png);background-position:-192px 1px}.ability-icon-secretcalling{background-image:url(/img/2/abilityicons.png);background-position:-224px 1px}.ability-level{position:absolute;width:10px;height:12px;margin-top:20px;background-image:url(/img/2/characterdialogsheet.png);background-position:-194px -484px}.ability-level1{margin-left:38px}.ability-level2{margin-left:50px}.ability-level3{margin-left:62px}.ability-level4{margin-left:74px}#activeability1{top:32px;left:28px}#activeability2{top:32px;left:140px}#activeability3{top:72px;left:28px}#activeability4{top:72px;left:140px}#activeability5{top:112px;left:28px}#activeability6{top:112px;left:140px}#activeability7{top:152px;left:28px}#activeability8{top:152px;left:140px}#passiveability1{top:224px;left:28px}#passiveability2{top:224px;left:140px}#passiveability3{top:264px;left:28px}#passiveability4{top:264px;left:140px}#passiveability5{top:304px;left:28px}#passiveability6{top:304px;left:140px}#passiveability7{top:344px;left:28px}#passiveability8{top:344px;left:140px}}@media only screen and (max-width: 1000px){#state-page,.state-page{display:block;background:url(/img/1/characterdialogsheet.png) 0 0}#abilities-page{display:none;background:url(/img/1/characterdialogsheet.png) -124px 0}#settings-page{display:none;background:url(/img/1/characterdialogsheet.png) -248px 0}#quest-page{display:none;background:url(/img/1/characterdialogsheet.png) -372px 0}#guild-page{display:none;background:url(/img/1/characterdialogsheet.png) -496px 0}#skills-page{display:none;background:url(/img/1/characterdialogsheet.png) -248px -217px}#profile-dialog,.page{position:absolute;width:124px;height:217px}.profile-slot{position:absolute;width:16px;height:15px;background-position:0 0}.profile-info{position:absolute;left:24px;width:92px;height:12px;font-family:AdvoCut,sans-serif;font-size:6px;font-weight:700;line-height:12px;text-align:center;text-shadow:1px 1px #808080}#equipment-button{position:absolute;top:55%;right:51px;width:21px;height:17px;background:url(/img/1/characterdialogsheet.png) 0 -257px}#equipment-button:hover{background:url(/img/1/characterdialogsheet.png) -42px -257px}#equipment-button:active,#equipment-button.active{background:url(/img/1/characterdialogsheet.png) -21px -257px}.weapon-slot,.armour-slot,.pendant-slot,.ring-slot,.boots-slot{margin-top:-2px;background-size:600%}.weapon-slot{top:120px;left:4px}.armour-slot{top:119px;left:104px}.pendant-slot{top:78px;left:54px}.ring-slot{top:172px;left:27px}.boots-slot{top:173px;left:82px}#profile-name{top:8px}#profile-level{top:29px}#profile-experience{top:50px}.navigator{width:42px;height:17px}.previous,.next{position:absolute;top:0;left:auto;left:initial;width:21px;height:17px;background-image:url(/img/1/characterdialogsheet.png)}.previous{cursor:pointer;left:0;background-position:0 -240px}.previous.disabled{cursor:url(/img/3/hand.png),auto;background-position:0 -223px}.next{cursor:pointer;left:21px;background-position:-21px -223px}.next.disabled{cursor:url(/img/3/hand.png),auto;background-position:-21px -240px}#skills-list{width:106px;height:179px}#achievement-count,#quest-count{width:30px;height:8px;font-size:8px}.ability,.ability-icon{position:absolute;display:none;width:16px;height:16px}.ability-icon{display:block}.ability-icon-intimidate{background-image:url(/img/1/abilityicons.png);background-position:0 1px}.ability-icon-run{background-image:url(/img/1/abilityicons.png);background-position:-16px 1px}.ability-icon-awareness{background-image:url(/img/1/abilityicons.png);background-position:-32px 1px}.ability-icon-dualistsmark{background-image:url(/img/1/abilityicons.png);background-position:-48px 1px}.ability-icon-hotshot{background-image:url(/img/1/abilityicons.png);background-position:-64px 1px}.ability-icon-thickskin{background-image:url(/img/1/abilityicons.png);background-position:-80px 1px}.ability-icon-precognition{background-image:url(/img/1/abilityicons.png);background-position:-96px 1px}.ability-icon-secretcalling{background-image:url(/img/1/abilityicons.png);background-position:-112px 1px}.ability-level{position:absolute;width:5px;height:6px;margin-top:10px;background-image:url(/img/1/characterdialogsheet.png);background-position:-97px -242px}.ability-level1{margin-left:19px}.ability-level2{margin-left:25px}.ability-level3{margin-left:31px}.ability-level4{margin-left:37px}#activeability1{top:16px;left:14px}#activeability2{top:16px;left:70px}#activeability3{top:36px;left:14px}#activeability4{top:36px;left:70px}#activeability5{top:56px;left:14px}#activeability6{top:56px;left:70px}#activeability7{top:76px;left:14px}#activeability8{top:76px;left:70px}#passiveability1{top:112px;left:14px}#passiveability2{top:112px;left:70px}#passiveability3{top:132px;left:14px}#passiveability4{top:132px;left:70px}#passiveability5{top:152px;left:14px}#passiveability6{top:152px;left:70px}#passiveability7{top:172px;left:14px}#passiveability8{top:172px;left:70px}}@media only screen and (min-width: 1501px){#profile-dialog{right:34px;bottom:45px}.profile-item-info{font-size:24px}.profession-name{border-radius:12px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#profile-dialog{right:70px;bottom:45px}.profile-item-info{font-size:18px}.profession-name{font-size:20px;border-radius:8px}}@media only screen and (max-width: 1000px){#profile-dialog{right:122px;bottom:99px;transform:scale(1.5)}.profile-item-info{font-size:8px}.profession-name{font-size:10px;border:1px solid #373737;border-radius:4px}}#sliders{position:absolute;top:15%;right:10%;float:right}#texts{position:absolute;top:15%;left:10%;float:left;font-family:AdvoCut,sans-serif}#info{position:absolute;top:78%;width:100%;height:8%;text-align:center}#check-marks{position:absolute;top:41%;right:10%;float:right}#music,#sound,#brightness{position:absolute}#audio-enabled-checkbox,#low-power-checkbox,#debug-mode-checkbox,#centre-checkbox,#show-names-checkbox,#show-levels-checkbox,#disable-region-caching-checkbox{left:50%}@media only screen and (min-width: 1501px){#sliders{width:120px;height:90px}#music{top:3px}#sound{top:60px}#brightness{top:123px}#check-marks{width:120px;height:360px}#texts{width:180px;height:300px;font-size:24px}#texts p{margin-bottom:36px}#audio-enabled-checkbox{top:9px}#low-power-checkbox{top:69px}#debug-mode-checkbox{top:132px}#show-names-checkbox{top:186px}#show-levels-checkbox{top:246px}#disable-region-caching-checkbox{top:306px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#sliders{width:80px;height:60px}#music{top:2px}#sound{top:40px}#brightness{top:82px}#check-marks{width:80px;height:240px}#texts{width:120px;height:200px;font-size:16px}#texts p{margin-bottom:24px}#audio-enabled-checkbox{top:6px}#low-power-checkbox{top:46px}#debug-mode-checkbox{top:88px}#show-names-checkbox{top:124px}#show-levels-checkbox{top:164px}#disable-region-caching-checkbox{top:204px}}@media only screen and (max-width: 1000px){#sliders{width:40px;height:30px}#music{top:1px}#sound{top:20px}#brightness{top:41px}#check-marks{width:40px;height:120px}#texts{width:60px;height:100px;font-size:8px}#texts p{margin-bottom:12px}#audio-enabled-checkbox{top:3px}#low-power-checkbox{top:23px}#debug-mode-checkbox{top:44px}#show-names-checkbox{top:62px}#show-levels-checkbox{top:82px}#disable-region-caching-checkbox{top:102px}}@media only screen and (max-width: 1000px){#settings-page{right:31px;bottom:99px;transform:scale(1.5)}#texts{top:15%}}#store{cursor:url(/img/3/hand.png),auto;position:absolute;top:17%;left:50%;display:none}#store-inventory-container{position:absolute;top:0;right:100%}#store-container{position:absolute;top:8%;left:8%;overflow-y:scroll;width:85%;height:80%;font-family:AdvoCut,sans-serif}#store-container ul li{padding-bottom:5px}#store-inventory-slots{left:14%}#store-sell-slot-return-text,#store-sell-slot-text,#shards-count{color:#000}#confirm-enchant,#confirm-sell{top:80%;left:70%}.store-item{display:inline-flex;width:98%;height:5%;border:3px solid rgba(255,255,0,.3);border-radius:10px}.store-item-image{transform:scale(.9);width:32px;height:32px;background-size:600%;border:2px solid rgba(0,0,255,.3);border-radius:100%}.store-item-name,.store-item-count,.store-item-price,.store-item-buy{position:absolute;float:left;padding-top:2%;font-size:12px}.store-item-name{left:15%}.store-item-count{left:65%}.store-item-price{left:73%}.store-item-buy{position:relative;left:75%;border:2px solid rgba(0,255,0,.3);border-radius:30%}.store-item-buy:hover{cursor:pointer;color:#fff}@media only screen and (min-width: 1501px){#store{width:510px;height:504px;background:url(/img/3/containers.png) -387px -66px}#store-inventory-container{width:387px;height:465px;background:url(/img/3/containers.png) 0 0}#store-sell-slot,#store-sell-slot-return{position:absolute;top:369px;width:48px;height:48px;background-size:600%}#store-sell-slot{left:42px}#store-sell-slot-return{left:132px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#store{width:340px;height:336px;background:url(/img/2/containers.png) -258px -44px}#store-inventory-container{width:258px;height:310px;background:url(/img/2/containers.png) 0 0}#store-sell-slot,#store-sell-slot-return{position:absolute;top:246px;width:32px;height:32px;background-size:600%}#store-sell-slot{left:28px}#store-sell-slot-return{left:88px}}@media only screen and (max-width: 1000px){#store{width:170px;height:168px;background:url(/img/1/containers.png) -129px -22px}#store-inventory-container{width:129px;height:155px;background:url(/img/1/containers.png) 0 0}#store-sell-slot,#store-sell-slot-return{position:absolute;top:123px;width:16px;height:16px;background-size:600%}#store-sell-slot{left:14px}#store-sell-slot-return{left:44px}}@media only screen and (min-width: 1501px){.store-item-name,.store-item-count,.store-item-price,.store-item-buy{font-size:14px}.store-item-name{left:10%}}@media only screen and (max-width: 1000px){#store{top:30%;left:55%;transform:scale(1.5)}#store-container ul li{padding-top:1px;padding-bottom:1px}.store-item{width:97%;border:1.5px solid rgba(255,255,0,.3);border-radius:7px}.store-item-image{width:16px;height:16px;border:1px solid rgba(0,0,255,.3)}.store-item-name,.store-item-count,.store-item-price{font-size:7px}.store-item-buy{position:relative;float:left;padding-top:2%;font-size:6px;border:1px solid rgba(0,255,0,.3)}}#trade{position:absolute;top:0;right:0;bottom:0;left:0;display:none;margin:auto}#trade-player-container,#trade-o-player-container{position:relative;top:24%;float:left}#trade-player-container{left:5%}#trade-o-player-container{left:12.5%}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#trade{width:500px;height:339px;background:url(/img/2/trade.png) 0 0}#trade-player-container,#trade-o-player-container{width:206px;height:186px}}@media only screen and (min-width: 1501px){#equipment-slots{top:45px;left:165px;overflow:hidden;width:360px;height:396px;background-position:-6px -210px}#equipment-container{position:absolute;top:-210px;left:-6px}.player-image{position:absolute;top:210px;left:330px;scale:3;overflow:auto;width:32px;height:32px}#player-image-navigator{position:absolute;top:282px;left:285px}.title{font-size:30px;text-decoration:underline}#attack-stats,#defense-stats,#bonuses{font-size:24px;border-color:#000;border-radius:1px}#attack-stats,#defense-stats{top:48px;width:210px;height:240px}#attack-stats{left:540px}#defense-stats{left:750px}#bonuses{top:270px;left:540px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#equipment-slots{top:30px;left:110px;overflow:hidden;width:240px;height:264px;background-position:-4px -140px}#equipment-container{position:absolute;top:-140px;left:-4px}.player-image{position:absolute;top:140px;left:220px;scale:2;overflow:auto;width:32px;height:32px}#player-image-navigator{position:absolute;top:188px;left:190px}.title{font-size:20px;text-decoration:underline}#attack-stats,#defense-stats,#bonuses{font-size:16px;border-color:#000;border-radius:1px}#attack-stats,#defense-stats{top:32px;width:140px;height:160px}#attack-stats{left:360px}#defense-stats{left:500px}#bonuses{top:180px;left:360px}}@media only screen and (max-width: 1000px){#equipment-slots{top:15px;left:55px;overflow:hidden;width:120px;height:132px;background-position:-2px -70px}#equipment-container{position:absolute;top:-70px;left:-2px}.player-image{position:absolute;top:70px;left:110px;scale:1;overflow:auto;width:32px;height:32px}#player-image-navigator{position:absolute;top:94px;left:95px}.title{font-size:10px;text-decoration:underline}#attack-stats,#defense-stats,#bonuses{font-size:8px;border-color:#000;border-radius:1px}#attack-stats,#defense-stats{top:16px;width:70px;height:80px}#attack-stats{left:180px}#defense-stats{left:250px}#bonuses{top:90px;left:180px}}@media only screen and (max-width: 1000px){.player-image{top:60px;left:100px}}#attack-stats,#defense-stats,#bonuses{position:absolute;font-family:AdvoCut,sans-serif}#close-equipments{top:-2%;left:96%}#achievements-container{position:absolute;top:0;right:0;bottom:0;left:0;overflow:auto;margin:auto;font-family:AdvoCut,sans-serif}#achievements-container>ul>li:last-child.achievement-element{padding-bottom:0!important}.achievement-element>p.achievement-title{float:left;color:#fff}.achievement-element>p.achievement-progress{float:right;color:#fff}.coin{position:absolute}@media only screen and (min-width: 1501px){#achievements-container{width:954px;height:390px;font-size:22px}.achievement-element{width:954px;height:78px;padding-bottom:24px;background:url(/img/3/achievements.png) 0 -288px no-repeat}.achievement-element>p.achievement-title,.achievement-element>p.achievement-description{padding-top:27px}.achievement-element>p.achievement-title{margin-left:90px;font-size:24px}.achievement-element>p.achievement-description{margin-left:285px}.achievement-element>p.achievement-progress{margin-right:6px}.coin{width:72px;height:78px;background:url(/img/3/achievements.png) no-repeat}.coin-default{background-position:-216px -78px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#achievements-container{width:636px;height:260px;font-size:22px}.achievement-element{width:636px;height:52px;padding-bottom:16px;background:url(/img/2/achievements.png) 0 -192px no-repeat}.achievement-element>p.achievement-title,.achievement-element>p.achievement-description{padding-top:18px}.achievement-element>p.achievement-title{margin-left:60px;font-size:16px}.achievement-element>p.achievement-description{margin-left:190px}.achievement-element>p.achievement-progress{margin-right:4px}.coin{width:48px;height:52px;background:url(/img/2/achievements.png) no-repeat}.coin-default{background-position:-144px -52px}}@media only screen and (max-width: 1000px){#achievements-container{width:318px;height:130px;font-size:22px}.achievement-element{width:318px;height:26px;padding-bottom:8px;background:url(/img/1/achievements.png) 0 -96px no-repeat}.achievement-element>p.achievement-title,.achievement-element>p.achievement-description{padding-top:9px}.achievement-element>p.achievement-title{margin-left:30px;font-size:8px}.achievement-element>p.achievement-description{margin-left:95px}.achievement-element>p.achievement-progress{margin-right:2px}.coin{width:24px;height:26px;background:url(/img/1/achievements.png) no-repeat}.coin-default{background-position:-72px -26px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){.achievement-element>p.achievement-title{font-size:16px}.achievement-element>p.achievement-description{font-size:15px}}@media only screen and (max-width: 1000px){.achievement-element>p.achievement-title{font-size:10px}.achievement-element>p.achievement-description{margin-left:110px;font-size:9px}}#quests-container,#quest-log{position:absolute;overflow:auto;font-family:AdvoCut,sans-serif}.quest-log-h1{font-size:150%;color:#fff;text-align:left}.quest-log-p{color:#fff}@media only screen and (min-width: 1501px){#quests{background:url(/img/3/quests.png) 0 0 no-repeat}#quests-container{width:318px;height:351px;margin-top:60px;margin-left:63px}#quest-log{width:516px;height:351px;margin-top:60px;margin-left:453px}#quest-log>div{margin-top:12px;margin-left:12px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#quests{background:url(/img/2/quests.png) 0 0 no-repeat}#quests-container{width:212px;height:234px;margin-top:40px;margin-left:42px}#quest-log{width:344px;height:234px;margin-top:40px;margin-left:302px}#quest-log>div{margin-top:8px;margin-left:8px}}@media only screen and (max-width: 1000px){#quests{background:url(/img/1/quests.png) 0 0 no-repeat}#quests-container{width:106px;height:117px;margin-top:20px;margin-left:21px}#quest-log{width:172px;height:117px;margin-top:20px;margin-left:151px}#quest-log>div{margin-top:4px;margin-left:4px}}@media only screen and (max-width: 1000px){#quests-container,#quest-log{font-size:8px}}#friends-page{position:absolute;right:0;bottom:45px}#friends-list{position:absolute;top:0;right:0;bottom:0;left:0;overflow:auto;margin:auto;font-family:AdvoCut,sans-serif}#popup-container{position:absolute;top:0;right:0;bottom:0;left:0;display:none;width:100%;height:100%;border-radius:16px}#add-popup{position:absolute;top:0;right:0;bottom:0;left:0;margin:auto}#popup-friend-input{position:absolute;font-family:AdvoCut,sans-serif;font-size:16px;color:#fff;background-color:transparent;border:none}.add,.remove{position:absolute}.confirm,.cancel{position:absolute;bottom:0}@media only screen and (min-width: 1501px){#friends-page{display:none}#friends-container{width:100%;height:100%;background:url(/img/3/characterdialogsheet.png) -744px -651px}#friends-list{width:318px;height:516px;margin-top:42px;padding-left:6px}#friends-list>ul>li:last-child{margin-bottom:3px}#add-popup{width:288px;height:114px;background:url(/img/3/characterdialogsheet.png) -438px -816px}#popup-friend-input{top:24px;left:24px;width:228px}.add,.remove{bottom:24px;width:63px;height:51px;background:url(/img/3/characterdialogsheet.png) 0 no-repeat}.add:hover,.remove:hover{background-position-x:-126px}.add:active,.remove:active{background-position-x:-63px}.add{left:72px;background-position-y:-822px}.remove{right:72px;background-position-y:-873px}.confirm,.cancel{width:63px;height:42px;background:url(/img/3/characterdialogsheet.png) 0 no-repeat}.confirm:hover,.cancel:hover{background-position-x:-126px}.confirm:active,.cancel:active{background-position-x:-63px}.confirm{bottom:12px;left:42px;background-position-y:-924px}.cancel{right:42px;bottom:12px;background-position-y:-966px}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#friends-page{display:none}#friends-container{width:100%;height:100%;background:url(/img/2/characterdialogsheet.png) -496px -434px}#friends-list{width:212px;height:344px;margin-top:28px;padding-left:4px}#friends-list>ul>li:last-child{margin-bottom:2px}#add-popup{width:192px;height:76px;background:url(/img/2/characterdialogsheet.png) -292px -544px}#popup-friend-input{top:16px;left:16px;width:152px}.add,.remove{bottom:16px;width:42px;height:34px;background:url(/img/2/characterdialogsheet.png) 0 no-repeat}.add:hover,.remove:hover{background-position-x:-84px}.add:active,.remove:active{background-position-x:-42px}.add{left:48px;background-position-y:-548px}.remove{right:48px;background-position-y:-582px}.confirm,.cancel{width:42px;height:28px;background:url(/img/2/characterdialogsheet.png) 0 no-repeat}.confirm:hover,.cancel:hover{background-position-x:-84px}.confirm:active,.cancel:active{background-position-x:-42px}.confirm{bottom:8px;left:28px;background-position-y:-616px}.cancel{right:28px;bottom:8px;background-position-y:-644px}}@media only screen and (max-width: 1000px){#friends-page{display:none}#friends-container{width:100%;height:100%;background:url(/img/1/characterdialogsheet.png) -248px -217px}#friends-list{width:106px;height:172px;margin-top:14px;padding-left:2px}#friends-list>ul>li:last-child{margin-bottom:1px}#add-popup{width:96px;height:38px;background:url(/img/1/characterdialogsheet.png) -146px -272px}#popup-friend-input{top:8px;left:8px;width:76px}.add,.remove{bottom:8px;width:21px;height:17px;background:url(/img/1/characterdialogsheet.png) 0 no-repeat}.add:hover,.remove:hover{background-position-x:-42px}.add:active,.remove:active{background-position-x:-21px}.add{left:24px;background-position-y:-274px}.remove{right:24px;background-position-y:-291px}.confirm,.cancel{width:21px;height:14px;background:url(/img/1/characterdialogsheet.png) 0 no-repeat}.confirm:hover,.cancel:hover{background-position-x:-42px}.confirm:active,.cancel:active{background-position-x:-21px}.confirm{bottom:4px;left:14px;background-position-y:-308px}.cancel{right:14px;bottom:4px;background-position-y:-322px}}@media only screen and (min-width: 1501px){#friends-page{right:0}}@media only screen and (max-width: 1500px),only screen and (max-height: 870px){#friends-page{right:32px}}@media only screen and (max-width: 1000px){#friends-page{right:80px;bottom:99px;transform:scale(1.5)}#popup-friend-input{font-size:8px}#friends-container>ul>li>p{font-size:12px}}body.game{background:#000}body.game #load-character,body.game #create-character,body.game #error{display:none}body.game #parchment{z-index:0;transition:.5s opacity linear .5s,z-index 0s linear 1s}body.game #credits,body.game #death,body.game #news,body.game #about,body.game #git{z-index:1000;opacity:0;transition:0s opacity linear 0s}body.game .parchment-left{left:41%;transition:.5s left ease-in-out}body.game .parchment-right{right:41%;transition:.5s right ease-in-out}body.game.credits #credits,body.game.death #death,body.game.news #news,body.game.about #about,body.game.git #git{z-index:1000;opacity:1;transition:.5s opacity linear .5s}body.game.credits #parchment,body.game.death #parchment,body.game.news #parchment,body.game.about #parchment,body.game.git #parchment{z-index:1000;opacity:1;transition:.5s opacity linear 0s}body.game.credits .parchment-left,body.game.death .parchment-left,body.game.news .parchment-left,body.game.about .parchment-left,body.game.git .parchment-left{left:0}body.game.credits .parchment-right,body.game.death .parchment-right,body.game.news .parchment-right,body.game.about .parchment-right,body.game.git .parchment-right{right:0}body.game .parchment-middle{width:0;margin-left:0;transition:.5s width ease-in-out,.5s margin-left ease-in-out,.5s background-position ease-in-out}body.game #game-container{opacity:1}body.game footer{display:none;color:#8a8a8a}@media only screen and (min-width: 1501px){body.game .parchment-middle{background-position:-633px -882px}body.game.credits .parchment-middle,body.game.death .parchment-middle,body.game.news .parchment-middle,body.game.git .parchment-middle,body.game.about .parchment-middle{width:1038px;margin-left:-519px;background-position-x:-114px}}\n',document.head.appendChild(n),{execute:function(){const n={"alpha-2.2.3":{title:"Kaetram alpha-2.2.3",content:["- Audio fixes","- Added new achievement","- Minor map updates","- This neat little interface :)","- Hotkeys 'm' for map and 'p' for profile","- Admins and moderators name now displays a different colour"]},"alpha-2.2.4":{title:"Kaetram alpha-2.2.4",content:["- Discord bot updates","- Forester now sells axes","- Map updates and loading time improvements","- Armour and weapon stats for all items","- Added default price to majority of items","- Profanity filter fixes and improvements"]},"alpha-2.2.5":{title:"Kaetram alpha-2.2.5",content:["- Fixes health bar resetting when logging out","- Anti-cheating measures updated","- Minor fixes to the UI animations","- Mobile support drag & drop","- Un-droppable/un-sellable quest items","- Fixes bug with poison weapons","- Respawn duration changes to Skeleton King and Ogre Lord","- Map changes and more content","- A lot of game engine improvements and preparations for new content ;)"]},"alpha-2.2.6":{title:"Kaetram alpha-2.2.6",content:["- Chatbox fixes and new layout","- Added stop movement by pressing ESC","- Added attack last target by pressing 't'","- Combat system improvements","- Anti-cheat detection/no-clipping fixes (hopefully)","- Gold coin image update","- Map loading improvements","- Client backend work, support for special effects and more","- New map content"]},"alpha-2.2.7":{title:"Kaetram alpha-2.2.7",content:["- Improvements to the poison effect","- Adds 'h' as the hotkey for healing (will use first potion in inventory)","- Trees now indicate level required to chop","- Improvements to the backend and interactions with the map","- New map content and achievements","- New trees have been added"]},"alpha-2.3.0":{title:"Kaetram alpha-2.3.0",content:["- Friends list","- New achievement interface","- New quest interface","- Various user interface improvements","- Backend fixes"]},"alpha-2.3.1":{title:"Kaetram alpha-2.3.1",content:["- Added special effects to some projectiles","- Fixes some user interface quirks","- Fixes some private messaging issues","- Minor improvements to ranged combat","- Fixes a bug with the overlay sizing","- New caching system for the client map"]},"alpha-2.3.2":{title:"Kaetram alpha-2.3.2",content:["- New inventory interface","- Fixes mobs being unattackable after they moved","- Mob position sync when returning to game tab (browsers)","- Fix bug with combat continuing after closing the game","- Backend optimizations","- Chat UI fixes on mobile"]}};const r=new class{constructor(t){this.level=t}info(...t){"debug"!==this.level&&"info"!==this.level||console.info(...t)}debug(...t){"debug"===this.level&&console.debug(...t)}error(...t){console.error(...t)}}("info");let o;"serviceWorker"in navigator&&(window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),o=t})),function(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:a,onRegisterError:s}=t;let l,h;h=async function(){if("serviceWorker"in navigator){const{Workbox:n}=await(t=()=>i.import("./workbox-window.prod.es5-legacy-ab6aa431.js"),t());l=new n("/sw.js",{scope:"/",type:"classic"}),l.addEventListener("activated",(t=>{(t.isUpdate||t.isExternal)&&window.location.reload()})),l.addEventListener("installed",(t=>{t.isUpdate||null==r||r()})),l.register({immediate:e}).then((t=>{a?a("/sw.js",t):null==o||o(t)})).catch((t=>{null==s||s(t)}))}var t}()}({immediate:!0}));let a=navigator.userAgent.toLowerCase();let s=()=>window.innerWidth<1e3;var l=(t=>(t[t.Login=0]="Login",t[t.Register=1]="Register",t[t.Guest=2]="Guest",t))(l||{}),h=(t=>(t[t.Spawns=0]="Spawns",t[t.Positions=1]="Positions",t))(h||{}),d=(t=>(t[t.Batch=0]="Batch",t[t.Equip=1]="Equip",t[t.Unequip=2]="Unequip",t))(d||{}),u=(t=>(t[t.Request=0]="Request",t[t.Started=1]="Started",t[t.Step=2]="Step",t[t.Stop=3]="Stop",t[t.Move=4]="Move",t[t.Follow=5]="Follow",t[t.Entity=6]="Entity",t[t.Zone=7]="Zone",t))(u||{}),c=(t=>(t[t.Talk=0]="Talk",t[t.Attack=1]="Attack",t[t.None=2]="None",t[t.Object=3]="Object",t))(c||{}),g=(t=>(t[t.Initiate=0]="Initiate",t[t.Hit=1]="Hit",t[t.Finish=2]="Finish",t[t.Sync=3]="Sync",t))(g||{}),p=(t=>(t[t.Ping=0]="Ping",t[t.Pong=1]="Pong",t))(p||{}),f=(t=>(t[t.Batch=0]="Batch",t[t.Add=1]="Add",t[t.Remove=2]="Remove",t[t.Select=3]="Select",t[t.Swap=4]="Swap",t))(f||{}),w=(t=>(t[t.Batch=0]="Batch",t[t.Add=1]="Add",t[t.Update=2]="Update",t[t.Use=3]="Use",t[t.QuickSlot=4]="QuickSlot",t))(w||{}),m=(t=>(t[t.Batch=0]="Batch",t[t.Progress=1]="Progress",t[t.Finish=2]="Finish",t))(m||{}),_=(t=>(t[t.Batch=0]="Batch",t[t.Progress=1]="Progress",t))(_||{}),k=(t=>(t[t.Ok=0]="Ok",t[t.YesNo=1]="YesNo",t[t.Text=2]="Text",t[t.Popup=3]="Popup",t))(k||{}),b=(t=>(t[t.Sync=0]="Sync",t[t.Skill=1]="Skill",t))(b||{}),v=(t=>(t[t.Talk=0]="Talk",t[t.Store=1]="Store",t[t.Bank=2]="Bank",t[t.Enchant=3]="Enchant",t[t.Countdown=4]="Countdown",t))(v||{}),y=(t=>(t[t.Select=0]="Select",t[t.Remove=1]="Remove",t[t.Enchant=2]="Enchant",t[t.Update=3]="Update",t))(y||{}),x=(t=>(t[t.Location=0]="Location",t[t.Relative=1]="Relative",t[t.Entity=2]="Entity",t[t.Remove=3]="Remove",t[t.Button=4]="Button",t))(x||{}),S=(t=>(t[t.Open=0]="Open",t[t.Close=1]="Close",t[t.Buy=2]="Buy",t[t.Sell=3]="Sell",t[t.Update=4]="Update",t[t.Select=5]="Select",t))(S||{}),C=(t=>(t[t.Score=0]="Score",t[t.End=1]="End",t[t.Lobby=2]="Lobby",t[t.Exit=3]="Exit",t))(C||{}),E=(t=>(t[t.Set=0]="Set",t[t.Remove=1]="Remove",t[t.Lamp=2]="Lamp",t[t.RemoveLamps=3]="RemoveLamps",t[t.Darkness=4]="Darkness",t))(E||{}),I=(t=>(t[t.CtrlClick=0]="CtrlClick",t))(I||{}),A=(t=>(t[t.Batch=0]="Batch",t[t.Update=1]="Update",t))(A||{}),Y=(t=>(t[t.Entity=0]="Entity",t[t.Position=1]="Position",t))(Y||{}),X=(t=>(t[t.Speed=0]="Speed",t[t.Critical=1]="Critical",t[t.Freeze=2]="Freeze",t[t.Stun=3]="Stun",t[t.Burn=4]="Burn",t))(X||{}),T=(t=>(t[t.List=0]="List",t[t.Add=1]="Add",t[t.Remove=2]="Remove",t[t.Status=3]="Status",t))(T||{});x.Remove;var L=(t=>(t[t.Bank=0]="Bank",t[t.Inventory=1]="Inventory",t))(L||{}),j=(t=>(t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right",t))(j||{}),R=(t=>(t[t.Player=0]="Player",t[t.NPC=1]="NPC",t[t.Item=2]="Item",t[t.Mob=3]="Mob",t[t.Chest=4]="Chest",t[t.Projectile=5]="Projectile",t[t.Object=6]="Object",t))(R||{}),z=(t=>(t[t.Active=0]="Active",t[t.Passive=1]="Passive",t))(z||{}),P=(t=>(t[t.Idle=0]="Idle",t[t.Attack=1]="Attack",t[t.Walk=2]="Walk",t[t.Orientate=3]="Orientate",t))(P||{}),O=(t=>(t.Use="Use",t.Drop="Drop",t.Equip="Equip",t.Eat="Eat",t.Move="Move",t))(O||{}),q=(t=>(t[t.Damage=0]="Damage",t[t.Poison=1]="Poison",t[t.Heal=2]="Heal",t[t.Mana=3]="Mana",t[t.Experience=4]="Experience",t[t.LevelUp=5]="LevelUp",t[t.Critical=6]="Critical",t[t.Stun=7]="Stun",t[t.Explosive=8]="Explosive",t[t.Profession=9]="Profession",t))(q||{}),M=(t=>(t[t.Armour=0]="Armour",t[t.Boots=1]="Boots",t[t.Pendant=2]="Pendant",t[t.Ring=3]="Ring",t[t.Weapon=4]="Weapon",t))(M||{}),D=(t=>(t[t.Colliding=0]="Colliding",t[t.Mob=1]="Mob",t[t.Player=2]="Player",t[t.Item=3]="Item",t[t.NPC=4]="NPC",t[t.Chest=5]="Chest",t[t.Object=6]="Object",t))(D||{}),N=(t=>(t[t.Lumberjacking=0]="Lumberjacking",t[t.Accuracy=1]="Accuracy",t[t.Archery=2]="Archery",t[t.Health=3]="Health",t[t.Magic=4]="Magic",t[t.Mining=5]="Mining",t[t.Strength=6]="Strength",t))(N||{}),B=(t=>(t[t.None=0]="None",t[t.Critical=1]="Critical",t[t.Terror=2]="Terror",t[t.Stun=3]="Stun",t[t.Healing=4]="Healing",t[t.Fireball=5]="Fireball",t[t.Iceball=6]="Iceball",t[t.Burning=7]="Burning",t[t.Freezing=8]="Freezing",t[t.Poisonball=9]="Poisonball",t[t.Boulder=10]="Boulder",t))(B||{}),F=(t=>(t[t.None=0]="None",t[t.Silver=1]="Silver",t[t.Gold=2]="Gold",t))(F||{}),W=(t=>(t[t.None=0]="None",t[t.Moderator=1]="Moderator",t[t.Administrator=2]="Administrator",t[t.Veteran=3]="Veteran",t[t.Patron=4]="Patron",t))(W||{});let H={0:{fill:"rgb(255, 50, 50)",stroke:"rgb(255, 180, 180)",inflicted:{fill:"white",stroke:"#373737"}},6:{fill:"rgb(204, 0, 204)",stroke:"rgb(255, 180, 180)",inflicted:{fill:"rgb(255, 153, 204)",stroke:"#373737"}},1:{fill:"rgb(66, 183, 77)",stroke:"rgb(50, 120 , 50)"},2:{fill:"rgb(80, 255, 80)",stroke:"rgb(50, 120, 50)"},3:{fill:"rgb(73, 94, 228)",stroke:"rgb(56, 63, 133)"},4:{fill:"rgb(80, 180, 255)",stroke:"rgb(15, 85, 138)"},5:{fill:"rgb(80, 180, 255)",stroke:"rgb(15, 85, 138)"},9:{fill:"rgb(204, 0, 153)",stroke:"rgb(112, 17, 112)"}},U={0:{fill:"rgb(132, 57, 45)",stroke:"rgb(101, 48, 35)"},1:{fill:"rgb(6, 191, 188)",stroke:"rgb(2, 94, 93)"},2:{fill:"rgb(34, 214, 130)",stroke:"rgb(7, 184, 101)"},3:{fill:"rgb(239, 90, 90)",stroke:"rgb(255, 0, 0)"},4:{fill:"rgb(37, 124, 210)",stroke:"rgb(12, 55, 208)"},5:{fill:"rgb(105, 106, 107)",stroke:"rgb(45, 45, 46)"},6:{fill:"rgb(232, 211, 185)",stroke:"rgb(189, 172, 151)"}};var $=(t=>(t[t.MAX_STACK=2147483647]="MAX_STACK",t[t.MAX_LEVEL=135]="MAX_LEVEL",t[t.INVENTORY_SIZE=20]="INVENTORY_SIZE",t[t.BANK_SIZE=69]="BANK_SIZE",t[t.DROP_PROBABILITY=1e3]="DROP_PROBABILITY",t[t.MAX_PROFESSION_LEVEL=99]="MAX_PROFESSION_LEVEL",t[t.HEAL_RATE=5e3]="HEAL_RATE",t[t.STORE_UPDATE_FREQUENCY=2e4]="STORE_UPDATE_FREQUENCY",t[t.MAP_DIVISION_SIZE=48]="MAP_DIVISION_SIZE",t.SPAWN_POINT="405,27",t.TUTORIAL_QUEST_KEY="tutorial",t.TUTORIAL_SPAWN_POINT="570,11",t[t.RESOURCE_RESPAWN=3e4]="RESOURCE_RESPAWN",t[t.TREE_RESPAWN=25e3]="TREE_RESPAWN",t[t.SKILL_LOOP=1e3]="SKILL_LOOP",t[t.MAX_ACCURACY=.45]="MAX_ACCURACY",t[t.EDIBLE_COOLDOWN=1500]="EDIBLE_COOLDOWN",t[t.INVALID_MOVEMENT_THRESHOLD=3]="INVALID_MOVEMENT_THRESHOLD",t[t.ARCHER_ATTACK_RANGE=8]="ARCHER_ATTACK_RANGE",t))($||{}),V=(t=>(t[t.Handshake=0]="Handshake",t[t.Login=1]="Login",t[t.Welcome=2]="Welcome",t[t.Map=3]="Map",t[t.Spawn=4]="Spawn",t[t.List=5]="List",t[t.Who=6]="Who",t[t.Equipment=7]="Equipment",t[t.Ready=8]="Ready",t[t.Sync=9]="Sync",t[t.Movement=10]="Movement",t[t.Teleport=11]="Teleport",t[t.Despawn=12]="Despawn",t[t.Target=13]="Target",t[t.Combat=14]="Combat",t[t.Animation=15]="Animation",t[t.Points=16]="Points",t[t.Network=17]="Network",t[t.Chat=18]="Chat",t[t.Command=19]="Command",t[t.Container=20]="Container",t[t.Ability=21]="Ability",t[t.Quest=22]="Quest",t[t.Achievement=23]="Achievement",t[t.Notification=24]="Notification",t[t.Blink=25]="Blink",t[t.Heal=26]="Heal",t[t.Experience=27]="Experience",t[t.Death=28]="Death",t[t.Music=29]="Music",t[t.NPC=30]="NPC",t[t.Respawn=31]="Respawn",t[t.Trade=32]="Trade",t[t.Enchant=33]="Enchant",t[t.Guild=34]="Guild",t[t.Pointer=35]="Pointer",t[t.PVP=36]="PVP",t[t.Poison=37]="Poison",t[t.Warp=38]="Warp",t[t.Store=39]="Store",t[t.Overlay=40]="Overlay",t[t.Camera=41]="Camera",t[t.Bubble=42]="Bubble",t[t.Skill=43]="Skill",t[t.Update=44]="Update",t[t.Minigame=45]="Minigame",t[t.Effect=46]="Effect",t[t.Friends=47]="Friends",t[t.Focus=48]="Focus",t))(V||{});let G=window.localStorage,Z="data";class K{constructor(){t(this,"data",G.data?JSON.parse(G.getItem(Z)):this.create()),t(this,"mapData",void 0),t(this,"newVersion",!1),this.newVersion=this.isNewVersion(),this.newVersion?(this.set(this.create()),this.clearIndexedDB()):this.loadIndexedDB()}create(){return{new:!0,world:1,clientVersion:"alpha-2.3.2",errorMessage:"",player:{username:"",password:"",autoLogin:!1,rememberMe:!1,orientation:j.Down},settings:{musicVolume:100,soundVolume:100,brightness:100,audioEnabled:!s(),lowPowerMode:!1,debugMode:!1,showNames:!0,showLevels:!0,disableCaching:!1}}}loadIndexedDB(){let t=window.indexedDB?.open("mapCache",this.getDBVersion());t.addEventListener("error",(()=>{this.clearIndexedDB()})),t.addEventListener("upgradeneeded",(t=>{let e=t.target.result;e||console.error("Could not open IndexedDB database."),e.createObjectStore("regions"),e.createObjectStore("objects"),e.createObjectStore("cursorTiles"),r.debug(`IndexedDB created with version ${this.getDBVersion()}.`)})),t.addEventListener("success",(t=>{this.mapData=t.target.result,r.debug(`Successfully opened IndexedDB with version ${this.getDBVersion()}.`)}))}save(){try{this.data&&G.setItem(Z,JSON.stringify(this.data))}catch(t){console.error(t)}}clear(){G.removeItem(Z),this.set(this.create()),this.save()}clearIndexedDB(){this.mapData?.close(),window.indexedDB.deleteDatabase("mapCache"),this.loadIndexedDB()}set(t){this.data=t,this.save()}setError(t){return this.data.errorMessage=t,this.save(),!0}setRemember(t){this.data.player.rememberMe=t,this.save()}setCredentials(t="",e=""){this.data.player.username=t,this.data.player.password=e,this.save()}setMusicVolume(t=100){this.data.settings.musicVolume=t,this.save()}setSoundVolume(t=100){this.data.settings.soundVolume=t,this.save()}setBrightness(t=100){this.data.settings.brightness=t,this.save()}setAudioEnabled(t){this.data.settings.audioEnabled=t,this.save()}setLowPowerMode(t){this.data.settings.lowPowerMode=t,this.save()}setDebug(t){this.data.settings.debugMode=t,this.save()}setShowNames(t){this.data.settings.showNames=t,this.save()}setShowLevels(t){this.data.settings.showLevels=t,this.save()}setDisableCaching(t){this.data.settings.disableCaching=t,this.save()}isNewVersion(){return"alpha-2.3.2"!==this.data.clientVersion}setOrientation(t){this.data.player.orientation=t,this.save()}setMapData(t,e){if(!this.mapData)return;let i=this.mapData.transaction(["objects","cursorTiles"],"readwrite"),n=i.objectStore("objects"),r=i.objectStore("cursorTiles");n.put(t,0),r.put(e,0)}setRegionData(t,e){if(!this.mapData)return;let i=this.mapData.transaction("regions","readwrite").objectStore("regions"),n=i.get(e);n.addEventListener("success",(()=>{n.result||i.put(t,e)}))}getError(){let{errorMessage:t}=this.data;return this.data.errorMessage="",this.save(),t}getUsername(){return this.data.player.username}getPassword(){return this.data.player.password}getDBVersion(){return parseInt(this.data.clientVersion.replace(/\D/g,""))||1}hasRemember(){return this.data.player.rememberMe}isNew(){return this.data.new}getRegionData(t){let e={regionData:{},objects:[],cursorTiles:{}};if(!this.mapData)return t(e);let i=this.mapData.transaction(["regions","objects","cursorTiles"],"readonly"),n=i.objectStore("regions").openCursor(),r=i.objectStore("objects").get(0),o=i.objectStore("cursorTiles").get(0);i.addEventListener("error",(()=>t(e))),n.addEventListener("success",(t=>{let i=t.target.result;i&&(e.regionData[i.primaryKey]=i.value,i.continue())})),r.addEventListener("success",(()=>e.objects=r.result)),o.addEventListener("success",(()=>e.cursorTiles=o.result)),i.addEventListener("complete",(()=>t(e)))}getSettings(){return this.data.settings}getDebug(){return this.data.settings.debugMode}}let Q=t=>t%1==0;const J={tileSize:-1,sideLength:-1,createId:(t,e=0,i=0)=>`${t}${e}${i}`,randomInt:(t,e)=>t+Math.floor(Math.random()*(e-t+1)),createSlot(t,e,i){let n=document.createElement("li"),r=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");return r.classList.add("bank-slot"),o.classList.add("bank-image"),a.classList.add("item-count"),t===L.Bank&&a.classList.add("bank-item-count"),r.append(o),r.append(a),i&&r.addEventListener("click",(()=>i(t,e))),n.append(r),n},getImageURL:(t="")=>""===t?"":`url("/img/sprites/item-${t}.png")`,getCount(t){let e=t.toString();return t>999999?`${Math.floor(t/1e6)}M`:t>9999?`${Math.floor(t/1e3)}K`:t>1?e:""},getContainerAction(t){switch(t){case O.Use:case O.Equip:case O.Eat:return f.Select;case O.Drop:return f.Remove;case O.Move:return f.Swap;default:return-1}},isEmail:t=>/^(([^\s"(),.:;<>@[\\\]]+(\.[^\s"(),.:;<>@[\\\]]+)*)|(".+"))@((\[(?:\d{1,3}\.){3}\d{1,3}])|(([\dA-Za-z-]+\.)+[A-Za-z]{2,}))$/.test(t),getRegion(t,e){return Math.floor(t/$.MAP_DIVISION_SIZE)+Math.floor(e/$.MAP_DIVISION_SIZE)*this.sideLength},getEmptyStats:()=>({crush:0,slash:0,stab:0,magic:0}),getEmptyBonuses:()=>({accuracy:0,strength:0,archery:0,magic:0}),fadeIn(t,e=.1){t.style.opacity||="0",t.style.display="block";let i=()=>{let n=parseFloat(t.style.opacity)+e;n<=1&&(t.style.opacity=n.toString(),requestAnimationFrame(i))};requestAnimationFrame(i)},fadeOut(t,e=.1){t.style.opacity||="1";let i=()=>{let n=parseFloat(t.style.opacity)-e;n>=0?(t.style.opacity=n.toString(),requestAnimationFrame(i)):t.style.display="none"};requestAnimationFrame(i)}};const tt="object"==typeof global&&global&&global.Object===Object&&global;var et="object"==typeof self&&self&&self.Object===Object&&self;const it=tt||et||Function("return this")();const nt=it.Symbol;var rt=Object.prototype,ot=rt.hasOwnProperty,at=rt.toString,st=nt?nt.toStringTag:void 0;var lt=Object.prototype.toString;var ht=nt?nt.toStringTag:void 0;function dt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ht&&ht in Object(t)?function(t){var e=ot.call(t,st),i=t[st];try{t[st]=void 0;var n=!0}catch(F_){}var r=at.call(t);return n&&(e?t[st]=i:delete t[st]),r}(t):function(t){return lt.call(t)}(t)}function ut(t){return null!=t&&"object"==typeof t}function ct(t){return"symbol"==typeof t||ut(t)&&"[object Symbol]"==dt(t)}function gt(t){return"number"==typeof t?t:ct(t)?NaN:+t}function pt(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}const ft=Array.isArray;var wt=nt?nt.prototype:void 0,mt=wt?wt.toString:void 0;function _t(t){if("string"==typeof t)return t;if(ft(t))return pt(t,_t)+"";if(ct(t))return mt?mt.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function kt(t,e){return function(i,n){var r;if(void 0===i&&void 0===n)return e;if(void 0!==i&&(r=i),void 0!==n){if(void 0===r)return n;"string"==typeof i||"string"==typeof n?(i=_t(i),n=_t(n)):(i=gt(i),n=gt(n)),r=t(i,n)}return r}}const bt=kt((function(t,e){return t+e}),0);var vt=/\s/;function yt(t){for(var e=t.length;e--&&vt.test(t.charAt(e)););return e}var xt=/^\s+/;function St(t){return t?t.slice(0,yt(t)+1).replace(xt,""):t}function Ct(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Et=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,At=/^0o[0-7]+$/i,Yt=parseInt;function Xt(t){if("number"==typeof t)return t;if(ct(t))return NaN;if(Ct(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ct(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=St(t);var i=It.test(t);return i||At.test(t)?Yt(t.slice(2),i?2:8):Et.test(t)?NaN:+t}var Tt=1/0;function Lt(t){return t?(t=Xt(t))===Tt||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function jt(t){var e=Lt(t),i=e%1;return e==e?i?e-i:e:0}function Rt(t){return t}function zt(t){if(!Ct(t))return!1;var e=dt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}const Pt=it["__core-js_shared__"];var Ot,qt=(Ot=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||""))?"Symbol(src)_1."+Ot:"";var Mt=Function.prototype.toString;function Dt(t){if(null!=t){try{return Mt.call(t)}catch(F_){}try{return t+""}catch(F_){}}return""}var Nt=/^\[object .+?Constructor\]$/,Bt=Function.prototype,Ft=Object.prototype,Wt=Bt.toString,Ht=Ft.hasOwnProperty,Ut=RegExp("^"+Wt.call(Ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $t(t){return!(!Ct(t)||function(t){return!!qt&&qt in t}(t))&&(zt(t)?Ut:Nt).test(Dt(t))}function Vt(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return $t(i)?i:void 0}const Gt=Vt(it,"WeakMap");const Zt=Gt&&new Gt;var Kt=Zt?function(t,e){return Zt.set(t,e),t}:Rt;const Qt=Kt;var Jt=Object.create,te=function(){function t(){}return function(e){if(!Ct(e))return{};if(Jt)return Jt(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();const ee=te;function ie(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=ee(t.prototype),n=t.apply(i,e);return Ct(n)?n:i}}function ne(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var re=Math.max;function oe(t,e,i,n){for(var r=-1,o=t.length,a=i.length,s=-1,l=e.length,h=re(o-a,0),d=Array(l+h),u=!n;++s<l;)d[s]=e[s];for(;++r<a;)(u||r<o)&&(d[i[r]]=t[r]);for(;h--;)d[s++]=t[r++];return d}var ae=Math.max;function se(t,e,i,n){for(var r=-1,o=t.length,a=-1,s=i.length,l=-1,h=e.length,d=ae(o-s,0),u=Array(d+h),c=!n;++r<d;)u[r]=t[r];for(var g=r;++l<h;)u[g+l]=e[l];for(;++a<s;)(c||r<o)&&(u[g+i[a]]=t[r++]);return u}function le(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}function he(){}function de(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function ue(){}de.prototype=ee(he.prototype),de.prototype.constructor=de;var ce=Zt?function(t){return Zt.get(t)}:ue;const ge=ce;const pe={};var fe=Object.prototype.hasOwnProperty;function we(t){for(var e=t.name+"",i=pe[e],n=fe.call(pe,e)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function me(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function _e(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}function ke(t){if(t instanceof de)return t.clone();var e=new me(t.__wrapped__,t.__chain__);return e.__actions__=_e(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}me.prototype=ee(he.prototype),me.prototype.constructor=me;var be=Object.prototype.hasOwnProperty;function ve(t){if(ut(t)&&!ft(t)&&!(t instanceof de)){if(t instanceof me)return t;if(be.call(t,"__wrapped__"))return ke(t)}return new me(t)}function ye(t){var e=we(t),i=ve[e];if("function"!=typeof i||!(e in de.prototype))return!1;if(t===i)return!0;var n=ge(i);return!!n&&t===n[0]}ve.prototype=he.prototype,ve.prototype.constructor=ve;var xe=Date.now;function Se(t){var e=0,i=0;return function(){var n=xe(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}const Ce=Se(Qt);var Ee=/\{\n\/\* \[wrapped with (.+)\] \*/,Ie=/,? & /;var Ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Ye(t){return function(){return t}}var Xe=function(){try{var t=Vt(Object,"defineProperty");return t({},"",{}),t}catch(F_){}}();const Te=Xe;var Le=Te?function(t,e){return Te(t,"toString",{configurable:!0,enumerable:!1,value:Ye(e),writable:!0})}:Rt;const je=Se(Le);function Re(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function ze(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Pe(t){return t!=t}function Oe(t,e,i){return e==e?function(t,e,i){for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}(t,e,i):ze(t,Pe,i)}function qe(t,e){return!!(null==t?0:t.length)&&Oe(t,e,0)>-1}var Me=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function De(t,e,i){var n=e+"";return je(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace(Ae,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Re(Me,(function(i){var n="_."+i[0];e&i[1]&&!qe(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(Ee);return e?e[1].split(Ie):[]}(n),i)))}function Ne(t,e,i,n,r,o,a,s,l,h){var d=8&e;e|=d?32:64,4&(e&=~(d?64:32))||(e&=-4);var u=[t,e,r,d?o:void 0,d?a:void 0,d?void 0:o,d?void 0:a,s,l,h],c=i.apply(void 0,u);return ye(t)&&Ce(c,u),c.placeholder=n,De(c,t,e)}function Be(t){return t.placeholder}var Fe=/^(?:0|[1-9]\d*)$/;function We(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&Fe.test(t))&&t>-1&&t%1==0&&t<e}var He=Math.min;function Ue(t,e){for(var i=t.length,n=He(e.length,i),r=_e(t);n--;){var o=e[n];t[n]=We(o,i)?r[o]:void 0}return t}var $e="__lodash_placeholder__";function Ve(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var a=t[i];a!==e&&a!==$e||(t[i]=$e,o[r++]=i)}return o}function Ge(t,e,i,n,r,o,a,s,l,h){var d=128&e,u=1&e,c=2&e,g=24&e,p=512&e,f=c?void 0:ie(t);return function w(){for(var m=arguments.length,_=Array(m),k=m;k--;)_[k]=arguments[k];if(g)var b=Be(w),v=le(_,b);if(n&&(_=oe(_,n,r,g)),o&&(_=se(_,o,a,g)),m-=v,g&&m<h){var y=Ve(_,b);return Ne(t,e,Ge,w.placeholder,i,_,y,s,l,h-m)}var x=u?i:this,S=c?x[t]:t;return m=_.length,s?_=Ue(_,s):p&&m>1&&_.reverse(),d&&l<m&&(_.length=l),this&&this!==it&&this instanceof w&&(S=f||ie(S)),S.apply(x,_)}}var Ze="__lodash_placeholder__",Ke=128,Qe=Math.min;var Je=Math.max;function ti(t,e,i,n,r,o,a,s){var l=2&e;if(!l&&"function"!=typeof t)throw new TypeError("Expected a function");var h=n?n.length:0;if(h||(e&=-97,n=r=void 0),a=void 0===a?a:Je(jt(a),0),s=void 0===s?s:jt(s),h-=r?r.length:0,64&e){var d=n,u=r;n=r=void 0}var c=l?void 0:ge(t),g=[t,e,i,n,r,d,u,o,a,s];if(c&&function(t,e){var i=t[1],n=e[1],r=i|n,o=r<131,a=n==Ke&&8==i||n==Ke&&256==i&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==i;if(!o&&!a)return t;1&n&&(t[2]=e[2],r|=1&i?0:4);var s=e[3];if(s){var l=t[3];t[3]=l?oe(l,s,e[4]):s,t[4]=l?Ve(t[3],Ze):e[4]}(s=e[5])&&(l=t[5],t[5]=l?se(l,s,e[6]):s,t[6]=l?Ve(t[5],Ze):e[6]),(s=e[7])&&(t[7]=s),n&Ke&&(t[8]=null==t[8]?e[8]:Qe(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(g,c),t=g[0],e=g[1],i=g[2],n=g[3],r=g[4],!(s=g[9]=void 0===g[9]?l?0:t.length:Je(g[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)p=8==e||16==e?function(t,e,i){var n=ie(t);return function r(){for(var o=arguments.length,a=Array(o),s=o,l=Be(r);s--;)a[s]=arguments[s];var h=o<3&&a[0]!==l&&a[o-1]!==l?[]:Ve(a,l);return(o-=h.length)<i?Ne(t,e,Ge,r.placeholder,void 0,a,h,void 0,void 0,i-o):ne(this&&this!==it&&this instanceof r?n:t,this,a)}}(t,e,s):32!=e&&33!=e||r.length?Ge.apply(void 0,g):function(t,e,i,n){var r=1&e,o=ie(t);return function e(){for(var a=-1,s=arguments.length,l=-1,h=n.length,d=Array(h+s),u=this&&this!==it&&this instanceof e?o:t;++l<h;)d[l]=n[l];for(;s--;)d[l++]=arguments[++a];return ne(u,r?i:this,d)}}(t,e,i,n);else var p=function(t,e,i){var n=1&e,r=ie(t);return function e(){return(this&&this!==it&&this instanceof e?r:t).apply(n?i:this,arguments)}}(t,e,i);return De((c?Qt:Ce)(p,g),t,e)}function ei(t,e,i){return e=i?void 0:e,ti(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function ii(t,e,i){"__proto__"==e&&Te?Te(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function ni(t,e){return t===e||t!=t&&e!=e}var ri=Object.prototype.hasOwnProperty;function oi(t,e,i){var n=t[e];ri.call(t,e)&&ni(n,i)&&(void 0!==i||e in t)||ii(t,e,i)}function ai(t,e,i,n){var r=!i;i||(i={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=n?n(i[s],t[s],s,i,t):void 0;void 0===l&&(l=t[s]),r?ii(i,s,l):oi(i,s,l)}return i}var si=Math.max;function li(t,e,i){return e=si(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=si(n.length-e,0),a=Array(o);++r<o;)a[r]=n[e+r];r=-1;for(var s=Array(e+1);++r<e;)s[r]=n[r];return s[e]=i(a),ne(t,this,s)}}function hi(t,e){return je(li(t,e,Rt),t+"")}function di(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function ui(t){return null!=t&&di(t.length)&&!zt(t)}function ci(t,e,i){if(!Ct(i))return!1;var n=typeof e;return!!("number"==n?ui(i)&&We(e,i.length):"string"==n&&e in i)&&ni(i[e],t)}function gi(t){return hi((function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,a&&ci(i[0],i[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var s=i[n];s&&t(e,s,n,o)}return e}))}var pi=Object.prototype;function fi(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||pi)}function wi(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function mi(t){return ut(t)&&"[object Arguments]"==dt(t)}var _i=Object.prototype,ki=_i.hasOwnProperty,bi=_i.propertyIsEnumerable,vi=mi(function(){return arguments}())?mi:function(t){return ut(t)&&ki.call(t,"callee")&&!bi.call(t,"callee")};const yi=vi;function xi(){return!1}var Si="object"==typeof e&&e&&!e.nodeType&&e,Ci=Si&&"object"==typeof i&&i&&!i.nodeType&&i,Ei=Ci&&Ci.exports===Si?it.Buffer:void 0;const Ii=(Ei?Ei.isBuffer:void 0)||xi;var Ai={};function Yi(t){return function(e){return t(e)}}Ai["[object Float32Array]"]=Ai["[object Float64Array]"]=Ai["[object Int8Array]"]=Ai["[object Int16Array]"]=Ai["[object Int32Array]"]=Ai["[object Uint8Array]"]=Ai["[object Uint8ClampedArray]"]=Ai["[object Uint16Array]"]=Ai["[object Uint32Array]"]=!0,Ai["[object Arguments]"]=Ai["[object Array]"]=Ai["[object ArrayBuffer]"]=Ai["[object Boolean]"]=Ai["[object DataView]"]=Ai["[object Date]"]=Ai["[object Error]"]=Ai["[object Function]"]=Ai["[object Map]"]=Ai["[object Number]"]=Ai["[object Object]"]=Ai["[object RegExp]"]=Ai["[object Set]"]=Ai["[object String]"]=Ai["[object WeakMap]"]=!1;var Xi="object"==typeof e&&e&&!e.nodeType&&e,Ti=Xi&&"object"==typeof i&&i&&!i.nodeType&&i,Li=Ti&&Ti.exports===Xi&&tt.process;const ji=function(){try{var t=Ti&&Ti.require&&Ti.require("util").types;return t||Li&&Li.binding&&Li.binding("util")}catch(F_){}}();var Ri=ji&&ji.isTypedArray,zi=Ri?Yi(Ri):function(t){return ut(t)&&di(t.length)&&!!Ai[dt(t)]};const Pi=zi;var Oi=Object.prototype.hasOwnProperty;function qi(t,e){var i=ft(t),n=!i&&yi(t),r=!i&&!n&&Ii(t),o=!i&&!n&&!r&&Pi(t),a=i||n||r||o,s=a?wi(t.length,String):[],l=s.length;for(var h in t)!e&&!Oi.call(t,h)||a&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||We(h,l))||s.push(h);return s}function Mi(t,e){return function(i){return t(e(i))}}const Di=Mi(Object.keys,Object);var Ni=Object.prototype.hasOwnProperty;function Bi(t){if(!fi(t))return Di(t);var e=[];for(var i in Object(t))Ni.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Fi(t){return ui(t)?qi(t):Bi(t)}var Wi=Object.prototype.hasOwnProperty,Hi=gi((function(t,e){if(fi(e)||ui(e))ai(e,Fi(e),t);else for(var i in e)Wi.call(e,i)&&oi(t,i,e[i])}));const Ui=Hi;var $i=Object.prototype.hasOwnProperty;function Vi(t){if(!Ct(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=fi(t),i=[];for(var n in t)("constructor"!=n||!e&&$i.call(t,n))&&i.push(n);return i}function Gi(t){return ui(t)?qi(t,!0):Vi(t)}var Zi=gi((function(t,e){ai(e,Gi(e),t)}));const Ki=Zi;var Qi=gi((function(t,e,i,n){ai(e,Gi(e),t,n)}));const Ji=Qi;var tn=gi((function(t,e,i,n){ai(e,Fi(e),t,n)}));const en=tn;var nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rn=/^\w*$/;function on(t,e){if(ft(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!ct(t))||(rn.test(t)||!nn.test(t)||null!=e&&t in Object(e))}const an=Vt(Object,"create");var sn=Object.prototype.hasOwnProperty;var ln=Object.prototype.hasOwnProperty;function hn(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function dn(t,e){for(var i=t.length;i--;)if(ni(t[i][0],e))return i;return-1}hn.prototype.clear=function(){this.__data__=an?an(null):{},this.size=0},hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},hn.prototype.get=function(t){var e=this.__data__;if(an){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return sn.call(e,t)?e[t]:void 0},hn.prototype.has=function(t){var e=this.__data__;return an?void 0!==e[t]:ln.call(e,t)},hn.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=an&&void 0===e?"__lodash_hash_undefined__":e,this};var un=Array.prototype.splice;function cn(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}cn.prototype.clear=function(){this.__data__=[],this.size=0},cn.prototype.delete=function(t){var e=this.__data__,i=dn(e,t);return!(i<0)&&(i==e.length-1?e.pop():un.call(e,i,1),--this.size,!0)},cn.prototype.get=function(t){var e=this.__data__,i=dn(e,t);return i<0?void 0:e[i][1]},cn.prototype.has=function(t){return dn(this.__data__,t)>-1},cn.prototype.set=function(t,e){var i=this.__data__,n=dn(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};const gn=Vt(it,"Map");function pn(t,e){var i=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?i["string"==typeof e?"string":"hash"]:i.map}function fn(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}fn.prototype.clear=function(){this.size=0,this.__data__={hash:new hn,map:new(gn||cn),string:new hn}},fn.prototype.delete=function(t){var e=pn(this,t).delete(t);return this.size-=e?1:0,e},fn.prototype.get=function(t){return pn(this,t).get(t)},fn.prototype.has=function(t){return pn(this,t).has(t)},fn.prototype.set=function(t,e){var i=pn(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};function wn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,n);return i.cache=o.set(r,a)||o,a};return i.cache=new(wn.Cache||fn),i}wn.Cache=fn;var mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_n=/\\(\\)?/g,kn=function(t){var e=wn(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(mn,(function(t,i,n,r){e.push(n?r.replace(_n,"$1"):i||t)})),e}));const bn=kn;function vn(t){return null==t?"":_t(t)}function yn(t,e){return ft(t)?t:on(t,e)?[t]:bn(vn(t))}function xn(t){if("string"==typeof t||ct(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function Sn(t,e){for(var i=0,n=(e=yn(e,t)).length;null!=t&&i<n;)t=t[xn(e[i++])];return i&&i==n?t:void 0}function Cn(t,e,i){var n=null==t?void 0:Sn(t,e);return void 0===n?i:n}function En(t,e){for(var i=-1,n=e.length,r=Array(n),o=null==t;++i<n;)r[i]=o?void 0:Cn(t,e[i]);return r}function In(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}var An=nt?nt.isConcatSpreadable:void 0;function Yn(t){return ft(t)||yi(t)||!!(An&&t&&t[An])}function Xn(t,e,i,n,r){var o=-1,a=t.length;for(i||(i=Yn),r||(r=[]);++o<a;){var s=t[o];e>0&&i(s)?e>1?Xn(s,e-1,i,n,r):In(r,s):n||(r[r.length]=s)}return r}function Tn(t){return(null==t?0:t.length)?Xn(t,1):[]}function Ln(t){return je(li(t,void 0,Tn),t+"")}const jn=Ln(En);const Rn=Mi(Object.getPrototypeOf,Object);var zn=Function.prototype,Pn=Object.prototype,On=zn.toString,qn=Pn.hasOwnProperty,Mn=On.call(Object);function Dn(t){if(!ut(t)||"[object Object]"!=dt(t))return!1;var e=Rn(t);if(null===e)return!0;var i=qn.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&On.call(i)==Mn}function Nn(t){if(!ut(t))return!1;var e=dt(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Dn(t)}var Bn=hi((function(t,e){try{return ne(t,void 0,e)}catch(F_){return Nn(F_)?F_:new Error(F_)}}));const Fn=Bn;function Wn(t,e){var i;if("function"!=typeof e)throw new TypeError("Expected a function");return t=jt(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=void 0),i}}var Hn=hi((function(t,e,i){var n=1;if(i.length){var r=Ve(i,Be(Hn));n|=32}return ti(t,n,e,i,r)}));Hn.placeholder={};const Un=Hn;var $n=Ln((function(t,e){return Re(e,(function(e){e=xn(e),ii(t,e,Un(t[e],t))})),t}));const Vn=$n;var Gn=hi((function(t,e,i){var n=3;if(i.length){var r=Ve(i,Be(Gn));n|=32}return ti(e,n,t,i,r)}));Gn.placeholder={};const Zn=Gn;function Kn(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Array(r);++n<r;)o[n]=t[n+e];return o}function Qn(t,e,i){var n=t.length;return i=void 0===i?n:i,!e&&i>=n?t:Kn(t,e,i)}var Jn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function tr(t){return Jn.test(t)}var er="[\\ud800-\\udfff]",ir="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nr="\\ud83c[\\udffb-\\udfff]",rr="[^\\ud800-\\udfff]",or="(?:\\ud83c[\\udde6-\\uddff]){2}",ar="[\\ud800-\\udbff][\\udc00-\\udfff]",sr="(?:"+ir+"|"+nr+")"+"?",lr="[\\ufe0e\\ufe0f]?",hr=lr+sr+("(?:\\u200d(?:"+[rr,or,ar].join("|")+")"+lr+sr+")*"),dr="(?:"+[rr+ir+"?",ir,or,ar,er].join("|")+")",ur=RegExp(nr+"(?="+nr+")|"+dr+hr,"g");function cr(t){return tr(t)?function(t){return t.match(ur)||[]}(t):function(t){return t.split("")}(t)}function gr(t){return function(e){var i=tr(e=vn(e))?cr(e):void 0,n=i?i[0]:e.charAt(0),r=i?Qn(i,1).join(""):e.slice(1);return n[t]()+r}}const pr=gr("toUpperCase");function fr(t){return pr(vn(t).toLowerCase())}function wr(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function mr(t){return function(e){return null==t?void 0:t[e]}}const _r=mr({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});var kr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,br=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function vr(t){return(t=vn(t))&&t.replace(kr,_r).replace(br,"")}var yr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var xr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Sr="\\u2700-\\u27bf",Cr="a-z\\xdf-\\xf6\\xf8-\\xff",Er="A-Z\\xc0-\\xd6\\xd8-\\xde",Ir="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ar="["+Ir+"]",Yr="\\d+",Xr="[\\u2700-\\u27bf]",Tr="["+Cr+"]",Lr="[^\\ud800-\\udfff"+Ir+Yr+Sr+Cr+Er+"]",jr="(?:\\ud83c[\\udde6-\\uddff]){2}",Rr="[\\ud800-\\udbff][\\udc00-\\udfff]",zr="["+Er+"]",Pr="(?:"+Tr+"|"+Lr+")",Or="(?:"+zr+"|"+Lr+")",qr="(?:['’](?:d|ll|m|re|s|t|ve))?",Mr="(?:['’](?:D|LL|M|RE|S|T|VE))?",Dr="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Nr="[\\ufe0e\\ufe0f]?",Br=Nr+Dr+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",jr,Rr].join("|")+")"+Nr+Dr+")*"),Fr="(?:"+[Xr,jr,Rr].join("|")+")"+Br,Wr=RegExp([zr+"?"+Tr+"+"+qr+"(?="+[Ar,zr,"$"].join("|")+")",Or+"+"+Mr+"(?="+[Ar,zr+Pr,"$"].join("|")+")",zr+"?"+Pr+"+"+qr,zr+"+"+Mr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yr,Fr].join("|"),"g");function Hr(t,e,i){return t=vn(t),void 0===(e=i?void 0:e)?function(t){return xr.test(t)}(t)?function(t){return t.match(Wr)||[]}(t):function(t){return t.match(yr)||[]}(t):t.match(e)||[]}var Ur=RegExp("['’]","g");function $r(t){return function(e){return wr(Hr(vr(e).replace(Ur,"")),t,"")}}var Vr=$r((function(t,e,i){return e=e.toLowerCase(),t+(i?fr(e):e)}));const Gr=Vr;var Zr=it.isFinite,Kr=Math.min;function Qr(t){var e=Math[t];return function(t,i){if(t=Xt(t),(i=null==i?0:Kr(jt(i),292))&&Zr(t)){var n=(vn(t)+"e").split("e");return+((n=(vn(e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}const Jr=Qr("ceil");function to(t){var e=ve(t);return e.__chain__=!0,e}var eo=Math.ceil,io=Math.max;function no(t,e,i){return t==t&&(void 0!==i&&(t=t<=i?t:i),void 0!==e&&(t=t>=e?t:e)),t}function ro(t){var e=this.__data__=new cn(t);this.size=e.size}function oo(t,e){return t&&ai(e,Fi(e),t)}ro.prototype.clear=function(){this.__data__=new cn,this.size=0},ro.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},ro.prototype.get=function(t){return this.__data__.get(t)},ro.prototype.has=function(t){return this.__data__.has(t)},ro.prototype.set=function(t,e){var i=this.__data__;if(i instanceof cn){var n=i.__data__;if(!gn||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new fn(n)}return i.set(t,e),this.size=i.size,this};var ao="object"==typeof e&&e&&!e.nodeType&&e,so=ao&&"object"==typeof i&&i&&!i.nodeType&&i,lo=so&&so.exports===ao?it.Buffer:void 0,ho=lo?lo.allocUnsafe:void 0;function uo(t,e){if(e)return t.slice();var i=t.length,n=ho?ho(i):new t.constructor(i);return t.copy(n),n}function co(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var a=t[i];e(a,i,t)&&(o[r++]=a)}return o}function go(){return[]}var po=Object.prototype.propertyIsEnumerable,fo=Object.getOwnPropertySymbols,wo=fo?function(t){return null==t?[]:(t=Object(t),co(fo(t),(function(e){return po.call(t,e)})))}:go;const mo=wo;var _o=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)In(e,mo(t)),t=Rn(t);return e}:go;const ko=_o;function bo(t,e,i){var n=e(t);return ft(t)?n:In(n,i(t))}function vo(t){return bo(t,Fi,mo)}function yo(t){return bo(t,Gi,ko)}const xo=Vt(it,"DataView");const So=Vt(it,"Promise");const Co=Vt(it,"Set");var Eo="[object Map]",Io="[object Promise]",Ao="[object Set]",Yo="[object WeakMap]",Xo="[object DataView]",To=Dt(xo),Lo=Dt(gn),jo=Dt(So),Ro=Dt(Co),zo=Dt(Gt),Po=dt;(xo&&Po(new xo(new ArrayBuffer(1)))!=Xo||gn&&Po(new gn)!=Eo||So&&Po(So.resolve())!=Io||Co&&Po(new Co)!=Ao||Gt&&Po(new Gt)!=Yo)&&(Po=function(t){var e=dt(t),i="[object Object]"==e?t.constructor:void 0,n=i?Dt(i):"";if(n)switch(n){case To:return Xo;case Lo:return Eo;case jo:return Io;case Ro:return Ao;case zo:return Yo}return e});const Oo=Po;var qo=Object.prototype.hasOwnProperty;const Mo=it.Uint8Array;function Do(t){var e=new t.constructor(t.byteLength);return new Mo(e).set(new Mo(t)),e}var No=/\w*$/;var Bo=nt?nt.prototype:void 0,Fo=Bo?Bo.valueOf:void 0;function Wo(t,e){var i=e?Do(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Ho(t,e,i){var n,r=t.constructor;switch(e){case"[object ArrayBuffer]":return Do(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var i=e?Do(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wo(t,i);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,No.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return n=t,Fo?Object(Fo.call(n)):{}}}function Uo(t){return"function"!=typeof t.constructor||fi(t)?{}:ee(Rn(t))}var $o=ji&&ji.isMap,Vo=$o?Yi($o):function(t){return ut(t)&&"[object Map]"==Oo(t)};const Go=Vo;var Zo=ji&&ji.isSet,Ko=Zo?Yi(Zo):function(t){return ut(t)&&"[object Set]"==Oo(t)};const Qo=Ko;var Jo="[object Arguments]",ta="[object Function]",ea="[object Object]",ia={};function na(t,e,i,n,r,o){var a,s=1&e,l=2&e,h=4&e;if(i&&(a=r?i(t,n,r,o):i(t)),void 0!==a)return a;if(!Ct(t))return t;var d=ft(t);if(d){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&qo.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!s)return _e(t,a)}else{var u=Oo(t),c=u==ta||"[object GeneratorFunction]"==u;if(Ii(t))return uo(t,s);if(u==ea||u==Jo||c&&!r){if(a=l||c?{}:Uo(t),!s)return l?function(t,e){return ai(t,ko(t),e)}(t,function(t,e){return t&&ai(e,Gi(e),t)}(a,t)):function(t,e){return ai(t,mo(t),e)}(t,oo(a,t))}else{if(!ia[u])return r?t:{};a=Ho(t,u,s)}}o||(o=new ro);var g=o.get(t);if(g)return g;o.set(t,a),Qo(t)?t.forEach((function(n){a.add(na(n,e,i,n,t,o))})):Go(t)&&t.forEach((function(n,r){a.set(r,na(n,e,i,r,t,o))}));var p=d?void 0:(h?l?yo:vo:l?Gi:Fi)(t);return Re(p||t,(function(n,r){p&&(n=t[r=n]),oi(a,r,na(n,e,i,r,t,o))})),a}ia[Jo]=ia["[object Array]"]=ia["[object ArrayBuffer]"]=ia["[object DataView]"]=ia["[object Boolean]"]=ia["[object Date]"]=ia["[object Float32Array]"]=ia["[object Float64Array]"]=ia["[object Int8Array]"]=ia["[object Int16Array]"]=ia["[object Int32Array]"]=ia["[object Map]"]=ia["[object Number]"]=ia[ea]=ia["[object RegExp]"]=ia["[object Set]"]=ia["[object String]"]=ia["[object Symbol]"]=ia["[object Uint8Array]"]=ia["[object Uint8ClampedArray]"]=ia["[object Uint16Array]"]=ia["[object Uint32Array]"]=!0,ia["[object Error]"]=ia[ta]=ia["[object WeakMap]"]=!1;function ra(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new fn;++e<i;)this.add(t[e])}function oa(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function aa(t,e){return t.has(e)}ra.prototype.add=ra.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ra.prototype.has=function(t){return this.__data__.has(t)};function sa(t,e,i,n,r,o){var a=1&i,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var u=-1,c=!0,g=2&i?new ra:void 0;for(o.set(t,e),o.set(e,t);++u<s;){var p=t[u],f=e[u];if(n)var w=a?n(f,p,u,e,t,o):n(p,f,u,t,e,o);if(void 0!==w){if(w)continue;c=!1;break}if(g){if(!oa(e,(function(t,e){if(!aa(g,e)&&(p===t||r(p,t,i,n,o)))return g.push(e)}))){c=!1;break}}else if(p!==f&&!r(p,f,i,n,o)){c=!1;break}}return o.delete(t),o.delete(e),c}function la(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function ha(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var da=nt?nt.prototype:void 0,ua=da?da.valueOf:void 0;var ca=Object.prototype.hasOwnProperty;var ga="[object Arguments]",pa="[object Array]",fa="[object Object]",wa=Object.prototype.hasOwnProperty;function ma(t,e,i,n,r,o){var a=ft(t),s=ft(e),l=a?pa:Oo(t),h=s?pa:Oo(e),d=(l=l==ga?fa:l)==fa,u=(h=h==ga?fa:h)==fa,c=l==h;if(c&&Ii(t)){if(!Ii(e))return!1;a=!0,d=!1}if(c&&!d)return o||(o=new ro),a||Pi(t)?sa(t,e,i,n,r,o):function(t,e,i,n,r,o,a){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Mo(t),new Mo(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ni(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=la;case"[object Set]":var l=1&n;if(s||(s=ha),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;n|=2,a.set(t,e);var d=sa(s(t),s(e),n,r,o,a);return a.delete(t),d;case"[object Symbol]":if(ua)return ua.call(t)==ua.call(e)}return!1}(t,e,l,i,n,r,o);if(!(1&i)){var g=d&&wa.call(t,"__wrapped__"),p=u&&wa.call(e,"__wrapped__");if(g||p){var f=g?t.value():t,w=p?e.value():e;return o||(o=new ro),r(f,w,i,n,o)}}return!!c&&(o||(o=new ro),function(t,e,i,n,r,o){var a=1&i,s=vo(t),l=s.length;if(l!=vo(e).length&&!a)return!1;for(var h=l;h--;){var d=s[h];if(!(a?d in e:ca.call(e,d)))return!1}var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var g=!0;o.set(t,e),o.set(e,t);for(var p=a;++h<l;){var f=t[d=s[h]],w=e[d];if(n)var m=a?n(w,f,d,e,t,o):n(f,w,d,t,e,o);if(!(void 0===m?f===w||r(f,w,i,n,o):m)){g=!1;break}p||(p="constructor"==d)}if(g&&!p){var _=t.constructor,k=e.constructor;_==k||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof k&&k instanceof k||(g=!1)}return o.delete(t),o.delete(e),g}(t,e,i,n,r,o))}function _a(t,e,i,n,r){return t===e||(null==t||null==e||!ut(t)&&!ut(e)?t!=t&&e!=e:ma(t,e,i,n,_a,r))}function ka(t,e,i,n){var r=i.length,o=r,a=!n;if(null==t)return!o;for(t=Object(t);r--;){var s=i[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){var l=(s=i[r])[0],h=t[l],d=s[1];if(a&&s[2]){if(void 0===h&&!(l in t))return!1}else{var u=new ro;if(n)var c=n(h,d,l,t,e,u);if(!(void 0===c?_a(d,h,3,n,u):c))return!1}}return!0}function ba(t){return t==t&&!Ct(t)}function va(t){for(var e=Fi(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,ba(r)]}return e}function ya(t,e){return function(i){return null!=i&&(i[t]===e&&(void 0!==e||t in Object(i)))}}function xa(t){var e=va(t);return 1==e.length&&e[0][2]?ya(e[0][0],e[0][1]):function(i){return i===t||ka(i,t,e)}}function Sa(t,e){return null!=t&&e in Object(t)}function Ca(t,e,i){for(var n=-1,r=(e=yn(e,t)).length,o=!1;++n<r;){var a=xn(e[n]);if(!(o=null!=t&&i(t,a)))break;t=t[a]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&di(r)&&We(a,r)&&(ft(t)||yi(t))}function Ea(t,e){return null!=t&&Ca(t,e,Sa)}function Ia(t,e){return on(t)&&ba(e)?ya(xn(t),e):function(i){var n=Cn(i,t);return void 0===n&&n===e?Ea(i,t):_a(e,n,3)}}function Aa(t){return function(e){return null==e?void 0:e[t]}}function Ya(t){return on(t)?Aa(xn(t)):function(t){return function(e){return Sn(e,t)}}(t)}function Xa(t){return"function"==typeof t?t:null==t?Rt:"object"==typeof t?ft(t)?Ia(t[0],t[1]):xa(t):Ya(t)}function Ta(t,e,i){var n=i.length;if(null==t)return!n;for(t=Object(t);n--;){var r=i[n],o=e[r],a=t[r];if(void 0===a&&!(r in t)||!o(a))return!1}return!0}function La(t,e,i,n){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(n,a,i(a),t)}return n}function ja(t){return function(e,i,n){for(var r=-1,o=Object(e),a=n(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===i(o[l],l,o))break}return e}}const Ra=ja();function za(t,e){return t&&Ra(t,e,Fi)}function Pa(t,e){return function(i,n){if(null==i)return i;if(!ui(i))return t(i,n);for(var r=i.length,o=e?r:-1,a=Object(i);(e?o--:++o<r)&&!1!==n(a[o],o,a););return i}}const Oa=Pa(za);function qa(t,e,i,n){return Oa(t,(function(t,r,o){e(n,t,i(t),o)})),n}function Ma(t,e){return function(i,n){var r=ft(i)?La:qa,o=e?e():{};return r(i,t,Xa(n),o)}}var Da=Object.prototype.hasOwnProperty,Na=Ma((function(t,e,i){Da.call(t,i)?++t[i]:ii(t,i,1)}));const Ba=Na;function Fa(t,e,i){var n=ti(t,8,void 0,void 0,void 0,void 0,void 0,e=i?void 0:e);return n.placeholder=Fa.placeholder,n}Fa.placeholder={};function Wa(t,e,i){var n=ti(t,16,void 0,void 0,void 0,void 0,void 0,e=i?void 0:e);return n.placeholder=Wa.placeholder,n}Wa.placeholder={};const Ha=function(){return it.Date.now()};var Ua=Math.max,$a=Math.min;function Va(t,e,i){var n,r,o,a,s,l,h=0,d=!1,u=!1,c=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var i=n,o=r;return n=r=void 0,h=e,a=t.apply(o,i)}function p(t){return h=t,s=setTimeout(w,e),d?g(t):a}function f(t){var i=t-l;return void 0===l||i>=e||i<0||u&&t-h>=o}function w(){var t=Ha();if(f(t))return m(t);s=setTimeout(w,function(t){var i=e-(t-l);return u?$a(i,o-(t-h)):i}(t))}function m(t){return s=void 0,c&&n?g(t):(n=r=void 0,a)}function _(){var t=Ha(),i=f(t);if(n=arguments,r=this,l=t,i){if(void 0===s)return p(l);if(u)return clearTimeout(s),s=setTimeout(w,e),g(l)}return void 0===s&&(s=setTimeout(w,e)),a}return e=Xt(e)||0,Ct(i)&&(d=!!i.leading,o=(u="maxWait"in i)?Ua(Xt(i.maxWait)||0,e):o,c="trailing"in i?!!i.trailing:c),_.cancel=function(){void 0!==s&&clearTimeout(s),h=0,n=l=r=s=void 0},_.flush=function(){return void 0===s?a:m(Ha())},_}var Ga=Object.prototype,Za=Ga.hasOwnProperty,Ka=hi((function(t,e){t=Object(t);var i=-1,n=e.length,r=n>2?e[2]:void 0;for(r&&ci(e[0],e[1],r)&&(n=1);++i<n;)for(var o=e[i],a=Gi(o),s=-1,l=a.length;++s<l;){var h=a[s],d=t[h];(void 0===d||ni(d,Ga[h])&&!Za.call(t,h))&&(t[h]=o[h])}return t}));const Qa=Ka;function Ja(t,e,i){(void 0!==i&&!ni(t[e],i)||void 0===i&&!(e in t))&&ii(t,e,i)}function ts(t){return ut(t)&&ui(t)}function es(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function is(t){return ai(t,Gi(t))}function ns(t,e,i,n,r){t!==e&&Ra(e,(function(o,a){if(r||(r=new ro),Ct(o))!function(t,e,i,n,r,o,a){var s=es(t,i),l=es(e,i),h=a.get(l);if(h)Ja(t,i,h);else{var d=o?o(s,l,i+"",t,e,a):void 0,u=void 0===d;if(u){var c=ft(l),g=!c&&Ii(l),p=!c&&!g&&Pi(l);d=l,c||g||p?ft(s)?d=s:ts(s)?d=_e(s):g?(u=!1,d=uo(l,!0)):p?(u=!1,d=Wo(l,!0)):d=[]:Dn(l)||yi(l)?(d=s,yi(s)?d=is(s):Ct(s)&&!zt(s)||(d=Uo(l))):u=!1}u&&(a.set(l,d),r(d,l,n,o,a),a.delete(l)),Ja(t,i,d)}}(t,e,a,i,ns,n,r);else{var s=n?n(es(t,a),o,a+"",t,e,r):void 0;void 0===s&&(s=o),Ja(t,a,s)}}),Gi)}function rs(t,e,i,n,r,o){return Ct(t)&&Ct(e)&&(o.set(e,t),ns(t,e,void 0,rs,o),o.delete(e)),t}var os=gi((function(t,e,i,n){ns(t,e,i,n)}));const as=os;const ss=hi((function(t){return t.push(void 0,rs),ne(as,void 0,t)}));function ls(t,e,i){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout((function(){t.apply(void 0,i)}),e)}var hs=hi((function(t,e){return ls(t,1,e)}));const ds=hs;var us=hi((function(t,e,i){return ls(t,Xt(e)||0,i)}));const cs=us;function gs(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}function ps(t,e,i,n){var r=-1,o=qe,a=!0,s=t.length,l=[],h=e.length;if(!s)return l;i&&(e=pt(e,Yi(i))),n?(o=gs,a=!1):e.length>=200&&(o=aa,a=!1,e=new ra(e));t:for(;++r<s;){var d=t[r],u=null==i?d:i(d);if(d=n||0!==d?d:0,a&&u==u){for(var c=h;c--;)if(e[c]===u)continue t;l.push(d)}else o(e,u,n)||l.push(d)}return l}var fs=hi((function(t,e){return ts(t)?ps(t,Xn(e,1,ts,!0)):[]}));const ws=fs;function ms(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var _s=hi((function(t,e){var i=ms(e);return ts(i)&&(i=void 0),ts(t)?ps(t,Xn(e,1,ts,!0),Xa(i)):[]}));const ks=_s;var bs=hi((function(t,e){var i=ms(e);return ts(i)&&(i=void 0),ts(t)?ps(t,Xn(e,1,ts,!0),void 0,i):[]}));const vs=bs;const ys=kt((function(t,e){return t/e}),1);function xs(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?Kn(t,n?0:o,n?o+1:r):Kn(t,n?o+1:0,n?r:o)}function Ss(t){return"function"==typeof t?t:Rt}function Cs(t,e){return(ft(t)?Re:Oa)(t,Ss(e))}function Es(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}const Is=ja(!0);function As(t,e){return t&&Is(t,e,Fi)}const Ys=Pa(As,!0);function Xs(t,e){return(ft(t)?Es:Ys)(t,Ss(e))}function Ts(t){return function(e){var i=Oo(e);return"[object Map]"==i?la(e):"[object Set]"==i?function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}(e):function(t,e){return pt(e,(function(e){return[e,t[e]]}))}(e,t(e))}}const Ls=Ts(Fi);const js=Ts(Gi);const Rs=mr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});var zs=/[&<>"']/g,Ps=RegExp(zs.source);function Os(t){return(t=vn(t))&&Ps.test(t)?t.replace(zs,Rs):t}var qs=/[\\^$.*+?()[\]{}|]/g,Ms=RegExp(qs.source);function Ds(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function Ns(t,e){var i=!0;return Oa(t,(function(t,n,r){return i=!!e(t,n,r)})),i}function Bs(t){return t?no(jt(t),0,4294967295):0}function Fs(t,e){var i=[];return Oa(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function Ws(t){return function(e,i,n){var r=Object(e);if(!ui(e)){var o=Xa(i);e=Fi(e),i=function(t){return o(r[t],t,r)}}var a=t(e,i,n);return a>-1?r[o?e[a]:a]:void 0}}var Hs=Math.max;function Us(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:jt(i);return r<0&&(r=Hs(n+r,0)),ze(t,Xa(e),r)}const $s=Ws(Us);function Vs(t,e,i){var n;return i(t,(function(t,i,r){if(e(t,i,r))return n=i,!1})),n}var Gs=Math.max,Zs=Math.min;function Ks(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n-1;return void 0!==i&&(r=jt(i),r=i<0?Gs(n+r,0):Zs(r,n-1)),ze(t,Xa(e),r,!0)}const Qs=Ws(Ks);function Js(t){return t&&t.length?t[0]:void 0}function tl(t,e){var i=-1,n=ui(t)?Array(t.length):[];return Oa(t,(function(t,r,o){n[++i]=e(t,r,o)})),n}function el(t,e){return(ft(t)?pt:tl)(t,Xa(e))}const il=Qr("floor");function nl(t){return Ln((function(e){var i=e.length,n=i,r=me.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if("function"!=typeof o)throw new TypeError("Expected a function");if(r&&!a&&"wrapper"==we(o))var a=new me([],!0)}for(n=a?n:i;++n<i;){var s=we(o=e[n]),l="wrapper"==s?ge(o):void 0;a=l&&ye(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[we(l[0])].apply(a,l[3]):1==o.length&&ye(o)?a[s]():a.thru(o)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&ft(n))return a.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}const rl=nl();const ol=nl(!0);function al(t,e){return co(e,(function(e){return zt(t[e])}))}var sl=Object.prototype.hasOwnProperty,ll=Ma((function(t,e,i){sl.call(t,i)?t[i].push(e):ii(t,i,[e])}));const hl=ll;function dl(t,e){return t>e}function ul(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=Xt(e),i=Xt(i)),t(e,i)}}const cl=ul(dl);var gl=ul((function(t,e){return t>=e}));const pl=gl;var fl=Object.prototype.hasOwnProperty;function wl(t,e){return null!=t&&fl.call(t,e)}var ml=Math.max,_l=Math.min;function kl(t){return"string"==typeof t||!ft(t)&&ut(t)&&"[object String]"==dt(t)}function bl(t,e){return pt(e,(function(e){return t[e]}))}function vl(t){return null==t?[]:bl(t,Fi(t))}var yl=Math.max;var xl=Math.max;var Sl=Math.min;function Cl(t,e,i){for(var n=i?gs:qe,r=t[0].length,o=t.length,a=o,s=Array(o),l=1/0,h=[];a--;){var d=t[a];a&&e&&(d=pt(d,Yi(e))),l=Sl(d.length,l),s[a]=!i&&(e||r>=120&&d.length>=120)?new ra(a&&d):void 0}d=t[0];var u=-1,c=s[0];t:for(;++u<r&&h.length<l;){var g=d[u],p=e?e(g):g;if(g=i||0!==g?g:0,!(c?aa(c,p):n(h,p,i))){for(a=o;--a;){var f=s[a];if(!(f?aa(f,p):n(t[a],p,i)))continue t}c&&c.push(p),h.push(g)}}return h}function El(t){return ts(t)?t:[]}const Il=hi((function(t){var e=pt(t,El);return e.length&&e[0]===t[0]?Cl(e):[]}));var Al=hi((function(t){var e=ms(t),i=pt(t,El);return e===ms(i)?e=void 0:i.pop(),i.length&&i[0]===t[0]?Cl(i,Xa(e)):[]}));const Yl=Al;const Xl=hi((function(t){var e=ms(t),i=pt(t,El);return(e="function"==typeof e?e:void 0)&&i.pop(),i.length&&i[0]===t[0]?Cl(i,void 0,e):[]}));function Tl(t,e){return function(i,n){return function(t,e,i,n){return za(t,(function(t,r,o){e(n,i(t),r,o)})),n}(i,t,e(n),{})}}var Ll=Object.prototype.toString,jl=Tl((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ll.call(e)),t[e]=i}),Ye(Rt));const Rl=jl;var zl=Object.prototype,Pl=zl.hasOwnProperty,Ol=zl.toString,ql=Tl((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ol.call(e)),Pl.call(t,e)?t[e].push(i):t[e]=[i]}),Xa);const Ml=ql;function Dl(t,e){return e.length<2?t:Sn(t,Kn(e,0,-1))}function Nl(t,e,i){var n=null==(t=Dl(t,e=yn(e,t)))?t:t[xn(ms(e))];return null==n?void 0:ne(n,t,i)}const Bl=hi(Nl);var Fl=hi((function(t,e,i){var n=-1,r="function"==typeof e,o=ui(t)?Array(t.length):[];return Oa(t,(function(t){o[++n]=r?ne(e,t,i):Nl(t,e,i)})),o}));const Wl=Fl;var Hl=ji&&ji.isArrayBuffer,Ul=Hl?Yi(Hl):function(t){return ut(t)&&"[object ArrayBuffer]"==dt(t)};const $l=Ul;var Vl=ji&&ji.isDate,Gl=Vl?Yi(Vl):function(t){return ut(t)&&"[object Date]"==dt(t)};const Zl=Gl;var Kl=Object.prototype.hasOwnProperty;var Ql=it.isFinite;function Jl(t){return"number"==typeof t&&t==jt(t)}function th(t){return"number"==typeof t||ut(t)&&"[object Number]"==dt(t)}const eh=Pt?zt:xi;var ih=ji&&ji.isRegExp,nh=ih?Yi(ih):function(t){return ut(t)&&"[object RegExp]"==dt(t)};const rh=nh;var oh=9007199254740991;var ah=Array.prototype.join;var sh=$r((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}));const lh=sh;var hh=Ma((function(t,e,i){ii(t,i,e)}));const dh=hh;var uh=Math.max,ch=Math.min;var gh=$r((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}));const ph=gh;const fh=gr("toLowerCase");function wh(t,e){return t<e}const mh=ul(wh);var _h=ul((function(t,e){return t<=e}));const kh=_h;function bh(t,e,i){for(var n=-1,r=t.length;++n<r;){var o=t[n],a=e(o);if(null!=a&&(void 0===s?a==a&&!ct(a):i(a,s)))var s=a,l=o}return l}function vh(t,e){for(var i,n=-1,r=t.length;++n<r;){var o=e(t[n]);void 0!==o&&(i=void 0===i?o:i+o)}return i}function yh(t,e){var i=null==t?0:t.length;return i?vh(t,e)/i:NaN}var xh=gi((function(t,e,i){ns(t,e,i)}));const Sh=xh;var Ch=hi((function(t,e){return function(i){return Nl(i,t,e)}}));const Eh=Ch;var Ih=hi((function(t,e){return function(i){return Nl(t,i,e)}}));const Ah=Ih;function Yh(t,e,i){var n=Fi(e),r=al(e,n),o=!(Ct(i)&&"chain"in i&&!i.chain),a=zt(t);return Re(r,(function(i){var n=e[i];t[i]=n,a&&(t.prototype[i]=function(){var e=this.__chain__;if(o||e){var i=t(this.__wrapped__),r=i.__actions__=_e(this.__actions__);return r.push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,In([this.value()],arguments))})})),t}const Xh=kt((function(t,e){return t*e}),1);function Th(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var Lh=nt?nt.iterator:void 0;function jh(t){if(!t)return[];if(ui(t))return kl(t)?cr(t):_e(t);if(Lh&&t[Lh])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[Lh]());var e=Oo(t);return("[object Map]"==e?la:"[object Set]"==e?ha:vl)(t)}function Rh(t,e){var i=t.length;if(i)return We(e+=e<0?i:0,i)?t[e]:void 0}function zh(t,e){return null==(t=Dl(t,e=yn(e,t)))||delete t[xn(ms(e))]}function Ph(t){return Dn(t)?void 0:t}var Oh=Ln((function(t,e){var i={};if(null==t)return i;var n=!1;e=pt(e,(function(e){return e=yn(e,t),n||(n=e.length>1),e})),ai(t,yo(t),i),n&&(i=na(i,7,Ph));for(var r=e.length;r--;)zh(i,e[r]);return i}));const qh=Oh;function Mh(t,e,i,n){if(!Ct(t))return t;for(var r=-1,o=(e=yn(e,t)).length,a=o-1,s=t;null!=s&&++r<o;){var l=xn(e[r]),h=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=a){var d=s[l];void 0===(h=n?n(d,l,s):void 0)&&(h=Ct(d)?d:We(e[r+1])?[]:{})}oi(s,l,h),s=s[l]}return t}function Dh(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var a=e[n],s=Sn(t,a);i(s,a)&&Mh(o,yn(a,t),s)}return o}function Nh(t,e){if(null==t)return{};var i=pt(yo(t),(function(t){return[t]}));return e=Xa(e),Dh(t,i,(function(t,i){return e(t,i[0])}))}function Bh(t,e){if(t!==e){var i=void 0!==t,n=null===t,r=t==t,o=ct(t),a=void 0!==e,s=null===e,l=e==e,h=ct(e);if(!s&&!h&&!o&&t>e||o&&a&&l&&!s&&!h||n&&a&&l||!i&&l||!r)return 1;if(!n&&!o&&!h&&t<e||h&&i&&r&&!n&&!o||s&&i&&r||!a&&r||!l)return-1}return 0}function Fh(t,e,i){e=e.length?pt(e,(function(t){return ft(t)?function(e){return Sn(e,1===t.length?t[0]:t)}:t})):[Rt];var n=-1;e=pt(e,Yi(Xa));var r=tl(t,(function(t,i,r){var o=pt(e,(function(e){return e(t)}));return{criteria:o,index:++n,value:t}}));return function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(r,(function(t,e){return function(t,e,i){for(var n=-1,r=t.criteria,o=e.criteria,a=r.length,s=i.length;++n<a;){var l=Bh(r[n],o[n]);if(l)return n>=s?l:l*("desc"==i[n]?-1:1)}return t.index-e.index}(t,e,i)}))}function Wh(t){return Ln((function(e){return e=pt(e,Yi(Xa)),hi((function(i){var n=this;return t(e,(function(t){return ne(t,n,i)}))}))}))}const Hh=Wh(pt);const Uh=hi;var $h=Math.min,Vh=Uh((function(t,e){var i=(e=1==e.length&&ft(e[0])?pt(e[0],Yi(Xa)):pt(Xn(e,1),Yi(Xa))).length;return hi((function(n){for(var r=-1,o=$h(n.length,i);++r<o;)n[r]=e[r].call(this,n[r]);return ne(t,this,n)}))}));const Gh=Vh;const Zh=Wh(Ds);const Kh=Wh(oa);var Qh=Math.floor;function Jh(t,e){var i="";if(!t||e<1||e>9007199254740991)return i;do{e%2&&(i+=t),(e=Qh(e/2))&&(t+=t)}while(e);return i}const td=Aa("length");var ed="[\\ud800-\\udfff]",id="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nd="\\ud83c[\\udffb-\\udfff]",rd="[^\\ud800-\\udfff]",od="(?:\\ud83c[\\udde6-\\uddff]){2}",ad="[\\ud800-\\udbff][\\udc00-\\udfff]",sd="(?:"+id+"|"+nd+")"+"?",ld="[\\ufe0e\\ufe0f]?",hd=ld+sd+("(?:\\u200d(?:"+[rd,od,ad].join("|")+")"+ld+sd+")*"),dd="(?:"+[rd+id+"?",id,od,ad,ed].join("|")+")",ud=RegExp(nd+"(?="+nd+")|"+dd+hd,"g");function cd(t){return tr(t)?function(t){for(var e=ud.lastIndex=0;ud.test(t);)++e;return e}(t):td(t)}var gd=Math.ceil;function pd(t,e){var i=(e=void 0===e?" ":_t(e)).length;if(i<2)return i?Jh(e,t):e;var n=Jh(e,gd(t/cd(e)));return tr(e)?Qn(cr(n),0,t).join(""):n.slice(0,t)}var fd=Math.ceil,wd=Math.floor;var md=/^\s+/,_d=it.parseInt;var kd=hi((function(t,e){return ti(t,32,void 0,e,Ve(e,Be(kd)))}));kd.placeholder={};const bd=kd;var vd=hi((function(t,e){return ti(t,64,void 0,e,Ve(e,Be(vd)))}));vd.placeholder={};const yd=vd;var xd=Ma((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]}));const Sd=xd;var Cd=Ln((function(t,e){return null==t?{}:function(t,e){return Dh(t,e,(function(e,i){return Ea(t,i)}))}(t,e)}));const Ed=Cd;function Id(t,e,i,n){for(var r=i-1,o=t.length;++r<o;)if(n(t[r],e))return r;return-1}var Ad=Array.prototype.splice;function Yd(t,e,i,n){var r=n?Id:Oe,o=-1,a=e.length,s=t;for(t===e&&(e=_e(e)),i&&(s=pt(t,Yi(i)));++o<a;)for(var l=0,h=e[o],d=i?i(h):h;(l=r(s,d,l,n))>-1;)s!==t&&Ad.call(s,l,1),Ad.call(t,l,1);return t}function Xd(t,e){return t&&t.length&&e&&e.length?Yd(t,e):t}const Td=hi(Xd);var Ld=Array.prototype.splice;function jd(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==o){var o=r;We(r)?Ld.call(t,r,1):zh(t,r)}}return t}var Rd=Ln((function(t,e){var i=null==t?0:t.length,n=En(t,e);return jd(t,pt(e,(function(t){return We(t,i)?+t:t})).sort(Bh)),n}));const zd=Rd;var Pd=Math.floor,Od=Math.random;function qd(t,e){return t+Pd(Od()*(e-t+1))}var Md=parseFloat,Dd=Math.min,Nd=Math.random;var Bd=Math.ceil,Fd=Math.max;function Wd(t){return function(e,i,n){return n&&"number"!=typeof n&&ci(e,i,n)&&(i=n=void 0),e=Lt(e),void 0===i?(i=e,e=0):i=Lt(i),function(t,e,i,n){for(var r=-1,o=Fd(Bd((e-t)/(i||1)),0),a=Array(o);o--;)a[n?o:++r]=t,t+=i;return a}(e,i,n=void 0===n?e<i?1:-1:Lt(n),t)}}const Hd=Wd();const Ud=Wd(!0);var $d=Ln((function(t,e){return ti(t,256,void 0,void 0,void 0,e)}));const Vd=$d;function Gd(t,e,i,n,r){return r(t,(function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)})),i}function Zd(t,e,i,n){var r=null==t?0:t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}var Kd=Array.prototype.reverse;function Qd(t){return null==t?t:Kd.call(t)}const Jd=Qr("round");function tu(t){var e=t.length;return e?t[qd(0,e-1)]:void 0}function eu(t){return tu(vl(t))}function iu(t,e){var i=-1,n=t.length,r=n-1;for(e=void 0===e?n:e;++i<e;){var o=qd(i,r),a=t[o];t[o]=t[i],t[i]=a}return t.length=e,t}function nu(t,e){return iu(_e(t),no(e,0,t.length))}function ru(t,e){var i=vl(t);return iu(i,no(e,0,i.length))}function ou(t){return iu(_e(t))}function au(t){return iu(vl(t))}var su=$r((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}));const lu=su;function hu(t,e){var i;return Oa(t,(function(t,n,r){return!(i=e(t,n,r))})),!!i}var du=hi((function(t,e){if(null==t)return[];var i=e.length;return i>1&&ci(t,e[0],e[1])?e=[]:i>2&&ci(e[0],e[1],e[2])&&(e=[e[0]]),Fh(t,Xn(e,1),[])}));const uu=du;var cu=Math.floor,gu=Math.min;function pu(t,e,i,n){var r=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=i(e))!=e,s=null===e,l=ct(e),h=void 0===e;r<o;){var d=cu((r+o)/2),u=i(t[d]),c=void 0!==u,g=null===u,p=u==u,f=ct(u);if(a)var w=n||p;else w=h?p&&(n||c):s?p&&c&&(n||!g):l?p&&c&&!g&&(n||!f):!g&&!f&&(n?u<=e:u<e);w?r=d+1:o=d}return gu(o,4294967294)}function fu(t,e,i){var n=0,r=null==t?n:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;n<r;){var o=n+r>>>1,a=t[o];null!==a&&!ct(a)&&(i?a<=e:a<e)?n=o+1:r=o}return r}return pu(t,e,Rt,i)}function wu(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var a=t[i],s=e?e(a):a;if(!i||!ni(s,l)){var l=s;o[r++]=0===a?0:a}}return o}var mu=Math.max;var _u=$r((function(t,e,i){return t+(i?" ":"")+pr(e)}));const ku=_u;const bu=kt((function(t,e){return t-e}),0);var vu=Object.prototype,yu=vu.hasOwnProperty;function xu(t,e,i,n){return void 0===t||ni(t,vu[i])&&!yu.call(n,i)?e:t}var Su={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Cu(t){return"\\"+Su[t]}const Eu=/<%=([\s\S]+?)%>/g;const Iu={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Eu,variable:"",imports:{_:{escape:Os}}};var Au=/\b__p \+= '';/g,Yu=/\b(__p \+=) '' \+/g,Xu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tu=/[()=,{}\[\]\/\s]/,Lu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ju=/($^)/,Ru=/['\n\r\u2028\u2029\\]/g,zu=Object.prototype.hasOwnProperty;function Pu(t,e){return e(t)}var Ou=4294967295,qu=Math.min;function Mu(t,e){var i=t;return i instanceof de&&(i=i.value()),wr(e,(function(t,e){return e.func.apply(e.thisArg,In([t],e.args))}),i)}function Du(){return Mu(this.__wrapped__,this.__actions__)}var Nu=9007199254740991;function Bu(t,e){for(var i=t.length;i--&&Oe(e,t[i],0)>-1;);return i}function Fu(t,e){for(var i=-1,n=t.length;++i<n&&Oe(e,t[i],0)>-1;);return i}var Wu=/^\s+/;var Hu=/\w*$/;const Uu=mr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var $u=/&(?:amp|lt|gt|quot|#39);/g,Vu=RegExp($u.source);var Gu=Co&&1/ha(new Co([,-0]))[1]==1/0?function(t){return new Co(t)}:ue;const Zu=Gu;function Ku(t,e,i){var n=-1,r=qe,o=t.length,a=!0,s=[],l=s;if(i)a=!1,r=gs;else if(o>=200){var h=e?null:Zu(t);if(h)return ha(h);a=!1,r=aa,l=new ra}else l=e?[]:s;t:for(;++n<o;){var d=t[n],u=e?e(d):d;if(d=i||0!==d?d:0,a&&u==u){for(var c=l.length;c--;)if(l[c]===u)continue t;e&&l.push(u),s.push(d)}else r(l,u,i)||(l!==s&&l.push(u),s.push(d))}return s}const Qu=hi((function(t){return Ku(Xn(t,1,ts,!0))}));var Ju=hi((function(t){var e=ms(t);return ts(e)&&(e=void 0),Ku(Xn(t,1,ts,!0),Xa(e))}));const tc=Ju;const ec=hi((function(t){var e=ms(t);return e="function"==typeof e?e:void 0,Ku(Xn(t,1,ts,!0),void 0,e)}));var ic=0;var nc=Math.max;function rc(t){if(!t||!t.length)return[];var e=0;return t=co(t,(function(t){if(ts(t))return e=nc(t.length,e),!0})),wi(e,(function(e){return pt(t,Aa(e))}))}function oc(t,e){if(!t||!t.length)return[];var i=rc(t);return null==e?i:pt(i,(function(t){return ne(e,void 0,t)}))}function ac(t,e,i,n){return Mh(t,e,i(Sn(t,e)),n)}var sc=$r((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}));const lc=sc;var hc=hi((function(t,e){return ts(t)?ps(t,e):[]}));const dc=hc;var uc=Ln((function(t){var e=t.length,i=e?t[0]:0,n=this.__wrapped__,r=function(e){return En(e,t)};return!(e>1||this.__actions__.length)&&n instanceof de&&We(i)?((n=n.slice(i,+i+(e?1:0))).__actions__.push({func:Pu,args:[r],thisArg:void 0}),new me(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(r)}));const cc=uc;function gc(t,e,i){var n=t.length;if(n<2)return n?Ku(t[0]):[];for(var r=-1,o=Array(n);++r<n;)for(var a=t[r],s=-1;++s<n;)s!=r&&(o[r]=ps(o[r]||a,t[s],e,i));return Ku(Xn(o,1),e,i)}const pc=hi((function(t){return gc(co(t,ts))}));var fc=hi((function(t){var e=ms(t);return ts(e)&&(e=void 0),gc(co(t,ts),Xa(e))}));const wc=fc;const mc=hi((function(t){var e=ms(t);return e="function"==typeof e?e:void 0,gc(co(t,ts),void 0,e)}));const _c=hi(rc);function kc(t,e,i){for(var n=-1,r=t.length,o=e.length,a={};++n<r;){var s=n<o?e[n]:void 0;i(a,t[n],s)}return a}var bc=hi((function(t){var e=t.length,i=e>1?t[e-1]:void 0;return i="function"==typeof i?(t.pop(),i):void 0,oc(t,i)}));const vc={chunk:function(t,e,i){e=(i?ci(t,e,i):void 0===e)?1:io(jt(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var r=0,o=0,a=Array(eo(n/e));r<n;)a[o++]=Kn(t,r,r+=e);return a},compact:function(t){for(var e=-1,i=null==t?0:t.length,n=0,r=[];++e<i;){var o=t[e];o&&(r[n++]=o)}return r},concat:function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return In(ft(i)?_e(i):[i],Xn(e,1))},difference:ws,differenceBy:ks,differenceWith:vs,drop:function(t,e,i){var n=null==t?0:t.length;return n?Kn(t,(e=i||void 0===e?1:jt(e))<0?0:e,n):[]},dropRight:function(t,e,i){var n=null==t?0:t.length;return n?Kn(t,0,(e=n-(e=i||void 0===e?1:jt(e)))<0?0:e):[]},dropRightWhile:function(t,e){return t&&t.length?xs(t,Xa(e),!0,!0):[]},dropWhile:function(t,e){return t&&t.length?xs(t,Xa(e),!0):[]},fill:function(t,e,i,n){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&ci(t,e,i)&&(i=0,n=r),function(t,e,i,n){var r=t.length;for((i=jt(i))<0&&(i=-i>r?0:r+i),(n=void 0===n||n>r?r:jt(n))<0&&(n+=r),n=i>n?0:Bs(n);i<n;)t[i++]=e;return t}(t,e,i,n)):[]},findIndex:Us,findLastIndex:Ks,first:Js,flatten:Tn,flattenDeep:function(t){return(null==t?0:t.length)?Xn(t,Infinity):[]},flattenDepth:function(t,e){return(null==t?0:t.length)?Xn(t,e=void 0===e?1:jt(e)):[]},fromPairs:function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n},head:Js,indexOf:function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:jt(i);return r<0&&(r=xl(n+r,0)),Oe(t,e,r)},initial:function(t){return(null==t?0:t.length)?Kn(t,0,-1):[]},intersection:Il,intersectionBy:Yl,intersectionWith:Xl,join:function(t,e){return null==t?"":ah.call(t,e)},last:ms,lastIndexOf:function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n;return void 0!==i&&(r=(r=jt(i))<0?uh(n+r,0):ch(r,n-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,r):ze(t,Pe,r,!0)},nth:function(t,e){return t&&t.length?Rh(t,jt(e)):void 0},pull:Td,pullAll:Xd,pullAllBy:function(t,e,i){return t&&t.length&&e&&e.length?Yd(t,e,Xa(i)):t},pullAllWith:function(t,e,i){return t&&t.length&&e&&e.length?Yd(t,e,void 0,i):t},pullAt:zd,remove:function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],o=t.length;for(e=Xa(e);++n<o;){var a=t[n];e(a,n,t)&&(i.push(a),r.push(n))}return jd(t,r),i},reverse:Qd,slice:function(t,e,i){var n=null==t?0:t.length;return n?(i&&"number"!=typeof i&&ci(t,e,i)?(e=0,i=n):(e=null==e?0:jt(e),i=void 0===i?n:jt(i)),Kn(t,e,i)):[]},sortedIndex:function(t,e){return fu(t,e)},sortedIndexBy:function(t,e,i){return pu(t,e,Xa(i))},sortedIndexOf:function(t,e){var i=null==t?0:t.length;if(i){var n=fu(t,e);if(n<i&&ni(t[n],e))return n}return-1},sortedLastIndex:function(t,e){return fu(t,e,!0)},sortedLastIndexBy:function(t,e,i){return pu(t,e,Xa(i),!0)},sortedLastIndexOf:function(t,e){if(null==t?0:t.length){var i=fu(t,e,!0)-1;if(ni(t[i],e))return i}return-1},sortedUniq:function(t){return t&&t.length?wu(t):[]},sortedUniqBy:function(t,e){return t&&t.length?wu(t,Xa(e)):[]},tail:function(t){var e=null==t?0:t.length;return e?Kn(t,1,e):[]},take:function(t,e,i){return t&&t.length?Kn(t,0,(e=i||void 0===e?1:jt(e))<0?0:e):[]},takeRight:function(t,e,i){var n=null==t?0:t.length;return n?Kn(t,(e=n-(e=i||void 0===e?1:jt(e)))<0?0:e,n):[]},takeRightWhile:function(t,e){return t&&t.length?xs(t,Xa(e),!1,!0):[]},takeWhile:function(t,e){return t&&t.length?xs(t,Xa(e)):[]},union:Qu,unionBy:tc,unionWith:ec,uniq:function(t){return t&&t.length?Ku(t):[]},uniqBy:function(t,e){return t&&t.length?Ku(t,Xa(e)):[]},uniqWith:function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Ku(t,void 0,e):[]},unzip:rc,unzipWith:oc,without:dc,xor:pc,xorBy:wc,xorWith:mc,zip:_c,zipObject:function(t,e){return kc(t||[],e||[],oi)},zipObjectDeep:function(t,e){return kc(t||[],e||[],Mh)},zipWith:bc},yc={countBy:Ba,each:Cs,eachRight:Xs,every:function(t,e,i){var n=ft(t)?Ds:Ns;return i&&ci(t,e,i)&&(e=void 0),n(t,Xa(e))},filter:function(t,e){return(ft(t)?co:Fs)(t,Xa(e))},find:$s,findLast:Qs,flatMap:function(t,e){return Xn(el(t,e),1)},flatMapDeep:function(t,e){return Xn(el(t,e),Infinity)},flatMapDepth:function(t,e,i){return i=void 0===i?1:jt(i),Xn(el(t,e),i)},forEach:Cs,forEachRight:Xs,groupBy:hl,includes:function(t,e,i,n){t=ui(t)?t:vl(t),i=i&&!n?jt(i):0;var r=t.length;return i<0&&(i=yl(r+i,0)),kl(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&Oe(t,e,i)>-1},invokeMap:Wl,keyBy:dh,map:el,orderBy:function(t,e,i,n){return null==t?[]:(ft(e)||(e=null==e?[]:[e]),ft(i=n?void 0:i)||(i=null==i?[]:[i]),Fh(t,e,i))},partition:Sd,reduce:function(t,e,i){var n=ft(t)?wr:Gd,r=arguments.length<3;return n(t,Xa(e),i,r,Oa)},reduceRight:function(t,e,i){var n=ft(t)?Zd:Gd,r=arguments.length<3;return n(t,Xa(e),i,r,Ys)},reject:function(t,e){return(ft(t)?co:Fs)(t,Th(Xa(e)))},sample:function(t){return(ft(t)?tu:eu)(t)},sampleSize:function(t,e,i){return e=(i?ci(t,e,i):void 0===e)?1:jt(e),(ft(t)?nu:ru)(t,e)},shuffle:function(t){return(ft(t)?ou:au)(t)},size:function(t){if(null==t)return 0;if(ui(t))return kl(t)?cd(t):t.length;var e=Oo(t);return"[object Map]"==e||"[object Set]"==e?t.size:Bi(t).length},some:function(t,e,i){var n=ft(t)?oa:hu;return i&&ci(t,e,i)&&(e=void 0),n(t,Xa(e))},sortBy:uu},xc={now:Ha},Sc={after:function(t,e){if("function"!=typeof e)throw new TypeError("Expected a function");return t=jt(t),function(){if(--t<1)return e.apply(this,arguments)}},ary:ei,before:Wn,bind:Un,bindKey:Zn,curry:Fa,curryRight:Wa,debounce:Va,defer:ds,delay:cs,flip:function(t){return ti(t,512)},memoize:wn,negate:Th,once:function(t){return Wn(2,t)},overArgs:Gh,partial:bd,partialRight:yd,rearg:Vd,rest:function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return hi(t,e=void 0===e?e:jt(e))},spread:function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function");return e=null==e?0:mu(jt(e),0),hi((function(i){var n=i[e],r=Qn(i,0,e);return n&&In(r,n),ne(t,this,r)}))},throttle:function(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Ct(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),Va(t,e,{leading:n,maxWait:e,trailing:r})},unary:function(t){return ei(t,1)},wrap:function(t,e){return bd(Ss(e),t)}},Cc={castArray:function(){if(!arguments.length)return[];var t=arguments[0];return ft(t)?t:[t]},clone:function(t){return na(t,4)},cloneDeep:function(t){return na(t,5)},cloneDeepWith:function(t,e){return na(t,5,e="function"==typeof e?e:void 0)},cloneWith:function(t,e){return na(t,4,e="function"==typeof e?e:void 0)},conformsTo:function(t,e){return null==e||Ta(t,e,Fi(e))},eq:ni,gt:cl,gte:pl,isArguments:yi,isArray:ft,isArrayBuffer:$l,isArrayLike:ui,isArrayLikeObject:ts,isBoolean:function(t){return!0===t||!1===t||ut(t)&&"[object Boolean]"==dt(t)},isBuffer:Ii,isDate:Zl,isElement:function(t){return ut(t)&&1===t.nodeType&&!Dn(t)},isEmpty:function(t){if(null==t)return!0;if(ui(t)&&(ft(t)||"string"==typeof t||"function"==typeof t.splice||Ii(t)||Pi(t)||yi(t)))return!t.length;var e=Oo(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(fi(t))return!Bi(t).length;for(var i in t)if(Kl.call(t,i))return!1;return!0},isEqual:function(t,e){return _a(t,e)},isEqualWith:function(t,e,i){var n=(i="function"==typeof i?i:void 0)?i(t,e):void 0;return void 0===n?_a(t,e,void 0,i):!!n},isError:Nn,isFinite:function(t){return"number"==typeof t&&Ql(t)},isFunction:zt,isInteger:Jl,isLength:di,isMap:Go,isMatch:function(t,e){return t===e||ka(t,e,va(e))},isMatchWith:function(t,e,i){return i="function"==typeof i?i:void 0,ka(t,e,va(e),i)},isNaN:function(t){return th(t)&&t!=+t},isNative:function(t){if(eh(t))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return $t(t)},isNil:function(t){return null==t},isNull:function(t){return null===t},isNumber:th,isObject:Ct,isObjectLike:ut,isPlainObject:Dn,isRegExp:rh,isSafeInteger:function(t){return Jl(t)&&t>=-9007199254740991&&t<=oh},isSet:Qo,isString:kl,isSymbol:ct,isTypedArray:Pi,isUndefined:function(t){return void 0===t},isWeakMap:function(t){return ut(t)&&"[object WeakMap]"==Oo(t)},isWeakSet:function(t){return ut(t)&&"[object WeakSet]"==dt(t)},lt:mh,lte:kh,toArray:jh,toFinite:Lt,toInteger:jt,toLength:Bs,toNumber:Xt,toPlainObject:is,toSafeInteger:function(t){return t?no(jt(t),-9007199254740991,Nu):0===t?t:0},toString:vn},Ec={add:bt,ceil:Jr,divide:ys,floor:il,max:function(t){return t&&t.length?bh(t,Rt,dl):void 0},maxBy:function(t,e){return t&&t.length?bh(t,Xa(e),dl):void 0},mean:function(t){return yh(t,Rt)},meanBy:function(t,e){return yh(t,Xa(e))},min:function(t){return t&&t.length?bh(t,Rt,wh):void 0},minBy:function(t,e){return t&&t.length?bh(t,Xa(e),wh):void 0},multiply:Xh,round:Jd,subtract:bu,sum:function(t){return t&&t.length?vh(t,Rt):0},sumBy:function(t,e){return t&&t.length?vh(t,Xa(e)):0}},Ic=function(t,e,i){return void 0===i&&(i=e,e=void 0),void 0!==i&&(i=(i=Xt(i))==i?i:0),void 0!==e&&(e=(e=Xt(e))==e?e:0),no(Xt(t),e,i)},Ac=function(t,e,i){return e=Lt(e),void 0===i?(i=e,e=0):i=Lt(i),function(t,e,i){return t>=_l(e,i)&&t<ml(e,i)}(t=Xt(t),e,i)},Yc=function(t,e,i){if(i&&"boolean"!=typeof i&&ci(t,e,i)&&(e=i=void 0),void 0===i&&("boolean"==typeof e?(i=e,e=void 0):"boolean"==typeof t&&(i=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=Lt(t),void 0===e?(e=t,t=0):e=Lt(e)),t>e){var n=t;t=e,e=n}if(i||t%1||e%1){var r=Nd();return Dd(t+r*(e-t+Md("1e-"+((r+"").length-1))),e)}return qd(t,e)},Xc={assign:Ui,assignIn:Ki,assignInWith:Ji,assignWith:en,at:jn,create:function(t,e){var i=ee(t);return null==e?i:oo(i,e)},defaults:Qa,defaultsDeep:ss,entries:Ls,entriesIn:js,extend:Ki,extendWith:Ji,findKey:function(t,e){return Vs(t,Xa(e),za)},findLastKey:function(t,e){return Vs(t,Xa(e),As)},forIn:function(t,e){return null==t?t:Ra(t,Ss(e),Gi)},forInRight:function(t,e){return null==t?t:Is(t,Ss(e),Gi)},forOwn:function(t,e){return t&&za(t,Ss(e))},forOwnRight:function(t,e){return t&&As(t,Ss(e))},functions:function(t){return null==t?[]:al(t,Fi(t))},functionsIn:function(t){return null==t?[]:al(t,Gi(t))},get:Cn,has:function(t,e){return null!=t&&Ca(t,e,wl)},hasIn:Ea,invert:Rl,invertBy:Ml,invoke:Bl,keys:Fi,keysIn:Gi,mapKeys:function(t,e){var i={};return e=Xa(e),za(t,(function(t,n,r){ii(i,e(t,n,r),t)})),i},mapValues:function(t,e){var i={};return e=Xa(e),za(t,(function(t,n,r){ii(i,n,e(t,n,r))})),i},merge:Sh,mergeWith:as,omit:qh,omitBy:function(t,e){return Nh(t,Th(Xa(e)))},pick:Ed,pickBy:Nh,result:function(t,e,i){var n=-1,r=(e=yn(e,t)).length;for(r||(r=1,t=void 0);++n<r;){var o=null==t?void 0:t[xn(e[n])];void 0===o&&(n=r,o=i),t=zt(o)?o.call(t):o}return t},set:function(t,e,i){return null==t?t:Mh(t,e,i)},setWith:function(t,e,i,n){return n="function"==typeof n?n:void 0,null==t?t:Mh(t,e,i,n)},toPairs:Ls,toPairsIn:js,transform:function(t,e,i){var n=ft(t),r=n||Ii(t)||Pi(t);if(e=Xa(e),null==i){var o=t&&t.constructor;i=r?n?new o:[]:Ct(t)&&zt(o)?ee(Rn(t)):{}}return(r?Re:za)(t,(function(t,n,r){return e(i,t,n,r)})),i},unset:function(t,e){return null==t||zh(t,e)},update:function(t,e,i){return null==t?t:ac(t,e,Ss(i))},updateWith:function(t,e,i,n){return n="function"==typeof n?n:void 0,null==t?t:ac(t,e,Ss(i),n)},values:vl,valuesIn:function(t){return null==t?[]:bl(t,Gi(t))}},Tc={at:cc,chain:to,commit:function(){return new me(this.value(),this.__chain__)},lodash:ve,next:function(){void 0===this.__values__&&(this.__values__=jh(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},plant:function(t){for(var e,i=this;i instanceof he;){var n=ke(i);n.__index__=0,n.__values__=void 0,e?r.__wrapped__=n:e=n;var r=n;i=i.__wrapped__}return r.__wrapped__=t,e},reverse:function(){var t=this.__wrapped__;if(t instanceof de){var e=t;return this.__actions__.length&&(e=new de(this)),(e=e.reverse()).__actions__.push({func:Pu,args:[Qd],thisArg:void 0}),new me(e,this.__chain__)}return this.thru(Qd)},tap:function(t,e){return e(t),t},thru:Pu,toIterator:function(){return this},toJSON:Du,value:Du,valueOf:Du,wrapperChain:function(){return to(this)}},Lc={camelCase:Gr,capitalize:fr,deburr:vr,endsWith:function(t,e,i){t=vn(t),e=_t(e);var n=t.length,r=i=void 0===i?n:no(jt(i),0,n);return(i-=e.length)>=0&&t.slice(i,r)==e},escape:Os,escapeRegExp:function(t){return(t=vn(t))&&Ms.test(t)?t.replace(qs,"\\$&"):t},kebabCase:lh,lowerCase:ph,lowerFirst:fh,pad:function(t,e,i){t=vn(t);var n=(e=jt(e))?cd(t):0;if(!e||n>=e)return t;var r=(e-n)/2;return pd(wd(r),i)+t+pd(fd(r),i)},padEnd:function(t,e,i){t=vn(t);var n=(e=jt(e))?cd(t):0;return e&&n<e?t+pd(e-n,i):t},padStart:function(t,e,i){t=vn(t);var n=(e=jt(e))?cd(t):0;return e&&n<e?pd(e-n,i)+t:t},parseInt:function(t,e,i){return i||null==e?e=0:e&&(e=+e),_d(vn(t).replace(md,""),e||0)},repeat:function(t,e,i){return e=(i?ci(t,e,i):void 0===e)?1:jt(e),Jh(vn(t),e)},replace:function(){var t=arguments,e=vn(t[0]);return t.length<3?e:e.replace(t[1],t[2])},snakeCase:lu,split:function(t,e,i){return i&&"number"!=typeof i&&ci(t,e,i)&&(e=i=void 0),(i=void 0===i?4294967295:i>>>0)?(t=vn(t))&&("string"==typeof e||null!=e&&!rh(e))&&!(e=_t(e))&&tr(t)?Qn(cr(t),0,i):t.split(e,i):[]},startCase:ku,startsWith:function(t,e,i){return t=vn(t),i=null==i?0:no(jt(i),0,t.length),e=_t(e),t.slice(i,i+e.length)==e},template:function(t,e,i){var n=Iu.imports._.templateSettings||Iu;i&&ci(t,e,i)&&(e=void 0),t=vn(t),e=Ji({},e,n,xu);var r,o,a=Ji({},e.imports,n.imports,xu),s=Fi(a),l=bl(a,s),h=0,d=e.interpolate||ju,u="__p += '",c=RegExp((e.escape||ju).source+"|"+d.source+"|"+(d===Eu?Lu:ju).source+"|"+(e.evaluate||ju).source+"|$","g"),g=zu.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(c,(function(e,i,n,a,s,l){return n||(n=a),u+=t.slice(h,l).replace(Ru,Cu),i&&(r=!0,u+="' +\n__e("+i+") +\n'"),s&&(o=!0,u+="';\n"+s+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),u+="';\n";var p=zu.call(e,"variable")&&e.variable;if(p){if(Tu.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";u=(o?u.replace(Au,""):u).replace(Yu,"$1").replace(Xu,"$1;"),u="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var f=Fn((function(){return Function(s,g+"return "+u).apply(void 0,l)}));if(f.source=u,Nn(f))throw f;return f},templateSettings:Iu,toLower:function(t){return vn(t).toLowerCase()},toUpper:function(t){return vn(t).toUpperCase()},trim:function(t,e,i){if((t=vn(t))&&(i||void 0===e))return St(t);if(!t||!(e=_t(e)))return t;var n=cr(t),r=cr(e);return Qn(n,Fu(n,r),Bu(n,r)+1).join("")},trimEnd:function(t,e,i){if((t=vn(t))&&(i||void 0===e))return t.slice(0,yt(t)+1);if(!t||!(e=_t(e)))return t;var n=cr(t);return Qn(n,0,Bu(n,cr(e))+1).join("")},trimStart:function(t,e,i){if((t=vn(t))&&(i||void 0===e))return t.replace(Wu,"");if(!t||!(e=_t(e)))return t;var n=cr(t);return Qn(n,Fu(n,cr(e))).join("")},truncate:function(t,e){var i=30,n="...";if(Ct(e)){var r="separator"in e?e.separator:r;i="length"in e?jt(e.length):i,n="omission"in e?_t(e.omission):n}var o=(t=vn(t)).length;if(tr(t)){var a=cr(t);o=a.length}if(i>=o)return t;var s=i-cd(n);if(s<1)return n;var l=a?Qn(a,0,s).join(""):t.slice(0,s);if(void 0===r)return l+n;if(a&&(s+=l.length-s),rh(r)){if(t.slice(s).search(r)){var h,d=l;for(r.global||(r=RegExp(r.source,vn(Hu.exec(r))+"g")),r.lastIndex=0;h=r.exec(d);)var u=h.index;l=l.slice(0,void 0===u?s:u)}}else if(t.indexOf(_t(r),s)!=s){var c=l.lastIndexOf(r);c>-1&&(l=l.slice(0,c))}return l+n},unescape:function(t){return(t=vn(t))&&Vu.test(t)?t.replace($u,Uu):t},upperCase:lc,upperFirst:pr,words:Hr},jc={attempt:Fn,bindAll:Vn,cond:function(t){var e=null==t?0:t.length,i=Xa;return t=e?pt(t,(function(t){if("function"!=typeof t[1])throw new TypeError("Expected a function");return[i(t[0]),t[1]]})):[],hi((function(i){for(var n=-1;++n<e;){var r=t[n];if(ne(r[0],this,i))return ne(r[1],this,i)}}))},conforms:function(t){return function(t){var e=Fi(t);return function(i){return Ta(i,t,e)}}(na(t,1))},constant:Ye,defaultTo:function(t,e){return null==t||t!=t?e:t},flow:rl,flowRight:ol,identity:Rt,iteratee:function(t){return Xa("function"==typeof t?t:na(t,1))},matches:function(t){return xa(na(t,1))},matchesProperty:function(t,e){return Ia(t,na(e,1))},method:Eh,methodOf:Ah,mixin:Yh,noop:ue,nthArg:function(t){return t=jt(t),hi((function(e){return Rh(e,t)}))},over:Hh,overEvery:Zh,overSome:Kh,property:Ya,propertyOf:function(t){return function(e){return null==t?void 0:Sn(t,e)}},range:Hd,rangeRight:Ud,stubArray:go,stubFalse:xi,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(t,e){if((t=jt(t))<1||t>9007199254740991)return[];var i=Ou,n=qu(t,Ou);e=Ss(e),t-=Ou;for(var r=wi(n,e);++i<t;)e(i);return r},toPath:function(t){return ft(t)?pt(t,xn):ct(t)?[t]:_e(bn(vn(t)))},uniqueId:function(t){var e=++ic;return vn(t)+e}};var Rc=Math.max,zc=Math.min;var Pc=Math.min;
/**
             * @license
             * Lodash (Custom Build) <https://lodash.com/>
             * Build: `lodash modularize exports="es" -o ./`
             * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
             * Released under MIT license <https://lodash.com/license>
             * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
             * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
             */var Oc,qc=4294967295,Mc=Array.prototype,Dc=Object.prototype.hasOwnProperty,Nc=nt?nt.iterator:void 0,Bc=Math.max,Fc=Math.min,Wc=function(t){return function(e,i,n){if(null==n){var r=Ct(i),o=r&&Fi(i),a=o&&o.length&&al(i,o);(a?a.length:r)||(n=i,i=e,e=this)}return t(e,i,n)}}(Yh);ve.after=Sc.after,ve.ary=Sc.ary,ve.assign=Xc.assign,ve.assignIn=Xc.assignIn,ve.assignInWith=Xc.assignInWith,ve.assignWith=Xc.assignWith,ve.at=Xc.at,ve.before=Sc.before,ve.bind=Sc.bind,ve.bindAll=jc.bindAll,ve.bindKey=Sc.bindKey,ve.castArray=Cc.castArray,ve.chain=Tc.chain,ve.chunk=vc.chunk,ve.compact=vc.compact,ve.concat=vc.concat,ve.cond=jc.cond,ve.conforms=jc.conforms,ve.constant=jc.constant,ve.countBy=yc.countBy,ve.create=Xc.create,ve.curry=Sc.curry,ve.curryRight=Sc.curryRight,ve.debounce=Sc.debounce,ve.defaults=Xc.defaults,ve.defaultsDeep=Xc.defaultsDeep,ve.defer=Sc.defer,ve.delay=Sc.delay,ve.difference=vc.difference,ve.differenceBy=vc.differenceBy,ve.differenceWith=vc.differenceWith,ve.drop=vc.drop,ve.dropRight=vc.dropRight,ve.dropRightWhile=vc.dropRightWhile,ve.dropWhile=vc.dropWhile,ve.fill=vc.fill,ve.filter=yc.filter,ve.flatMap=yc.flatMap,ve.flatMapDeep=yc.flatMapDeep,ve.flatMapDepth=yc.flatMapDepth,ve.flatten=vc.flatten,ve.flattenDeep=vc.flattenDeep,ve.flattenDepth=vc.flattenDepth,ve.flip=Sc.flip,ve.flow=jc.flow,ve.flowRight=jc.flowRight,ve.fromPairs=vc.fromPairs,ve.functions=Xc.functions,ve.functionsIn=Xc.functionsIn,ve.groupBy=yc.groupBy,ve.initial=vc.initial,ve.intersection=vc.intersection,ve.intersectionBy=vc.intersectionBy,ve.intersectionWith=vc.intersectionWith,ve.invert=Xc.invert,ve.invertBy=Xc.invertBy,ve.invokeMap=yc.invokeMap,ve.iteratee=jc.iteratee,ve.keyBy=yc.keyBy,ve.keys=Fi,ve.keysIn=Xc.keysIn,ve.map=yc.map,ve.mapKeys=Xc.mapKeys,ve.mapValues=Xc.mapValues,ve.matches=jc.matches,ve.matchesProperty=jc.matchesProperty,ve.memoize=Sc.memoize,ve.merge=Xc.merge,ve.mergeWith=Xc.mergeWith,ve.method=jc.method,ve.methodOf=jc.methodOf,ve.mixin=Wc,ve.negate=Th,ve.nthArg=jc.nthArg,ve.omit=Xc.omit,ve.omitBy=Xc.omitBy,ve.once=Sc.once,ve.orderBy=yc.orderBy,ve.over=jc.over,ve.overArgs=Sc.overArgs,ve.overEvery=jc.overEvery,ve.overSome=jc.overSome,ve.partial=Sc.partial,ve.partialRight=Sc.partialRight,ve.partition=yc.partition,ve.pick=Xc.pick,ve.pickBy=Xc.pickBy,ve.property=jc.property,ve.propertyOf=jc.propertyOf,ve.pull=vc.pull,ve.pullAll=vc.pullAll,ve.pullAllBy=vc.pullAllBy,ve.pullAllWith=vc.pullAllWith,ve.pullAt=vc.pullAt,ve.range=jc.range,ve.rangeRight=jc.rangeRight,ve.rearg=Sc.rearg,ve.reject=yc.reject,ve.remove=vc.remove,ve.rest=Sc.rest,ve.reverse=vc.reverse,ve.sampleSize=yc.sampleSize,ve.set=Xc.set,ve.setWith=Xc.setWith,ve.shuffle=yc.shuffle,ve.slice=vc.slice,ve.sortBy=yc.sortBy,ve.sortedUniq=vc.sortedUniq,ve.sortedUniqBy=vc.sortedUniqBy,ve.split=Lc.split,ve.spread=Sc.spread,ve.tail=vc.tail,ve.take=vc.take,ve.takeRight=vc.takeRight,ve.takeRightWhile=vc.takeRightWhile,ve.takeWhile=vc.takeWhile,ve.tap=Tc.tap,ve.throttle=Sc.throttle,ve.thru=Pu,ve.toArray=Cc.toArray,ve.toPairs=Xc.toPairs,ve.toPairsIn=Xc.toPairsIn,ve.toPath=jc.toPath,ve.toPlainObject=Cc.toPlainObject,ve.transform=Xc.transform,ve.unary=Sc.unary,ve.union=vc.union,ve.unionBy=vc.unionBy,ve.unionWith=vc.unionWith,ve.uniq=vc.uniq,ve.uniqBy=vc.uniqBy,ve.uniqWith=vc.uniqWith,ve.unset=Xc.unset,ve.unzip=vc.unzip,ve.unzipWith=vc.unzipWith,ve.update=Xc.update,ve.updateWith=Xc.updateWith,ve.values=Xc.values,ve.valuesIn=Xc.valuesIn,ve.without=vc.without,ve.words=Lc.words,ve.wrap=Sc.wrap,ve.xor=vc.xor,ve.xorBy=vc.xorBy,ve.xorWith=vc.xorWith,ve.zip=vc.zip,ve.zipObject=vc.zipObject,ve.zipObjectDeep=vc.zipObjectDeep,ve.zipWith=vc.zipWith,ve.entries=Xc.toPairs,ve.entriesIn=Xc.toPairsIn,ve.extend=Xc.assignIn,ve.extendWith=Xc.assignInWith,Wc(ve,ve),ve.add=Ec.add,ve.attempt=jc.attempt,ve.camelCase=Lc.camelCase,ve.capitalize=Lc.capitalize,ve.ceil=Ec.ceil,ve.clamp=Ic,ve.clone=Cc.clone,ve.cloneDeep=Cc.cloneDeep,ve.cloneDeepWith=Cc.cloneDeepWith,ve.cloneWith=Cc.cloneWith,ve.conformsTo=Cc.conformsTo,ve.deburr=Lc.deburr,ve.defaultTo=jc.defaultTo,ve.divide=Ec.divide,ve.endsWith=Lc.endsWith,ve.eq=Cc.eq,ve.escape=Lc.escape,ve.escapeRegExp=Lc.escapeRegExp,ve.every=yc.every,ve.find=yc.find,ve.findIndex=vc.findIndex,ve.findKey=Xc.findKey,ve.findLast=yc.findLast,ve.findLastIndex=vc.findLastIndex,ve.findLastKey=Xc.findLastKey,ve.floor=Ec.floor,ve.forEach=yc.forEach,ve.forEachRight=yc.forEachRight,ve.forIn=Xc.forIn,ve.forInRight=Xc.forInRight,ve.forOwn=Xc.forOwn,ve.forOwnRight=Xc.forOwnRight,ve.get=Xc.get,ve.gt=Cc.gt,ve.gte=Cc.gte,ve.has=Xc.has,ve.hasIn=Xc.hasIn,ve.head=vc.head,ve.identity=Rt,ve.includes=yc.includes,ve.indexOf=vc.indexOf,ve.inRange=Ac,ve.invoke=Xc.invoke,ve.isArguments=Cc.isArguments,ve.isArray=ft,ve.isArrayBuffer=Cc.isArrayBuffer,ve.isArrayLike=Cc.isArrayLike,ve.isArrayLikeObject=Cc.isArrayLikeObject,ve.isBoolean=Cc.isBoolean,ve.isBuffer=Cc.isBuffer,ve.isDate=Cc.isDate,ve.isElement=Cc.isElement,ve.isEmpty=Cc.isEmpty,ve.isEqual=Cc.isEqual,ve.isEqualWith=Cc.isEqualWith,ve.isError=Cc.isError,ve.isFinite=Cc.isFinite,ve.isFunction=Cc.isFunction,ve.isInteger=Cc.isInteger,ve.isLength=Cc.isLength,ve.isMap=Cc.isMap,ve.isMatch=Cc.isMatch,ve.isMatchWith=Cc.isMatchWith,ve.isNaN=Cc.isNaN,ve.isNative=Cc.isNative,ve.isNil=Cc.isNil,ve.isNull=Cc.isNull,ve.isNumber=Cc.isNumber,ve.isObject=Ct,ve.isObjectLike=Cc.isObjectLike,ve.isPlainObject=Cc.isPlainObject,ve.isRegExp=Cc.isRegExp,ve.isSafeInteger=Cc.isSafeInteger,ve.isSet=Cc.isSet,ve.isString=Cc.isString,ve.isSymbol=Cc.isSymbol,ve.isTypedArray=Cc.isTypedArray,ve.isUndefined=Cc.isUndefined,ve.isWeakMap=Cc.isWeakMap,ve.isWeakSet=Cc.isWeakSet,ve.join=vc.join,ve.kebabCase=Lc.kebabCase,ve.last=ms,ve.lastIndexOf=vc.lastIndexOf,ve.lowerCase=Lc.lowerCase,ve.lowerFirst=Lc.lowerFirst,ve.lt=Cc.lt,ve.lte=Cc.lte,ve.max=Ec.max,ve.maxBy=Ec.maxBy,ve.mean=Ec.mean,ve.meanBy=Ec.meanBy,ve.min=Ec.min,ve.minBy=Ec.minBy,ve.stubArray=jc.stubArray,ve.stubFalse=jc.stubFalse,ve.stubObject=jc.stubObject,ve.stubString=jc.stubString,ve.stubTrue=jc.stubTrue,ve.multiply=Ec.multiply,ve.nth=vc.nth,ve.noop=jc.noop,ve.now=xc.now,ve.pad=Lc.pad,ve.padEnd=Lc.padEnd,ve.padStart=Lc.padStart,ve.parseInt=Lc.parseInt,ve.random=Yc,ve.reduce=yc.reduce,ve.reduceRight=yc.reduceRight,ve.repeat=Lc.repeat,ve.replace=Lc.replace,ve.result=Xc.result,ve.round=Ec.round,ve.sample=yc.sample,ve.size=yc.size,ve.snakeCase=Lc.snakeCase,ve.some=yc.some,ve.sortedIndex=vc.sortedIndex,ve.sortedIndexBy=vc.sortedIndexBy,ve.sortedIndexOf=vc.sortedIndexOf,ve.sortedLastIndex=vc.sortedLastIndex,ve.sortedLastIndexBy=vc.sortedLastIndexBy,ve.sortedLastIndexOf=vc.sortedLastIndexOf,ve.startCase=Lc.startCase,ve.startsWith=Lc.startsWith,ve.subtract=Ec.subtract,ve.sum=Ec.sum,ve.sumBy=Ec.sumBy,ve.template=Lc.template,ve.times=jc.times,ve.toFinite=Cc.toFinite,ve.toInteger=jt,ve.toLength=Cc.toLength,ve.toLower=Lc.toLower,ve.toNumber=Cc.toNumber,ve.toSafeInteger=Cc.toSafeInteger,ve.toString=Cc.toString,ve.toUpper=Lc.toUpper,ve.trim=Lc.trim,ve.trimEnd=Lc.trimEnd,ve.trimStart=Lc.trimStart,ve.truncate=Lc.truncate,ve.unescape=Lc.unescape,ve.uniqueId=jc.uniqueId,ve.upperCase=Lc.upperCase,ve.upperFirst=Lc.upperFirst,ve.each=yc.forEach,ve.eachRight=yc.forEachRight,ve.first=vc.head,Wc(ve,(Oc={},za(ve,(function(t,e){Dc.call(ve.prototype,e)||(Oc[e]=t)})),Oc),{chain:!1}),ve.VERSION="4.17.21",(ve.templateSettings=Lc.templateSettings).imports._=ve,Re(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){ve[t].placeholder=ve})),Re(["drop","take"],(function(t,e){de.prototype[t]=function(i){i=void 0===i?1:Bc(jt(i),0);var n=this.__filtered__&&!e?new de(this):this.clone();return n.__filtered__?n.__takeCount__=Fc(i,n.__takeCount__):n.__views__.push({size:Fc(i,qc),type:t+(n.__dir__<0?"Right":"")}),n},de.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Re(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=1==i||3==i;de.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xa(t),type:i}),e.__filtered__=e.__filtered__||n,e}})),Re(["head","last"],(function(t,e){var i="take"+(e?"Right":"");de.prototype[t]=function(){return this[i](1).value()[0]}})),Re(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");de.prototype[t]=function(){return this.__filtered__?new de(this):this[i](1)}})),de.prototype.compact=function(){return this.filter(Rt)},de.prototype.find=function(t){return this.filter(t).head()},de.prototype.findLast=function(t){return this.reverse().find(t)},de.prototype.invokeMap=hi((function(t,e){return"function"==typeof t?new de(this):this.map((function(i){return Nl(i,t,e)}))})),de.prototype.reject=function(t){return this.filter(Th(Xa(t)))},de.prototype.slice=function(t,e){t=jt(t);var i=this;return i.__filtered__&&(t>0||e<0)?new de(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),void 0!==e&&(i=(e=jt(e))<0?i.dropRight(-e):i.take(e-t)),i)},de.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},de.prototype.toArray=function(){return this.take(qc)},za(de.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),r=ve[n?"take"+("last"==e?"Right":""):e],o=n||/^find/.test(e);r&&(ve.prototype[e]=function(){var e=this.__wrapped__,a=n?[1]:arguments,s=e instanceof de,l=a[0],h=s||ft(e),d=function(t){var e=r.apply(ve,In([t],a));return n&&u?e[0]:e};h&&i&&"function"==typeof l&&1!=l.length&&(s=h=!1);var u=this.__chain__,c=!!this.__actions__.length,g=o&&!u,p=s&&!c;if(!o&&h){e=p?e:new de(this);var f=t.apply(e,a);return f.__actions__.push({func:Pu,args:[d],thisArg:void 0}),new me(f,u)}return g&&p?t.apply(this,a):(f=this.thru(d),g?n?f.value()[0]:f.value():f)})})),Re(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Mc[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);ve.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(ft(r)?r:[],t)}return this[i]((function(i){return e.apply(ft(i)?i:[],t)}))}})),za(de.prototype,(function(t,e){var i=ve[e];if(i){var n=i.name+"";Dc.call(pe,n)||(pe[n]=[]),pe[n].push({name:e,func:i})}})),pe[Ge(void 0,2).name]=[{name:"wrapper",func:void 0}],de.prototype.clone=function(){var t=new de(this.__wrapped__);return t.__actions__=_e(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=_e(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=_e(this.__views__),t},de.prototype.reverse=function(){if(this.__filtered__){var t=new de(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},de.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=ft(t),n=e<0,r=i?t.length:0,o=function(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=zc(e,t+a);break;case"takeRight":t=Rc(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,h=n?s:a-1,d=this.__iteratees__,u=d.length,c=0,g=Pc(l,this.__takeCount__);if(!i||!n&&r==l&&g==l)return Mu(t,this.__actions__);var p=[];t:for(;l--&&c<g;){for(var f=-1,w=t[h+=e];++f<u;){var m=d[f],_=m.iteratee,k=m.type,b=_(w);if(2==k)w=b;else if(!b){if(1==k)continue t;break t}}p[c++]=w}return p},ve.prototype.at=Tc.at,ve.prototype.chain=Tc.wrapperChain,ve.prototype.commit=Tc.commit,ve.prototype.next=Tc.next,ve.prototype.plant=Tc.plant,ve.prototype.reverse=Tc.reverse,ve.prototype.toJSON=ve.prototype.valueOf=ve.prototype.value=Tc.value,ve.prototype.first=ve.prototype.head,Nc&&(ve.prototype[Nc]=Tc.toIterator);class Hc{constructor(e){t(this,"musicCrossfadeDuration",3),t(this,"musicMinGain",.01),t(this,"musicMaxGain",.5),t(this,"buffers",{}),t(this,"context",void 0),t(this,"musicGainNode",void 0),t(this,"isMusicConnected",!1),this.game=e}createContext(){this.context=new AudioContext}async playSound(t,e){if(!this.isAudioEnabled())return;let i=await this.bufferSource(`/audio/sounds/${t}.mp3`),n=this.getSoundVolume(),r=i.connect(new GainNode(this.context,{gain:n}));if(e&&!this.getSettings().lowPowerMode){let{tileSize:t}=this.game.map;r=r.connect(new PannerNode(this.context,{positionX:e.x,positionY:e.y,distanceModel:"linear",refDistance:t,maxDistance:10*t}))}r.connect(this.context.destination);let{gain:o}=this.musicGainNode;o.cancelScheduledValues(this.context.currentTime),this.rampGain(o,o.value-n*this.musicMaxGain/2),i.addEventListener("ended",(()=>{this.rampGain(o,this.getMusicVolume(),.5)})),i.start()}async playMusic(t){if(!t)return this.stopMusic();let e=await this.bufferSource(`/audio/music/${t}.mp3`);e.loop=!0,this.stopMusic(),e.connect(this.musicGainNode),this.isAudioEnabled()&&this.musicGainNode.connect(this.context.destination),this.rampGain(this.musicGainNode.gain,this.getMusicVolume(),this.musicCrossfadeDuration),e.start()}async bufferSource(t){return this.updateVolume(),this.buffers[t]??=this.loadAudio(t),new AudioBufferSourceNode(this.context,{buffer:await this.buffers[t]})}async loadAudio(t){let e=await fetch(t),i=await e.arrayBuffer();return await this.context.decodeAudioData(i)}updateVolume(){this.musicGainNode||this.initMusicNode();let t=this.getMusicVolume();if(t<=0||!this.isAudioEnabled())this.isMusicConnected&&(this.musicGainNode.disconnect(this.context.destination),this.isMusicConnected=!1);else{let{gain:e}=this.musicGainNode;e.cancelScheduledValues(this.context.currentTime),this.isMusicConnected?this.rampGain(e,t):(this.musicGainNode.connect(this.context.destination),this.isMusicConnected=!0,this.rampGain(e,this.musicMinGain),this.rampGain(e,t,this.musicCrossfadeDuration))}}updatePlayerListener(){if(!this.context||!this.isAudioEnabled()||this.getSettings().lowPowerMode)return;let{player:t}=this.game,{positionX:e,positionY:i,forwardX:n,forwardY:r}=this.context.listener;if(e&&i&&n&&r)switch(e.value=t.x,i.value=t.y,t.orientation){case j.Up:n.value=0,r.value=1;break;case j.Down:n.value=0,r.value=-1;break;case j.Left:n.value=-1,r.value=0;break;case j.Right:n.value=1,r.value=0}else this.context.listener.setPosition(t.x,t.y,0)}stopMusic(){let t=this.musicGainNode;if(this.initMusicNode(),!t)return;let{gain:e}=t;e.cancelScheduledValues(this.context.currentTime),this.rampGain(e,this.musicMinGain,this.musicCrossfadeDuration),setTimeout((()=>t.disconnect()),1e3*this.musicCrossfadeDuration)}initMusicNode(){this.musicGainNode=new GainNode(this.context,{gain:this.musicMinGain})}rampGain(t,e,i=0){e>0&&t.linearRampToValueAtTime(e,this.context.currentTime+i)}getSoundVolume(){return this.getSettings().soundVolume/100}getMusicVolume(){return this.getSettings().musicVolume/100*this.musicMaxGain*2}isAudioEnabled(){return this.getSettings().audioEnabled}getSettings(){return this.game.storage.data.settings}playHitSound(t){this.playSound(`hit${J.randomInt(1,2)}`,t)}playKillSound(t){this.playSound(`kill${J.randomInt(1,2)}`,t)}}var Uc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$c={};
/*!
             * jQuery JavaScript Library v3.6.3
             * https://jquery.com/
             *
             * Includes Sizzle.js
             * https://sizzlejs.com/
             *
             * Copyright OpenJS Foundation and other contributors
             * Released under the MIT license
             * https://jquery.org/license
             *
             * Date: 2022-12-20T21:28Z
             */
!function(t){!function(e,i){t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}}("undefined"!=typeof window?window:Uc,(function(t,e){var i=[],n=Object.getPrototypeOf,r=i.slice,o=i.flat?function(t){return i.flat.call(t)}:function(t){return i.concat.apply([],t)},a=i.push,s=i.indexOf,l={},h=l.toString,d=l.hasOwnProperty,u=d.toString,c=u.call(Object),g={},p=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},f=function(t){return null!=t&&t===t.window},w=t.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function _(t,e,i){var n,r,o=(i=i||w).createElement("script");if(o.text=t,e)for(n in m)(r=e[n]||e.getAttribute&&e.getAttribute(n))&&o.setAttribute(n,r);i.head.appendChild(o).parentNode.removeChild(o)}function k(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?l[h.call(t)]||"object":typeof t}var b="3.6.3",v=function(t,e){return new v.fn.init(t,e)};function y(t){var e=!!t&&"length"in t&&t.length,i=k(t);return!p(t)&&!f(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}v.fn=v.prototype={jquery:b,constructor:v,length:0,toArray:function(){return r.call(this)},get:function(t){return null==t?r.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=v.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return v.each(this,t)},map:function(t){return this.pushStack(v.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(v.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice},v.extend=v.fn.extend=function(){var t,e,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[s]||{},s++),"object"==typeof a||p(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=t[e],"__proto__"!==e&&a!==n&&(h&&n&&(v.isPlainObject(n)||(r=Array.isArray(n)))?(i=a[e],o=r&&!Array.isArray(i)?[]:r||v.isPlainObject(i)?i:{},r=!1,a[e]=v.extend(h,o,n)):void 0!==n&&(a[e]=n));return a},v.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==h.call(t))&&(!(e=n(t))||"function"==typeof(i=d.call(e,"constructor")&&e.constructor)&&u.call(i)===c)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){_(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,n=0;if(y(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(y(Object(t))?v.merge(i,"string"==typeof t?[t]:t):a.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:s.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,o=t.length,a=!i;r<o;r++)!e(t[r],r)!==a&&n.push(t[r]);return n},map:function(t,e,i){var n,r,a=0,s=[];if(y(t))for(n=t.length;a<n;a++)null!=(r=e(t[a],a,i))&&s.push(r);else for(a in t)null!=(r=e(t[a],a,i))&&s.push(r);return o(s)},guid:1,support:g}),"function"==typeof Symbol&&(v.fn[Symbol.iterator]=i[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){l["[object "+e+"]"]=e.toLowerCase()}));var x=
/*!
            	 * Sizzle CSS Selector Engine v2.3.9
            	 * https://sizzlejs.com/
            	 *
            	 * Copyright JS Foundation and other contributors
            	 * Released under the MIT license
            	 * https://js.foundation/
            	 *
            	 * Date: 2022-12-19
            	 */
function(t){var e,i,n,r,o,a,s,l,h,d,u,c,g,p,f,w,m,_,k,b="sizzle"+1*new Date,v=t.document,y=0,x=0,S=lt(),C=lt(),E=lt(),I=lt(),A=function(t,e){return t===e&&(u=!0),0},Y={}.hasOwnProperty,X=[],T=X.pop,L=X.push,j=X.push,R=X.slice,z=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="[\\x20\\t\\r\\n\\f]",q="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",M="\\[[\\x20\\t\\r\\n\\f]*("+q+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+O+"*\\]",D=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",N=new RegExp(O+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),F=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),H=new RegExp(O+"|>"),U=new RegExp(D),$=new RegExp("^"+q+"$"),V={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+D),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},G=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){c()},at=bt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{j.apply(X=R.call(v.childNodes),v.childNodes),X[v.childNodes.length].nodeType}catch(F_){j={apply:X.length?function(t,e){L.apply(t,R.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function st(t,e,n,r){var o,s,h,d,u,p,m,_=e&&e.ownerDocument,v=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return n;if(!r&&(c(e),e=e||g,f)){if(11!==v&&(u=J.exec(t)))if(o=u[1]){if(9===v){if(!(h=e.getElementById(o)))return n;if(h.id===o)return n.push(h),n}else if(_&&(h=_.getElementById(o))&&k(e,h)&&h.id===o)return n.push(h),n}else{if(u[2])return j.apply(n,e.getElementsByTagName(t)),n;if((o=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return j.apply(n,e.getElementsByClassName(o)),n}if(i.qsa&&!I[t+" "]&&(!w||!w.test(t))&&(1!==v||"object"!==e.nodeName.toLowerCase())){if(m=t,_=e,1===v&&(H.test(t)||W.test(t))){for((_=tt.test(t)&&mt(e.parentNode)||e)===e&&i.scope||((d=e.getAttribute("id"))?d=d.replace(nt,rt):e.setAttribute("id",d=b)),s=(p=a(t)).length;s--;)p[s]=(d?"#"+d:":scope")+" "+kt(p[s]);m=p.join(",")}try{if(i.cssSupportsSelector&&!CSS.supports("selector(:is("+m+"))"))throw new Error;return j.apply(n,_.querySelectorAll(m)),n}catch(y){I(t,!0)}finally{d===b&&e.removeAttribute("id")}}}return l(t.replace(B,"$1"),e,n,r)}function lt(){var t=[];return function e(i,r){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function ht(t){return t[b]=!0,t}function dt(t){var e=g.createElement("fieldset");try{return!!t(e)}catch(F_){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),r=i.length;r--;)n.attrHandle[i[r]]=e}function ct(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function gt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function wt(t){return ht((function(e){return e=+e,ht((function(i,n){for(var r,o=t([],i.length,e),a=o.length;a--;)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=st.support={},o=st.isXML=function(t){var e=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!G.test(e||i&&i.nodeName||"HTML")},c=st.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:v;return a!=g&&9===a.nodeType&&a.documentElement?(p=(g=a).documentElement,f=!o(g),v!=g&&(r=g.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ot,!1):r.attachEvent&&r.attachEvent("onunload",ot)),i.scope=dt((function(t){return p.appendChild(t).appendChild(g.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.cssSupportsSelector=dt((function(){return CSS.supports("selector(*)")&&g.querySelectorAll(":is(:jqfake)")&&!CSS.supports("selector(:is(*,:jqfake))")})),i.attributes=dt((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=dt((function(t){return t.appendChild(g.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(g.getElementsByClassName),i.getById=dt((function(t){return p.appendChild(t).id=b,!g.getElementsByName||!g.getElementsByName(b).length})),i.getById?(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i,n,r,o=e.getElementById(t);if(o){if((i=o.getAttributeNode("id"))&&i.value===t)return[o];for(r=e.getElementsByName(t),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===t)return[o]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},m=[],w=[],(i.qsa=Q.test(g.querySelectorAll))&&(dt((function(t){var e;p.appendChild(t).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&w.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||w.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+P+")"),t.querySelectorAll("[id~="+b+"-]").length||w.push("~="),(e=g.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||w.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||w.push(":checked"),t.querySelectorAll("a#"+b+"+*").length||w.push(".#.+[+~]"),t.querySelectorAll("\\\f"),w.push("[\\r\\n\\f]")})),dt((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=g.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&w.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&w.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&w.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),w.push(",.*:")}))),(i.matchesSelector=Q.test(_=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&dt((function(t){i.disconnectedMatch=_.call(t,"*"),_.call(t,"[s!='']:x"),m.push("!=",D)})),i.cssSupportsSelector||w.push(":has"),w=w.length&&new RegExp(w.join("|")),m=m.length&&new RegExp(m.join("|")),e=Q.test(p.compareDocumentPosition),k=e||Q.test(p.contains)?function(t,e){var i=9===t.nodeType&&t.documentElement||t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return u=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t==g||t.ownerDocument==v&&k(v,t)?-1:e==g||e.ownerDocument==v&&k(v,e)?1:d?z(d,t)-z(d,e):0:4&n?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!r||!o)return t==g?-1:e==g?1:r?-1:o?1:d?z(d,t)-z(d,e):0;if(r===o)return ct(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?ct(a[n],s[n]):a[n]==v?-1:s[n]==v?1:0},g):g},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(c(t),i.matchesSelector&&f&&!I[e+" "]&&(!m||!m.test(e))&&(!w||!w.test(e)))try{var n=_.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(F_){I(e,!0)}return st(e,g,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=g&&c(t),k(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=g&&c(t);var r=n.attrHandle[e.toLowerCase()],o=r&&Y.call(n.attrHandle,e.toLowerCase())?r(t,e,!f):void 0;return void 0!==o?o:i.attributes||!f?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(nt,rt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,n=[],r=0,o=0;if(u=!i.detectDuplicates,d=!i.sortStable&&t.slice(0),t.sort(A),u){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)t.splice(n[r],1)}return d=null,t},r=st.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},n=st.selectors={cacheLength:50,createPseudo:ht,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return V.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&U.test(i)&&(e=a(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+O+"|$)"))&&S(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var r=st.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace(N," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var h,d,u,c,g,p,f=o!==a?"nextSibling":"previousSibling",w=e.parentNode,m=s&&e.nodeName.toLowerCase(),_=!l&&!s,k=!1;if(w){if(o){for(;f;){for(c=e;c=c[f];)if(s?c.nodeName.toLowerCase()===m:1===c.nodeType)return!1;p=f="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?w.firstChild:w.lastChild],a&&_){for(k=(g=(h=(d=(u=(c=w)[b]||(c[b]={}))[c.uniqueID]||(u[c.uniqueID]={}))[t]||[])[0]===y&&h[1])&&h[2],c=g&&w.childNodes[g];c=++g&&c&&c[f]||(k=g=0)||p.pop();)if(1===c.nodeType&&++k&&c===e){d[t]=[y,g,k];break}}else if(_&&(k=g=(h=(d=(u=(c=e)[b]||(c[b]={}))[c.uniqueID]||(u[c.uniqueID]={}))[t]||[])[0]===y&&h[1]),!1===k)for(;(c=++g&&c&&c[f]||(k=g=0)||p.pop())&&((s?c.nodeName.toLowerCase()!==m:1!==c.nodeType)||!++k||(_&&((d=(u=c[b]||(c[b]={}))[c.uniqueID]||(u[c.uniqueID]={}))[t]=[y,k]),c!==e)););return(k-=r)===n||k%n==0&&k/n>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[b]?r(e):r.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ht((function(t,i){for(var n,o=r(t,e),a=o.length;a--;)t[n=z(t,o[a])]=!(i[n]=o[a])})):function(t){return r(t,0,i)}):r}},pseudos:{not:ht((function(t){var e=[],i=[],n=s(t.replace(B,"$1"));return n[b]?ht((function(t,e,i,r){for(var o,a=n(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,r,o){return e[0]=t,n(e,null,o,i),e[0]=null,!i.pop()}})),has:ht((function(t){return function(e){return st(t,e).length>0}})),contains:ht((function(t){return t=t.replace(et,it),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:ht((function(t){return $.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===g.activeElement&&(!g.hasFocus||g.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return K.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:wt((function(){return[0]})),last:wt((function(t,e){return[e-1]})),eq:wt((function(t,e,i){return[i<0?i+e:i]})),even:wt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:wt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:wt((function(t,e,i){for(var n=i<0?i+e:i>e?e:i;--n>=0;)t.push(n);return t})),gt:wt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=gt(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=pt(e);function _t(){}function kt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function bt(t,e,i){var n=e.dir,r=e.next,o=r||n,a=i&&"parentNode"===o,s=x++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||a)return t(e,i,r);return!1}:function(e,i,l){var h,d,u,c=[y,s];if(l){for(;e=e[n];)if((1===e.nodeType||a)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||a)if(d=(u=e[b]||(e[b]={}))[e.uniqueID]||(u[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[n]||e;else{if((h=d[o])&&h[0]===y&&h[1]===s)return c[2]=h[2];if(d[o]=c,c[2]=t(e,i,l))return!0}return!1}}function vt(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function yt(t,e,i,n,r){for(var o,a=[],s=0,l=t.length,h=null!=e;s<l;s++)(o=t[s])&&(i&&!i(o,n,r)||(a.push(o),h&&e.push(s)));return a}function xt(t,e,i,n,r,o){return n&&!n[b]&&(n=xt(n)),r&&!r[b]&&(r=xt(r,o)),ht((function(o,a,s,l){var h,d,u,c=[],g=[],p=a.length,f=o||function(t,e,i){for(var n=0,r=e.length;n<r;n++)st(t,e[n],i);return i}(e||"*",s.nodeType?[s]:s,[]),w=!t||!o&&e?f:yt(f,c,t,s,l),m=i?r||(o?t:p||n)?[]:a:w;if(i&&i(w,m,s,l),n)for(h=yt(m,g),n(h,[],s,l),d=h.length;d--;)(u=h[d])&&(m[g[d]]=!(w[g[d]]=u));if(o){if(r||t){if(r){for(h=[],d=m.length;d--;)(u=m[d])&&h.push(w[d]=u);r(null,m=[],h,l)}for(d=m.length;d--;)(u=m[d])&&(h=r?z(o,u):c[d])>-1&&(o[h]=!(a[h]=u))}}else m=yt(m===a?m.splice(p,m.length):m),r?r(null,a,m,l):j.apply(a,m)}))}function St(t){for(var e,i,r,o=t.length,a=n.relative[t[0].type],s=a||n.relative[" "],l=a?1:0,d=bt((function(t){return t===e}),s,!0),u=bt((function(t){return z(e,t)>-1}),s,!0),c=[function(t,i,n){var r=!a&&(n||i!==h)||((e=i).nodeType?d(t,i,n):u(t,i,n));return e=null,r}];l<o;l++)if(i=n.relative[t[l].type])c=[bt(vt(c),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[b]){for(r=++l;r<o&&!n.relative[t[r].type];r++);return xt(l>1&&vt(c),l>1&&kt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(B,"$1"),i,l<r&&St(t.slice(l,r)),r<o&&St(t=t.slice(r)),r<o&&kt(t))}c.push(i)}return vt(c)}return _t.prototype=n.filters=n.pseudos,n.setFilters=new _t,a=st.tokenize=function(t,e){var i,r,o,a,s,l,h,d=C[t+" "];if(d)return e?0:d.slice(0);for(s=t,l=[],h=n.preFilter;s;){for(a in i&&!(r=F.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=W.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(B," ")}),s=s.slice(i.length)),n.filter)!(r=V[a].exec(s))||h[a]&&!(r=h[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return e?s.length:s?st.error(t):C(t,l).slice(0)},s=st.compile=function(t,e){var i,r=[],o=[],s=E[t+" "];if(!s){for(e||(e=a(t)),i=e.length;i--;)(s=St(e[i]))[b]?r.push(s):o.push(s);s=E(t,function(t,e){var i=e.length>0,r=t.length>0,o=function(o,a,s,l,d){var u,p,w,m=0,_="0",k=o&&[],b=[],v=h,x=o||r&&n.find.TAG("*",d),S=y+=null==v?1:Math.random()||.1,C=x.length;for(d&&(h=a==g||a||d);_!==C&&null!=(u=x[_]);_++){if(r&&u){for(p=0,a||u.ownerDocument==g||(c(u),s=!f);w=t[p++];)if(w(u,a||g,s)){l.push(u);break}d&&(y=S)}i&&((u=!w&&u)&&m--,o&&k.push(u))}if(m+=_,i&&_!==m){for(p=0;w=e[p++];)w(k,b,a,s);if(o){if(m>0)for(;_--;)k[_]||b[_]||(b[_]=T.call(l));b=yt(b)}j.apply(l,b),d&&!o&&b.length>0&&m+e.length>1&&st.uniqueSort(l)}return d&&(y=S,h=v),k};return i?ht(o):o}(o,r)),s.selector=t}return s},l=st.select=function(t,e,i,r){var o,l,h,d,u,c="function"==typeof t&&t,g=!r&&a(t=c.selector||t);if(i=i||[],1===g.length){if((l=g[0]=g[0].slice(0)).length>2&&"ID"===(h=l[0]).type&&9===e.nodeType&&f&&n.relative[l[1].type]){if(!(e=(n.find.ID(h.matches[0].replace(et,it),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(o=V.needsContext.test(t)?0:l.length;o--&&(h=l[o],!n.relative[d=h.type]);)if((u=n.find[d])&&(r=u(h.matches[0].replace(et,it),tt.test(l[0].type)&&mt(e.parentNode)||e))){if(l.splice(o,1),!(t=r.length&&kt(l)))return j.apply(i,r),i;break}}return(c||s(t,g))(r,e,!f,i,!e||tt.test(t)&&mt(e.parentNode)||e),i},i.sortStable=b.split("").sort(A).join("")===b,i.detectDuplicates=!!u,c(),i.sortDetached=dt((function(t){return 1&t.compareDocumentPosition(g.createElement("fieldset"))})),dt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&dt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),dt((function(t){return null==t.getAttribute("disabled")}))||ut(P,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),st}(t);v.find=x,v.expr=x.selectors,v.expr[":"]=v.expr.pseudos,v.uniqueSort=v.unique=x.uniqueSort,v.text=x.getText,v.isXMLDoc=x.isXML,v.contains=x.contains,v.escapeSelector=x.escape;var S=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&v(t).is(i))break;n.push(t)}return n},C=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},E=v.expr.match.needsContext;function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Y(t,e,i){return p(e)?v.grep(t,(function(t,n){return!!e.call(t,n,t)!==i})):e.nodeType?v.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?v.grep(t,(function(t){return s.call(e,t)>-1!==i})):v.filter(e,t,i)}v.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?v.find.matchesSelector(n,t)?[n]:[]:v.find.matches(t,v.grep(e,(function(t){return 1===t.nodeType})))},v.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(v(t).filter((function(){for(e=0;e<n;e++)if(v.contains(r[e],this))return!0})));for(i=this.pushStack([]),e=0;e<n;e++)v.find(t,r[e],i);return n>1?v.uniqueSort(i):i},filter:function(t){return this.pushStack(Y(this,t||[],!1))},not:function(t){return this.pushStack(Y(this,t||[],!0))},is:function(t){return!!Y(this,"string"==typeof t&&E.test(t)?v(t):t||[],!1).length}});var X,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,L=v.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||X,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:T.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof v?e[0]:e,v.merge(this,v.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:w,!0)),A.test(n[1])&&v.isPlainObject(e))for(n in e)p(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=w.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):p(t)?void 0!==i.ready?i.ready(t):t(v):v.makeArray(t,this)};L.prototype=v.fn,X=v(w);var j=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function z(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}v.fn.extend({has:function(t){var e=v(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(v.contains(this,e[t]))return!0}))},closest:function(t,e){var i,n=0,r=this.length,o=[],a="string"!=typeof t&&v(t);if(!E.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&v.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?v.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?s.call(v(t),this[0]):s.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),v.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,i){return S(t,"parentNode",i)},next:function(t){return z(t,"nextSibling")},prev:function(t){return z(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,i){return S(t,"nextSibling",i)},prevUntil:function(t,e,i){return S(t,"previousSibling",i)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return null!=t.contentDocument&&n(t.contentDocument)?t.contentDocument:(I(t,"template")&&(t=t.content||t),v.merge([],t.childNodes))}},(function(t,e){v.fn[t]=function(i,n){var r=v.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=v.filter(n,r)),this.length>1&&(R[t]||v.uniqueSort(r),j.test(t)&&r.reverse()),this.pushStack(r)}}));var P=/[^\x20\t\r\n\f]+/g;function O(t){return t}function q(t){throw t}function M(t,e,i,n){var r;try{t&&p(r=t.promise)?r.call(t).done(e).fail(i):t&&p(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}v.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return v.each(t.match(P)||[],(function(t,i){e[i]=!0})),e}(t):v.extend({},t);var e,i,n,r,o=[],a=[],s=-1,l=function(){for(r=r||t.once,n=e=!0;a.length;s=-1)for(i=a.shift();++s<o.length;)!1===o[s].apply(i[0],i[1])&&t.stopOnFalse&&(s=o.length,i=!1);t.memory||(i=!1),e=!1,r&&(o=i?[]:"")},h={add:function(){return o&&(i&&!e&&(s=o.length-1,a.push(i)),function e(i){v.each(i,(function(i,n){p(n)?t.unique&&h.has(n)||o.push(n):n&&n.length&&"string"!==k(n)&&e(n)}))}(arguments),i&&!e&&l()),this},remove:function(){return v.each(arguments,(function(t,e){for(var i;(i=v.inArray(e,o,i))>-1;)o.splice(i,1),i<=s&&s--})),this},has:function(t){return t?v.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=a=[],i||e||(o=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=[t,(i=i||[]).slice?i.slice():i],a.push(i),e||l()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},v.extend({Deferred:function(e){var i=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return v.Deferred((function(e){v.each(i,(function(i,n){var r=p(t[n[4]])&&t[n[4]];o[n[1]]((function(){var t=r&&r.apply(this,arguments);t&&p(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(e,n,r){var o=0;function a(e,i,n,r){return function(){var s=this,l=arguments,h=function(){var t,h;if(!(e<o)){if((t=n.apply(s,l))===i.promise())throw new TypeError("Thenable self-resolution");h=t&&("object"==typeof t||"function"==typeof t)&&t.then,p(h)?r?h.call(t,a(o,i,O,r),a(o,i,q,r)):(o++,h.call(t,a(o,i,O,r),a(o,i,q,r),a(o,i,O,i.notifyWith))):(n!==O&&(s=void 0,l=[t]),(r||i.resolveWith)(s,l))}},d=r?h:function(){try{h()}catch(F_){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(F_,d.stackTrace),e+1>=o&&(n!==q&&(s=void 0,l=[F_]),i.rejectWith(s,l))}};e?d():(v.Deferred.getStackHook&&(d.stackTrace=v.Deferred.getStackHook()),t.setTimeout(d))}}return v.Deferred((function(t){i[0][3].add(a(0,t,p(r)?r:O,t.notifyWith)),i[1][3].add(a(0,t,p(e)?e:O)),i[2][3].add(a(0,t,p(n)?n:q))})).promise()},promise:function(t){return null!=t?v.extend(t,r):r}},o={};return v.each(i,(function(t,e){var a=e[2],s=e[5];r[e[1]]=a.add,s&&a.add((function(){n=s}),i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),a.add(e[3].fire),o[e[0]]=function(){return o[e[0]+"With"](this===o?void 0:this,arguments),this},o[e[0]+"With"]=a.fireWith})),r.promise(o),e&&e.call(o,o),o},when:function(t){var e=arguments.length,i=e,n=Array(i),o=r.call(arguments),a=v.Deferred(),s=function(t){return function(i){n[t]=this,o[t]=arguments.length>1?r.call(arguments):i,--e||a.resolveWith(n,o)}};if(e<=1&&(M(t,a.done(s(i)).resolve,a.reject,!e),"pending"===a.state()||p(o[i]&&o[i].then)))return a.then();for(;i--;)M(o[i],s(i),a.reject);return a.promise()}});var D=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&D.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},v.readyException=function(e){t.setTimeout((function(){throw e}))};var N=v.Deferred();function B(){w.removeEventListener("DOMContentLoaded",B),t.removeEventListener("load",B),v.ready()}v.fn.ready=function(t){return N.then(t).catch((function(t){v.readyException(t)})),this},v.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==t&&--v.readyWait>0||N.resolveWith(w,[v]))}}),v.ready.then=N.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?t.setTimeout(v.ready):(w.addEventListener("DOMContentLoaded",B),t.addEventListener("load",B));var F=function(t,e,i,n,r,o,a){var s=0,l=t.length,h=null==i;if("object"===k(i))for(s in r=!0,i)F(t,e,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,p(n)||(a=!0),h&&(a?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(v(t),i)})),e))for(;s<l;s++)e(t[s],i,a?n:n.call(t[s],s,e(t[s],i)));return r?t:h?e.call(t):l?e(t[0],i):o},W=/^-ms-/,H=/-([a-z])/g;function U(t,e){return e.toUpperCase()}function $(t){return t.replace(W,"ms-").replace(H,U)}var V=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function G(){this.expando=v.expando+G.uid++}G.uid=1,G.prototype={cache:function(t){var e=t[this.expando];return e||(e={},V(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[$(e)]=i;else for(n in e)r[$(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][$(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map($):(e=$(e))in n?[e]:e.match(P)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||v.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!v.isEmptyObject(e)}};var Z=new G,K=new G,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function tt(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(J,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Q.test(t)?JSON.parse(t):t)}(i)}catch(F_){}K.set(t,e,i)}else i=void 0;return i}v.extend({hasData:function(t){return K.hasData(t)||Z.hasData(t)},data:function(t,e,i){return K.access(t,e,i)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,i){return Z.access(t,e,i)},_removeData:function(t,e){Z.remove(t,e)}}),v.fn.extend({data:function(t,e){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=K.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=$(n.slice(5)),tt(o,n,r[n]));Z.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){K.set(this,t)})):F(this,(function(e){var i;if(o&&void 0===e)return void 0!==(i=K.get(o,t))||void 0!==(i=tt(o,t))?i:void 0;this.each((function(){K.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){K.remove(this,t)}))}}),v.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Z.get(t,e),i&&(!n||Array.isArray(i)?n=Z.access(t,e,v.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=v.queue(t,e),n=i.length,r=i.shift(),o=v._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,(function(){v.dequeue(t,e)}),o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Z.get(t,i)||Z.access(t,i,{empty:v.Callbacks("once memory").add((function(){Z.remove(t,[e+"queue",i])}))})}}),v.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?v.queue(this[0],t):void 0===e?this:this.each((function(){var i=v.queue(this,t,e);v._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&v.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){v.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=v.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(i=Z.get(o[a],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(e)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],rt=w.documentElement,ot=function(t){return v.contains(t.ownerDocument,t)},at={composed:!0};rt.getRootNode&&(ot=function(t){return v.contains(t.ownerDocument,t)||t.getRootNode(at)===t.ownerDocument});var st=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===v.css(t,"display")};function lt(t,e,i,n){var r,o,a=20,s=n?function(){return n.cur()}:function(){return v.css(t,e,"")},l=s(),h=i&&i[3]||(v.cssNumber[e]?"":"px"),d=t.nodeType&&(v.cssNumber[e]||"px"!==h&&+l)&&it.exec(v.css(t,e));if(d&&d[3]!==h){for(l/=2,h=h||d[3],d=+l||1;a--;)v.style(t,e,d+h),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),d/=o;d*=2,v.style(t,e,d+h),i=i||[]}return i&&(d=+d||+l||0,r=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=h,n.start=d,n.end=r)),r}var ht={};function dt(t){var e,i=t.ownerDocument,n=t.nodeName,r=ht[n];return r||(e=i.body.appendChild(i.createElement(n)),r=v.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ht[n]=r,r)}function ut(t,e){for(var i,n,r=[],o=0,a=t.length;o<a;o++)(n=t[o]).style&&(i=n.style.display,e?("none"===i&&(r[o]=Z.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&st(n)&&(r[o]=dt(n))):"none"!==i&&(r[o]="none",Z.set(n,"display",i)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}v.fn.extend({show:function(){return ut(this,!0)},hide:function(){return ut(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){st(this)?v(this).show():v(this).hide()}))}});var ct,gt,pt=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,wt=/^$|^module$|\/(?:java|ecma)script/i;ct=w.createDocumentFragment().appendChild(w.createElement("div")),(gt=w.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),ct.appendChild(gt),g.checkClone=ct.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!ct.cloneNode(!0).lastChild.defaultValue,ct.innerHTML="<option></option>",g.option=!!ct.lastChild;var mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?v.merge([t],i):i}function kt(t,e){for(var i=0,n=t.length;i<n;i++)Z.set(t[i],"globalEval",!e||Z.get(e[i],"globalEval"))}mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td,g.option||(mt.optgroup=mt.option=[1,"<select multiple='multiple'>","</select>"]);var bt=/<|&#?\w+;/;function vt(t,e,i,n,r){for(var o,a,s,l,h,d,u=e.createDocumentFragment(),c=[],g=0,p=t.length;g<p;g++)if((o=t[g])||0===o)if("object"===k(o))v.merge(c,o.nodeType?[o]:o);else if(bt.test(o)){for(a=a||u.appendChild(e.createElement("div")),s=(ft.exec(o)||["",""])[1].toLowerCase(),l=mt[s]||mt._default,a.innerHTML=l[1]+v.htmlPrefilter(o)+l[2],d=l[0];d--;)a=a.lastChild;v.merge(c,a.childNodes),(a=u.firstChild).textContent=""}else c.push(e.createTextNode(o));for(u.textContent="",g=0;o=c[g++];)if(n&&v.inArray(o,n)>-1)r&&r.push(o);else if(h=ot(o),a=_t(u.appendChild(o),"script"),h&&kt(a),i)for(d=0;o=a[d++];)wt.test(o.type||"")&&i.push(o);return u}var yt=/^([^.]*)(?:\.(.+)|)/;function xt(){return!0}function St(){return!1}function Ct(t,e){return t===function(){try{return w.activeElement}catch(Sf){}}()==("focus"===e)}function Et(t,e,i,n,r,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof i&&(n=n||i,i=void 0),e)Et(t,s,i,n,e[s],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=St;else if(!r)return t;return 1===o&&(a=r,r=function(t){return v().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=v.guid++)),t.each((function(){v.event.add(this,e,r,n,i)}))}function It(t,e,i){i?(Z.set(t,e,!1),v.event.add(t,e,{namespace:!1,handler:function(t){var n,o,a=Z.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(v.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=r.call(arguments),Z.set(this,e,a),n=i(this,e),this[e](),a!==(o=Z.get(this,e))||n?Z.set(this,e,!1):o={},a!==o)return t.stopImmediatePropagation(),t.preventDefault(),o&&o.value}else a.length&&(Z.set(this,e,{value:v.event.trigger(v.extend(a[0],v.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Z.get(t,e)&&v.event.add(t,e,xt)}v.event={global:{},add:function(t,e,i,n,r){var o,a,s,l,h,d,u,c,g,p,f,w=Z.get(t);if(V(t))for(i.handler&&(i=(o=i).handler,r=o.selector),r&&v.find.matchesSelector(rt,r),i.guid||(i.guid=v.guid++),(l=w.events)||(l=w.events=Object.create(null)),(a=w.handle)||(a=w.handle=function(e){return void 0!==v&&v.event.triggered!==e.type?v.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(P)||[""]).length;h--;)g=f=(s=yt.exec(e[h])||[])[1],p=(s[2]||"").split(".").sort(),g&&(u=v.event.special[g]||{},g=(r?u.delegateType:u.bindType)||g,u=v.event.special[g]||{},d=v.extend({type:g,origType:f,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&v.expr.match.needsContext.test(r),namespace:p.join(".")},o),(c=l[g])||((c=l[g]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,p,a)||t.addEventListener&&t.addEventListener(g,a)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),r?c.splice(c.delegateCount++,0,d):c.push(d),v.event.global[g]=!0)},remove:function(t,e,i,n,r){var o,a,s,l,h,d,u,c,g,p,f,w=Z.hasData(t)&&Z.get(t);if(w&&(l=w.events)){for(h=(e=(e||"").match(P)||[""]).length;h--;)if(g=f=(s=yt.exec(e[h])||[])[1],p=(s[2]||"").split(".").sort(),g){for(u=v.event.special[g]||{},c=l[g=(n?u.delegateType:u.bindType)||g]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=c.length;o--;)d=c[o],!r&&f!==d.origType||i&&i.guid!==d.guid||s&&!s.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(c.splice(o,1),d.selector&&c.delegateCount--,u.remove&&u.remove.call(t,d));a&&!c.length&&(u.teardown&&!1!==u.teardown.call(t,p,w.handle)||v.removeEvent(t,g,w.handle),delete l[g])}else for(g in l)v.event.remove(t,g+e[h],i,n,!0);v.isEmptyObject(l)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,o,a,s=new Array(arguments.length),l=v.event.fix(t),h=(Z.get(this,"events")||Object.create(null))[l.type]||[],d=v.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(a=v.event.handlers.call(this,l,h),e=0;(r=a[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(n=((v.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(t,e){var i,n,r,o,a,s=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(o=[],a={},i=0;i<l;i++)void 0===a[r=(n=e[i]).selector+" "]&&(a[r]=n.needsContext?v(r,this).index(h)>-1:v.find(r,this,null,[h]).length),a[r]&&o.push(n);o.length&&s.push({elem:h,handlers:o})}return h=this,l<e.length&&s.push({elem:h,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(v.Event.prototype,t,{enumerable:!0,configurable:!0,get:p(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[v.expando]?t:new v.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return pt.test(e.type)&&e.click&&I(e,"input")&&It(e,"click",xt),!1},trigger:function(t){var e=this||t;return pt.test(e.type)&&e.click&&I(e,"input")&&It(e,"click"),!0},_default:function(t){var e=t.target;return pt.test(e.type)&&e.click&&I(e,"input")&&Z.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},v.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},v.Event=function(t,e){if(!(this instanceof v.Event))return new v.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?xt:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&v.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},(function(t,e){v.event.special[t]={setup:function(){return It(this,t,Ct),!1},trigger:function(){return It(this,t),!0},_default:function(e){return Z.get(e.target,t)},delegateType:e}})),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){v.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===n||v.contains(n,r))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}})),v.fn.extend({on:function(t,e,i,n){return Et(this,t,e,i,n)},one:function(t,e,i,n){return Et(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,v(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=St),this.each((function(){v.event.remove(this,t,i,e)}))}});var At=/<script|<style|<link/i,Yt=/checked\s*(?:[^=]|=\s*.checked.)/i,Xt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Tt(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&v(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function jt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Rt(t,e){var i,n,r,o,a,s;if(1===e.nodeType){if(Z.hasData(t)&&(s=Z.get(t).events))for(r in Z.remove(e,"handle events"),s)for(i=0,n=s[r].length;i<n;i++)v.event.add(e,r,s[r][i]);K.hasData(t)&&(o=K.access(t),a=v.extend({},o),K.set(e,a))}}function zt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&pt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Pt(t,e,i,n){e=o(e);var r,a,s,l,h,d,u=0,c=t.length,f=c-1,w=e[0],m=p(w);if(m||c>1&&"string"==typeof w&&!g.checkClone&&Yt.test(w))return t.each((function(r){var o=t.eq(r);m&&(e[0]=w.call(this,r,o.html())),Pt(o,e,i,n)}));if(c&&(a=(r=vt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===r.childNodes.length&&(r=a),a||n)){for(l=(s=v.map(_t(r,"script"),Lt)).length;u<c;u++)h=r,u!==f&&(h=v.clone(h,!0,!0),l&&v.merge(s,_t(h,"script"))),i.call(t[u],h,u);if(l)for(d=s[s.length-1].ownerDocument,v.map(s,jt),u=0;u<l;u++)h=s[u],wt.test(h.type||"")&&!Z.access(h,"globalEval")&&v.contains(d,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?v._evalUrl&&!h.noModule&&v._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")},d):_(h.textContent.replace(Xt,""),h,d))}return t}function Ot(t,e,i){for(var n,r=e?v.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||v.cleanData(_t(n)),n.parentNode&&(i&&ot(n)&&kt(_t(n,"script")),n.parentNode.removeChild(n));return t}v.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var n,r,o,a,s=t.cloneNode(!0),l=ot(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||v.isXMLDoc(t)))for(a=_t(s),n=0,r=(o=_t(t)).length;n<r;n++)zt(o[n],a[n]);if(e)if(i)for(o=o||_t(t),a=a||_t(s),n=0,r=o.length;n<r;n++)Rt(o[n],a[n]);else Rt(t,s);return(a=_t(s,"script")).length>0&&kt(a,!l&&_t(t,"script")),s},cleanData:function(t){for(var e,i,n,r=v.event.special,o=0;void 0!==(i=t[o]);o++)if(V(i)){if(e=i[Z.expando]){if(e.events)for(n in e.events)r[n]?v.event.remove(i,n):v.removeEvent(i,n,e.handle);i[Z.expando]=void 0}i[K.expando]&&(i[K.expando]=void 0)}}}),v.fn.extend({detach:function(t){return Ot(this,t,!0)},remove:function(t){return Ot(this,t)},text:function(t){return F(this,(function(t){return void 0===t?v.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Pt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Tt(this,t).appendChild(t)}))},prepend:function(){return Pt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Tt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Pt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Pt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(v.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return v.clone(this,t,e)}))},html:function(t){return F(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!mt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=v.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(v.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(F_){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Pt(this,arguments,(function(e){var i=this.parentNode;v.inArray(this,t)<0&&(v.cleanData(_t(this)),i&&i.replaceChild(e,this))}),t)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){v.fn[t]=function(t){for(var i,n=[],r=v(t),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),v(r[s])[e](i),a.apply(n,i.get());return this.pushStack(n)}}));var qt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),Mt=/^--/,Dt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Nt=function(t,e,i){var n,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in n=i.call(t),e)t.style[r]=o[r];return n},Bt=new RegExp(nt.join("|"),"i"),Ft=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function Wt(t,e,i){var n,r,o,a,s=Mt.test(e),l=t.style;return(i=i||Dt(t))&&(a=i.getPropertyValue(e)||i[e],s&&a&&(a=a.replace(Ft,"$1")||void 0),""!==a||ot(t)||(a=v.style(t,e)),!g.pixelBoxStyles()&&qt.test(a)&&Bt.test(e)&&(n=l.width,r=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=i.width,l.width=n,l.minWidth=r,l.maxWidth=o)),void 0!==a?a+"":a}function Ht(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",rt.appendChild(h).appendChild(d);var e=t.getComputedStyle(d);n="1%"!==e.top,l=12===i(e.marginLeft),d.style.right="60%",a=36===i(e.right),r=36===i(e.width),d.style.position="absolute",o=12===i(d.offsetWidth/3),rt.removeChild(h),d=null}}function i(t){return Math.round(parseFloat(t))}var n,r,o,a,s,l,h=w.createElement("div"),d=w.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===d.style.backgroundClip,v.extend(g,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,i,n,r;return null==s&&(e=w.createElement("table"),i=w.createElement("tr"),n=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="border:1px solid",i.style.height="1px",n.style.height="9px",n.style.display="block",rt.appendChild(e).appendChild(i).appendChild(n),r=t.getComputedStyle(i),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===i.offsetHeight,rt.removeChild(e)),s}}))}();var Ut=["Webkit","Moz","ms"],$t=w.createElement("div").style,Vt={};function Gt(t){var e=v.cssProps[t]||Vt[t];return e||(t in $t?t:Vt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Ut.length;i--;)if((t=Ut[i]+e)in $t)return t}(t)||t)}var Zt=/^(none|table(?!-c[ea]).+)/,Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"};function Jt(t,e,i){var n=it.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function te(t,e,i,n,r,o){var a="width"===e?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=v.css(t,i+nt[a],!0,r)),n?("content"===i&&(l-=v.css(t,"padding"+nt[a],!0,r)),"margin"!==i&&(l-=v.css(t,"border"+nt[a]+"Width",!0,r))):(l+=v.css(t,"padding"+nt[a],!0,r),"padding"!==i?l+=v.css(t,"border"+nt[a]+"Width",!0,r):s+=v.css(t,"border"+nt[a]+"Width",!0,r));return!n&&o>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-l-s-.5))||0),l}function ee(t,e,i){var n=Dt(t),r=(!g.boxSizingReliable()||i)&&"border-box"===v.css(t,"boxSizing",!1,n),o=r,a=Wt(t,e,n),s="offset"+e[0].toUpperCase()+e.slice(1);if(qt.test(a)){if(!i)return a;a="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&I(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===v.css(t,"display",!1,n))&&t.getClientRects().length&&(r="border-box"===v.css(t,"boxSizing",!1,n),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+te(t,e,i||(r?"border":"content"),o,n,a)+"px"}function ie(t,e,i,n,r){return new ie.prototype.init(t,e,i,n,r)}v.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Wt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=$(e),l=Mt.test(e),h=t.style;if(l||(e=Gt(s)),a=v.cssHooks[e]||v.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(t,!1,n))?r:h[e];"string"===(o=typeof i)&&(r=it.exec(i))&&r[1]&&(i=lt(t,e,r),o="number"),null!=i&&i==i&&("number"!==o||l||(i+=r&&r[3]||(v.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(i=a.set(t,i,n))||(l?h.setProperty(e,i):h[e]=i))}},css:function(t,e,i,n){var r,o,a,s=$(e);return Mt.test(e)||(e=Gt(s)),(a=v.cssHooks[e]||v.cssHooks[s])&&"get"in a&&(r=a.get(t,!0,i)),void 0===r&&(r=Wt(t,e,n)),"normal"===r&&e in Qt&&(r=Qt[e]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),v.each(["height","width"],(function(t,e){v.cssHooks[e]={get:function(t,i,n){if(i)return!Zt.test(v.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ee(t,e,n):Nt(t,Kt,(function(){return ee(t,e,n)}))},set:function(t,i,n){var r,o=Dt(t),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||n)&&"border-box"===v.css(t,"boxSizing",!1,o),l=n?te(t,e,n,s,o):0;return s&&a&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-te(t,e,"border",!1,o)-.5)),l&&(r=it.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=v.css(t,e)),Jt(0,i,l)}}})),v.cssHooks.marginLeft=Ht(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-Nt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),v.each({margin:"",padding:"",border:"Width"},(function(t,e){v.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+nt[n]+e]=o[n]||o[n-2]||o[0];return r}},"margin"!==t&&(v.cssHooks[t+e].set=Jt)})),v.fn.extend({css:function(t,e){return F(this,(function(t,e,i){var n,r,o={},a=0;if(Array.isArray(e)){for(n=Dt(t),r=e.length;a<r;a++)o[e[a]]=v.css(t,e[a],!1,n);return o}return void 0!==i?v.style(t,e,i):v.css(t,e)}),t,e,arguments.length>1)}}),v.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||v.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(v.cssNumber[i]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,i=ie.propHooks[this.prop];return this.options.duration?this.pos=e=v.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=v.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){v.fx.step[t.prop]?v.fx.step[t.prop](t):1!==t.elem.nodeType||!v.cssHooks[t.prop]&&null==t.elem.style[Gt(t.prop)]?t.elem[t.prop]=t.now:v.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},v.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},v.fx=ie.prototype.init,v.fx.step={};var ne,re,oe=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function se(){re&&(!1===w.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(se):t.setTimeout(se,v.fx.interval),v.fx.tick())}function le(){return t.setTimeout((function(){ne=void 0})),ne=Date.now()}function he(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=nt[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function de(t,e,i){for(var n,r=(ue.tweeners[e]||[]).concat(ue.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,e,t))return n}function ue(t,e,i){var n,r,o=0,a=ue.prefilters.length,s=v.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=ne||le(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),o=0,a=h.tweens.length;o<a;o++)h.tweens[o].run(n);return s.notifyWith(t,[h,n,i]),n<1&&a?i:(a||s.notifyWith(t,[h,1,0]),s.resolveWith(t,[h]),!1)},h=s.promise({elem:t,props:v.extend({},e),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},i),originalProperties:e,originalOptions:i,startTime:ne||le(),duration:i.duration,tweens:[],createTween:function(e,i){var n=v.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)h.tweens[i].run(1);return e?(s.notifyWith(t,[h,1,0]),s.resolveWith(t,[h,e])):s.rejectWith(t,[h,e]),this}}),d=h.props;for(!function(t,e){var i,n,r,o,a;for(i in t)if(r=e[n=$(i)],o=t[i],Array.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(a=v.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete t[n],o)i in t||(t[i]=o[i],e[i]=r);else e[n]=r}(d,h.opts.specialEasing);o<a;o++)if(n=ue.prefilters[o].call(h,t,d,h.opts))return p(n.stop)&&(v._queueHooks(h.elem,h.opts.queue).stop=n.stop.bind(n)),n;return v.map(d,de,h),p(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),v.fx.timer(v.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}v.Animation=v.extend(ue,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return lt(i.elem,t,it.exec(e),i),i}]},tweener:function(t,e){p(t)?(e=t,t=["*"]):t=t.match(P);for(var i,n=0,r=t.length;n<r;n++)i=t[n],ue.tweeners[i]=ue.tweeners[i]||[],ue.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,r,o,a,s,l,h,d,u="width"in e||"height"in e,c=this,g={},p=t.style,f=t.nodeType&&st(t),w=Z.get(t,"fxshow");for(n in i.queue||(null==(a=v._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,c.always((function(){c.always((function(){a.unqueued--,v.queue(t,"fx").length||a.empty.fire()}))}))),e)if(r=e[n],oe.test(r)){if(delete e[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!w||void 0===w[n])continue;f=!0}g[n]=w&&w[n]||v.style(t,n)}if((l=!v.isEmptyObject(e))||!v.isEmptyObject(g))for(n in u&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=w&&w.display)&&(h=Z.get(t,"display")),"none"===(d=v.css(t,"display"))&&(h?d=h:(ut([t],!0),h=t.style.display||h,d=v.css(t,"display"),ut([t]))),("inline"===d||"inline-block"===d&&null!=h)&&"none"===v.css(t,"float")&&(l||(c.done((function(){p.display=h})),null==h&&(d=p.display,h="none"===d?"":d)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",c.always((function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}))),l=!1,g)l||(w?"hidden"in w&&(f=w.hidden):w=Z.access(t,"fxshow",{display:h}),o&&(w.hidden=!f),f&&ut([t],!0),c.done((function(){for(n in f||ut([t]),Z.remove(t,"fxshow"),g)v.style(t,n,g[n])}))),l=de(f?w[n]:0,n,c),n in w||(w[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ue.prefilters.unshift(t):ue.prefilters.push(t)}}),v.speed=function(t,e,i){var n=t&&"object"==typeof t?v.extend({},t):{complete:i||!i&&e||p(t)&&t,duration:t,easing:i&&e||e&&!p(e)&&e};return v.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in v.fx.speeds?n.duration=v.fx.speeds[n.duration]:n.duration=v.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){p(n.old)&&n.old.call(this),n.queue&&v.dequeue(this,n.queue)},n},v.fn.extend({fadeTo:function(t,e,i,n){return this.filter(st).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=v.isEmptyObject(t),o=v.speed(e,i,n),a=function(){var e=ue(this,v.extend({},t),o);(r||Z.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",o=v.timers,a=Z.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&ae.test(r)&&n(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||v.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=Z.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=v.timers,a=n?n.length:0;for(i.finish=!0,v.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),v.each(["toggle","show","hide"],(function(t,e){var i=v.fn[e];v.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(he(e,!0),t,n,r)}})),v.each({slideDown:he("show"),slideUp:he("hide"),slideToggle:he("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){v.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),v.timers=[],v.fx.tick=function(){var t,e=0,i=v.timers;for(ne=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||v.fx.stop(),ne=void 0},v.fx.timer=function(t){v.timers.push(t),v.fx.start()},v.fx.interval=13,v.fx.start=function(){re||(re=!0,se())},v.fx.stop=function(){re=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(e,i){return e=v.fx&&v.fx.speeds[e]||e,i=i||"fx",this.queue(i,(function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}}))},function(){var t=w.createElement("input"),e=w.createElement("select").appendChild(w.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=w.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var ce,ge=v.expr.attrHandle;v.fn.extend({attr:function(t,e){return F(this,v.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){v.removeAttr(this,t)}))}}),v.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?v.prop(t,e,i):(1===o&&v.isXMLDoc(t)||(r=v.attrHooks[e.toLowerCase()]||(v.expr.match.bool.test(e)?ce:void 0)),void 0!==i?null===i?void v.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=v.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&I(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(P);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),ce={set:function(t,e,i){return!1===e?v.removeAttr(t,i):t.setAttribute(i,i),i}},v.each(v.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=ge[e]||v.find.attr;ge[e]=function(t,e,n){var r,o,a=e.toLowerCase();return n||(o=ge[a],ge[a]=r,r=null!=i(t,e,n)?a:null,ge[a]=o),r}}));var pe=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function we(t){return(t.match(P)||[]).join(" ")}function me(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(P)||[]}v.fn.extend({prop:function(t,e){return F(this,v.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[v.propFix[t]||t]}))}}),v.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&v.isXMLDoc(t)||(e=v.propFix[e]||e,r=v.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=v.find.attr(t,"tabindex");return e?parseInt(e,10):pe.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(v.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){v.propFix[this.toLowerCase()]=this})),v.fn.extend({addClass:function(t){var e,i,n,r,o,a;return p(t)?this.each((function(e){v(this).addClass(t.call(this,e,me(this)))})):(e=_e(t)).length?this.each((function(){if(n=me(this),i=1===this.nodeType&&" "+we(n)+" "){for(o=0;o<e.length;o++)r=e[o],i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=we(i),n!==a&&this.setAttribute("class",a)}})):this},removeClass:function(t){var e,i,n,r,o,a;return p(t)?this.each((function(e){v(this).removeClass(t.call(this,e,me(this)))})):arguments.length?(e=_e(t)).length?this.each((function(){if(n=me(this),i=1===this.nodeType&&" "+we(n)+" "){for(o=0;o<e.length;o++)for(r=e[o];i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=we(i),n!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(t,e){var i,n,r,o,a=typeof t,s="string"===a||Array.isArray(t);return p(t)?this.each((function(i){v(this).toggleClass(t.call(this,i,me(this),e),e)})):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(i=_e(t),this.each((function(){if(s)for(o=v(this),r=0;r<i.length;r++)n=i[r],o.hasClass(n)?o.removeClass(n):o.addClass(n);else void 0!==t&&"boolean"!==a||((n=me(this))&&Z.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===t?"":Z.get(this,"__className__")||""))})))},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+we(me(i))+" ").indexOf(e)>-1)return!0;return!1}});var ke=/\r/g;v.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=p(t),this.each((function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,v(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=v.map(r,(function(t){return null==t?"":t+""}))),(e=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=v.valHooks[r.type]||v.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(ke,""):null==i?"":i:void 0}}),v.extend({valHooks:{option:{get:function(t){var e=v.find.attr(t,"value");return null!=e?e:we(v.text(t))}},select:{get:function(t){var e,i,n,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(n=o<0?l:a?o:0;n<l;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(e=v(i).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=v.makeArray(e),a=r.length;a--;)((n=r[a]).selected=v.inArray(v.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),v.each(["radio","checkbox"],(function(){v.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=v.inArray(v(t).val(),e)>-1}},g.checkOn||(v.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),g.focusin="onfocusin"in t;var be=/^(?:focusinfocus|focusoutblur)$/,ve=function(t){t.stopPropagation()};v.extend(v.event,{trigger:function(e,i,n,r){var o,a,s,l,h,u,c,g,m=[n||w],_=d.call(e,"type")?e.type:e,k=d.call(e,"namespace")?e.namespace.split("."):[];if(a=g=s=n=n||w,3!==n.nodeType&&8!==n.nodeType&&!be.test(_+v.event.triggered)&&(_.indexOf(".")>-1&&(k=_.split("."),_=k.shift(),k.sort()),h=_.indexOf(":")<0&&"on"+_,(e=e[v.expando]?e:new v.Event(_,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=k.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:v.makeArray(i,[e]),c=v.event.special[_]||{},r||!c.trigger||!1!==c.trigger.apply(n,i))){if(!r&&!c.noBubble&&!f(n)){for(l=c.delegateType||_,be.test(l+_)||(a=a.parentNode);a;a=a.parentNode)m.push(a),s=a;s===(n.ownerDocument||w)&&m.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=m[o++])&&!e.isPropagationStopped();)g=a,e.type=o>1?l:c.bindType||_,(u=(Z.get(a,"events")||Object.create(null))[e.type]&&Z.get(a,"handle"))&&u.apply(a,i),(u=h&&a[h])&&u.apply&&V(a)&&(e.result=u.apply(a,i),!1===e.result&&e.preventDefault());return e.type=_,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(m.pop(),i)||!V(n)||h&&p(n[_])&&!f(n)&&((s=n[h])&&(n[h]=null),v.event.triggered=_,e.isPropagationStopped()&&g.addEventListener(_,ve),n[_](),e.isPropagationStopped()&&g.removeEventListener(_,ve),v.event.triggered=void 0,s&&(n[h]=s)),e.result}},simulate:function(t,e,i){var n=v.extend(new v.Event,i,{type:t,isSimulated:!0});v.event.trigger(n,null,e)}}),v.fn.extend({trigger:function(t,e){return this.each((function(){v.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return v.event.trigger(t,e,i,!0)}}),g.focusin||v.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){v.event.simulate(e,t.target,v.event.fix(t))};v.event.special[e]={setup:function(){var n=this.ownerDocument||this.document||this,r=Z.access(n,e);r||n.addEventListener(t,i,!0),Z.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,r=Z.access(n,e)-1;r?Z.access(n,e,r):(n.removeEventListener(t,i,!0),Z.remove(n,e))}}}));var ye=t.location,xe={guid:Date.now()},Se=/\?/;v.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(F_){}return n=i&&i.getElementsByTagName("parsererror")[0],i&&!n||v.error("Invalid XML: "+(n?v.map(n.childNodes,(function(t){return t.textContent})).join("\n"):e)),i};var Ce=/\[\]$/,Ee=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;function Ye(t,e,i,n){var r;if(Array.isArray(e))v.each(e,(function(e,r){i||Ce.test(t)?n(t,r):Ye(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)}));else if(i||"object"!==k(e))n(t,e);else for(r in e)Ye(t+"["+r+"]",e[r],i,n)}v.param=function(t,e){var i,n=[],r=function(t,e){var i=p(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!v.isPlainObject(t))v.each(t,(function(){r(this.name,this.value)}));else for(i in t)Ye(i,t[i],e,r);return n.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=v.prop(this,"elements");return t?v.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!v(this).is(":disabled")&&Ae.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!pt.test(t))})).map((function(t,e){var i=v(this).val();return null==i?null:Array.isArray(i)?v.map(i,(function(t){return{name:e.name,value:t.replace(Ee,"\r\n")}})):{name:e.name,value:i.replace(Ee,"\r\n")}})).get()}});var Xe=/%20/g,Te=/#.*$/,Le=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,Re=/^(?:GET|HEAD)$/,ze=/^\/\//,Pe={},Oe={},qe="*/".concat("*"),Me=w.createElement("a");function De(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(P)||[];if(p(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Ne(t,e,i,n){var r={},o=t===Oe;function a(s){var l;return r[s]=!0,v.each(t[s]||[],(function(t,s){var h=s(e,i,n);return"string"!=typeof h||o||r[h]?o?!(l=h):void 0:(e.dataTypes.unshift(h),a(h),!1)})),l}return a(e.dataTypes[0])||!r["*"]&&a("*")}function Be(t,e){var i,n,r=v.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&v.extend(!0,t,n),t}Me.href=ye.href,v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ye.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ye.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Be(Be(t,v.ajaxSettings),e):Be(v.ajaxSettings,t)},ajaxPrefilter:De(Pe),ajaxTransport:De(Oe),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0),i=i||{};var n,r,o,a,s,l,h,d,u,c,g=v.ajaxSetup({},i),p=g.context||g,f=g.context&&(p.nodeType||p.jquery)?v(p):v.event,m=v.Deferred(),_=v.Callbacks("once memory"),k=g.statusCode||{},b={},y={},x="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(h){if(!a)for(a={};e=je.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return h?o:null},setRequestHeader:function(t,e){return null==h&&(t=y[t.toLowerCase()]=y[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==h&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)S.always(t[S.status]);else for(e in t)k[e]=[k[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),C(0,e),this}};if(m.promise(S),g.url=((e||g.url||ye.href)+"").replace(ze,ye.protocol+"//"),g.type=i.method||i.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(P)||[""],null==g.crossDomain){l=w.createElement("a");try{l.href=g.url,l.href=l.href,g.crossDomain=Me.protocol+"//"+Me.host!=l.protocol+"//"+l.host}catch(F_){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=v.param(g.data,g.traditional)),Ne(Pe,g,i,S),h)return S;for(u in(d=v.event&&g.global)&&0==v.active++&&v.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Re.test(g.type),r=g.url.replace(Te,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Xe,"+")):(c=g.url.slice(r.length),g.data&&(g.processData||"string"==typeof g.data)&&(r+=(Se.test(r)?"&":"?")+g.data,delete g.data),!1===g.cache&&(r=r.replace(Le,"$1"),c=(Se.test(r)?"&":"?")+"_="+xe.guid+++c),g.url=r+c),g.ifModified&&(v.lastModified[r]&&S.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&S.setRequestHeader("If-None-Match",v.etag[r])),(g.data&&g.hasContent&&!1!==g.contentType||i.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+qe+"; q=0.01":""):g.accepts["*"]),g.headers)S.setRequestHeader(u,g.headers[u]);if(g.beforeSend&&(!1===g.beforeSend.call(p,S,g)||h))return S.abort();if(x="abort",_.add(g.complete),S.done(g.success),S.fail(g.error),n=Ne(Oe,g,i,S)){if(S.readyState=1,d&&f.trigger("ajaxSend",[S,g]),h)return S;g.async&&g.timeout>0&&(s=t.setTimeout((function(){S.abort("timeout")}),g.timeout));try{h=!1,n.send(b,C)}catch(F_){if(h)throw F_;C(-1,F_)}}else C(-1,"No Transport");function C(e,i,a,l){var u,c,w,b,y,x=i;h||(h=!0,s&&t.clearTimeout(s),n=void 0,o=l||"",S.readyState=e>0?4:0,u=e>=200&&e<300||304===e,a&&(b=function(t,e,i){for(var n,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}(g,S,a)),!u&&v.inArray("script",g.dataTypes)>-1&&v.inArray("json",g.dataTypes)<0&&(g.converters["text script"]=function(){}),b=function(t,e,i,n){var r,o,a,s,l,h={},d=t.dataTypes.slice();if(d[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(o=d.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=h[l+" "+o]||h["* "+o]))for(r in h)if((s=r.split(" "))[1]===o&&(a=h[l+" "+s[0]]||h["* "+s[0]])){!0===a?a=h[r]:!0!==h[r]&&(o=s[0],d.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(F_){return{state:"parsererror",error:a?F_:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}(g,b,S,u),u?(g.ifModified&&((y=S.getResponseHeader("Last-Modified"))&&(v.lastModified[r]=y),(y=S.getResponseHeader("etag"))&&(v.etag[r]=y)),204===e||"HEAD"===g.type?x="nocontent":304===e?x="notmodified":(x=b.state,c=b.data,u=!(w=b.error))):(w=x,!e&&x||(x="error",e<0&&(e=0))),S.status=e,S.statusText=(i||x)+"",u?m.resolveWith(p,[c,x,S]):m.rejectWith(p,[S,x,w]),S.statusCode(k),k=void 0,d&&f.trigger(u?"ajaxSuccess":"ajaxError",[S,g,u?c:w]),_.fireWith(p,[S,x]),d&&(f.trigger("ajaxComplete",[S,g]),--v.active||v.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,i){return v.get(t,e,i,"json")},getScript:function(t,e){return v.get(t,void 0,e,"script")}}),v.each(["get","post"],(function(t,e){v[e]=function(t,i,n,r){return p(i)&&(r=r||n,n=i,i=void 0),v.ajax(v.extend({url:t,type:e,dataType:r,data:i,success:n},v.isPlainObject(t)&&t))}})),v.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),v._evalUrl=function(t,e,i){return v.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){v.globalEval(t,e,i)}})},v.fn.extend({wrapAll:function(t){var e;return this[0]&&(p(t)&&(t=t.call(this[0])),e=v(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return p(t)?this.each((function(e){v(this).wrapInner(t.call(this,e))})):this.each((function(){var e=v(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=p(t);return this.each((function(i){v(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){v(this).replaceWith(this.childNodes)})),this}}),v.expr.pseudos.hidden=function(t){return!v.expr.pseudos.visible(t)},v.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(F_){}};var Fe={0:200,1223:204},We=v.ajaxSettings.xhr();g.cors=!!We&&"withCredentials"in We,g.ajax=We=!!We,v.ajaxTransport((function(e){var i,n;if(g.cors||We&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);i=function(t){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Fe[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=s.ontimeout=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout((function(){i&&n()}))},i=i("abort");try{s.send(e.hasContent&&e.data||null)}catch(F_){if(i)throw F_}},abort:function(){i&&i()}}})),v.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return v.globalEval(t),t}}}),v.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),v.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(n,r){e=v("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),w.head.appendChild(e[0])},abort:function(){i&&i()}}}));var He,Ue=[],$e=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ue.pop()||v.expando+"_"+xe.guid++;return this[t]=!0,t}}),v.ajaxPrefilter("json jsonp",(function(e,i,n){var r,o,a,s=!1!==e.jsonp&&($e.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$e.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=p(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($e,"$1"+r):!1!==e.jsonp&&(e.url+=(Se.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||v.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},n.always((function(){void 0===o?v(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,Ue.push(r)),a&&p(o)&&o(a[0]),a=o=void 0})),"script"})),g.createHTMLDocument=((He=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===He.childNodes.length),v.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(g.createHTMLDocument?((n=(e=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,e.head.appendChild(n)):e=w),o=!i&&[],(r=A.exec(t))?[e.createElement(r[1])]:(r=vt([t],e,o),o&&o.length&&v(o).remove(),v.merge([],r.childNodes)));var n,r,o},v.fn.load=function(t,e,i){var n,r,o,a=this,s=t.indexOf(" ");return s>-1&&(n=we(t.slice(s)),t=t.slice(0,s)),p(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&v.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(n?v("<div>").append(v.parseHTML(t)).find(n):t)})).always(i&&function(t,e){a.each((function(){i.apply(this,o||[t.responseText,e,t])}))}),this},v.expr.pseudos.animated=function(t){return v.grep(v.timers,(function(e){return t===e.elem})).length},v.offset={setOffset:function(t,e,i){var n,r,o,a,s,l,h=v.css(t,"position"),d=v(t),u={};"static"===h&&(t.style.position="relative"),s=d.offset(),o=v.css(t,"top"),l=v.css(t,"left"),("absolute"===h||"fixed"===h)&&(o+l).indexOf("auto")>-1?(a=(n=d.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),p(e)&&(e=e.call(t,i,v.extend({},s))),null!=e.top&&(u.top=e.top-s.top+a),null!=e.left&&(u.left=e.left-s.left+r),"using"in e?e.using.call(t,u):d.css(u)}},v.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){v.offset.setOffset(this,t,e)}));var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===v.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===v.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=v(t).offset()).top+=v.css(t,"borderTopWidth",!0),r.left+=v.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-v.css(n,"marginTop",!0),left:e.left-r.left-v.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===v.css(t,"position");)t=t.offsetParent;return t||rt}))}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;v.fn[t]=function(n){return F(this,(function(t,n,r){var o;if(f(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===r)return o?o[e]:t[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r}),t,n,arguments.length)}})),v.each(["top","left"],(function(t,e){v.cssHooks[e]=Ht(g.pixelPosition,(function(t,i){if(i)return i=Wt(t,e),qt.test(i)?v(t).position()[e]+"px":i}))})),v.each({Height:"height",Width:"width"},(function(t,e){v.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){v.fn[n]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(!0===r||!0===o?"margin":"border");return F(this,(function(e,i,r){var o;return f(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?v.css(e,i,s):v.style(e,i,r,s)}),e,a?r:void 0,a)}}))})),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){v.fn[e]=function(t){return this.on(e,t)}})),v.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){v.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var Ve=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(t,e){var i,n,o;if("string"==typeof e&&(i=t[e],e=t,t=i),p(t))return n=r.call(arguments,2),o=function(){return t.apply(e||this,n.concat(r.call(arguments)))},o.guid=t.guid=t.guid||v.guid++,o},v.holdReady=function(t){t?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=I,v.isFunction=p,v.isWindow=f,v.camelCase=$,v.type=k,v.now=Date.now,v.isNumeric=function(t){var e=v.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},v.trim=function(t){return null==t?"":(t+"").replace(Ve,"$1")};var Ge=t.jQuery,Ze=t.$;return v.noConflict=function(e){return t.$===v&&(t.$=Ze),e&&t.jQuery===v&&(t.jQuery=Ge),v},void 0===e&&(t.jQuery=t.$=v),v}))}({get exports(){return $c},set exports(t){$c=t}});class Vc{constructor(t,e){this.time=t,this.duration=e}isOver(t){return t-this.time>this.duration}}class Gc{constructor(e){t(this,"container",$c("#bubbles")),t(this,"bubbles",{}),this.game=e}create(e,i,n=5e3,r){let o=this.bubbles[e];if(o)return o.update(i,Date.now());this.bubbles[e]=new class{constructor(e,i,n=5e3,r){t(this,"element",void 0),t(this,"duration",5e3),t(this,"timer",void 0),t(this,"static",!1),this.instance=e,this.position=r,this.timer=new Vc(Date.now(),n),this.element=this.createBlob(e,i),this.static=!!this.position}update(t,e){this.timer.time=e,$c(this.element).find("p").html(t)}isOver(t){return this.timer.isOver(t)}destroy(){$c(this.element).remove()}createBlob(t,e){return $c(`<div id="${t}" class="bubble"><p>${e}</p><div class="bubble-tip"></div></div>`)}}(e,i,n,r),this.bubbles[e].element.appendTo(this.container)}setTo(t,e,i){let n=this.bubbles[t],{zoomFactor:r}=this.game.camera,o=this.game.renderer.tileSize*r,a=(parseInt(n.element.css("width"))+24)/2-o/2;e=(e-this.game.camera.x)*r,i=(i-this.game.camera.y)*r-2*o- -20,n.element.css({left:e-a+3+"px",top:`${i}px`})}update(t){ve.each(this.bubbles,(e=>{let i=this.game.entities.get(e.instance);i&&this.setTo(i.instance,i.x,i.y),e.static&&this.setTo(e.instance,e.position.x,e.position.y),e.isOver(t)&&this.destroy(e)}))}clear(t){this.bubbles[t]&&this.destroy(this.bubbles[t])}destroy(t){t.destroy(),delete this.bubbles[t.instance]}clean(){ve.each(this.bubbles,(t=>t.destroy())),this.bubbles={}}}class Zc{constructor(){t(this,"startValue",0),t(this,"endValue",0),t(this,"duration",0),t(this,"inProgress",!1),t(this,"startTime",void 0),t(this,"updateCallback",void 0),t(this,"stopCallback",void 0)}start(t,e,i,n,r,o){this.startTime=t,this.startValue=e,this.endValue=i,this.duration=n,this.updateCallback=r,this.stopCallback=o,this.inProgress=!0}step(t){if(!this.inProgress)return;let e=t-this.startTime;e>this.duration&&(e=this.duration);let i=this.endValue-this.startValue,n=Math.round(this.startValue+i/this.duration*e);e===this.duration||n===this.endValue?(this.inProgress=!1,this.stopCallback?.()):this.updateCallback?.(n)}}class Kc{constructor(e,i,n,r,o){t(this,"frame",{index:0,x:0,y:0}),t(this,"count",1),t(this,"lastTime",Date.now()),t(this,"speed",100),t(this,"endCallback",void 0),this.name=e,this.length=i,this.row=n,this.width=r,this.height=o,this.reset()}update(t){if(this.canAnimate()){if(this.lastTime=t,this.frame.index>=this.length-1)return this.count>0&&this.count--,this.count<=0&&this.endCallback?.(),this.reset();this.frame.index++,this.frame.x=this.frame.index*this.width,this.frame.y=this.row*this.height}}setCount(t,e){this.count=t,this.endCallback=e}setSpeed(t){this.speed=t}setRow(t){this.row=t}canAnimate(){return Date.now()-this.lastTime>this.speed}reset(){this.lastTime=Date.now(),this.frame={index:0,x:0,y:this.row*this.height}}}class Qc{constructor(e="",i){t(this,"x",0),t(this,"y",0),t(this,"gridX",0),t(this,"gridY",0),t(this,"name",""),t(this,"region",-1),t(this,"sprite",void 0),t(this,"spriteFlipX",!1),t(this,"spriteFlipY",!1),t(this,"animation",void 0),t(this,"animations",void 0),t(this,"idleSpeed",450),t(this,"shadowOffsetY",0),t(this,"hidden",!1),t(this,"spriteLoaded",!1),t(this,"visible",!0),t(this,"fading",!1),t(this,"angled",!1),t(this,"angle",0),t(this,"hasCounter",!1),t(this,"countdownTime",0),t(this,"counter",0),t(this,"fadingDuration",1e3),t(this,"orientation",void 0),t(this,"fadingTime",void 0),t(this,"blinking",void 0),t(this,"normalSprite",void 0),t(this,"hurtSprite",void 0),t(this,"ready",!1),t(this,"attackRange",1),t(this,"hitPoints",0),t(this,"maxHitPoints",0),t(this,"mana",0),t(this,"maxMana",0),t(this,"level",1),t(this,"experience",0),t(this,"movementSpeed",250),t(this,"frozen",!1),t(this,"teleporting",!1),t(this,"dead",!1),t(this,"pvp",!1),t(this,"nameColour",void 0),t(this,"customScale",void 0),t(this,"nextGridX",void 0),t(this,"nextGridY",void 0),t(this,"fadingAlpha",void 0),t(this,"lastUpdate",Date.now()),this.instance=e,this.type=i}fadeIn(t){this.fading=!0,this.fadingTime=t}blink(t=150){this.blinking=window.setInterval((()=>this.toggleVisibility()),t)}stopBlinking(){this.blinking&&clearInterval(this.blinking),this.setVisible(!0)}idle(){}animateDeath(t,e=120,i=1){this.setAnimation("death",e,i,t)}setSprite(t){!t||this.sprite&&this.sprite.name===t.name||(this.isPlayer()&&(t.loadHurt=!0),t.loaded||t.load(),t.name=t.id,this.sprite=t,this.normalSprite=this.sprite,this.animations=t.createAnimations(),t.onLoad((()=>{t.loadHurt&&(this.hurtSprite=t.hurtSprite),this.customScale&&(this.sprite.offsetX*=this.customScale,this.sprite.offsetY*=this.customScale)})),this.spriteLoaded=!0,this.readyCallback?.())}setAnimation(t,e=this.idleSpeed,i=0,n){if(!this.spriteLoaded||this.animation?.name===t)return;let r=this.animations[t];r&&(this.animation=r,t.startsWith("atk")&&this.animation.reset(),this.animation.setSpeed(e),this.animation.setCount(i,n||(()=>this.idle())))}setPosition(t,e){this.x=t,this.y=e}setGridPosition(t,e){this.gridX=t,this.gridY=e,this.region=J.getRegion(t,e),this.setPosition(t*J.tileSize,e*J.tileSize)}setCountdown(t){this.counter=t,this.countdownTime=Date.now(),this.hasCounter=!0}setVisible(t){this.visible=t}setIdleSpeed(t){this.idleSpeed=t}getDistance(t){let{gridX:e,gridY:i}=this;return Math.abs(e-t.gridX)+Math.abs(i-t.gridY)}getAngle(){return this.angle}toggleVisibility(){this.setVisible(!this.visible)}isVisible(){return this.visible}drawNames(){return!0}hasShadow(){return!1}hasMedal(){return!1}isPlayer(){return this.type===R.Player}isMob(){return this.type===R.Mob}isNPC(){return this.type===R.NPC}isItem(){return this.type===R.Item}isChest(){return this.type===R.Chest}isProjectile(){return this.type===R.Projectile}isObject(){return this.type===R.Object}isModerator(){return!1}isAdmin(){return!1}}class Jc{constructor(e){t(this,"game",void 0),t(this,"entities",void 0),this.entity=e}load(t){this.setGame(t),(this.entity&&t||this.entity instanceof tg)&&(this.entity.onRequestPath(((e,i)=>this.entity.gridX===e&&this.entity.gridY===i?[]:t.findPath(this.entity,e,i))),this.entity.onBeforeStep((()=>this.entities.unregisterPosition(this.entity))),this.entity.onStep((()=>{this.entities.registerPosition(this.entity),this.entity.forEachAttacker((t=>{if(t.target)return t.target.instance!==this.entity.instance?this.entity.removeAttacker(t):void(t.canAttackTarget()||t.follow(this.entity))})),this.sendMovement(),this.entity.hasTarget()&&this.entity.getDistance(this.entity.target)<=this.entity.attackRange&&this.entity.stop(!0)})),this.entity.onFallback(((e,i)=>{t.teleport(this.entity,e,i)})),this.entity.onStopPathing((()=>this.sendMovement())),this.entity.ready=!0)}setGame(t){this.game||=t,this.setEntities(this.game.entities)}setEntities(t){this.entities||=t}sendMovement(){let{entity:t,game:e}=this;t.isMob()&&(t.hasTarget()||t.hasAttackers())&&e.socket.send(V.Movement,{opcode:u.Entity,targetInstance:t.instance,requestX:t.gridX,requestY:t.gridY})}}class tg extends Qc{constructor(e,i){super(e,i),t(this,"healthBarVisible",!1),t(this,"moving",!1),t(this,"following",!1),t(this,"stunned",!1),t(this,"interrupted",!1),t(this,"path",null),t(this,"target",null),t(this,"lastTarget",""),t(this,"attackers",{}),t(this,"movement",new Zc),t(this,"attackAnimationSpeed",50),t(this,"walkAnimationSpeed",120),t(this,"nextGridX",-1),t(this,"nextGridY",-1),t(this,"movementSpeed",-1),t(this,"attackRange",1),t(this,"frozen",!1),t(this,"dead",!1),t(this,"orientation",j.Down),t(this,"effect",B.None),t(this,"destination",void 0),t(this,"newDestination",void 0),t(this,"step",void 0),t(this,"healthBarTimeout",void 0),t(this,"effects",{[B.Critical]:{key:"effect-critical",animation:new Kc("effect",10,0,48,48)},[B.Terror]:{key:"effect-terror",animation:new Kc("effect",8,0,64,64)},[B.Stun]:{key:"effect-stun",animation:new Kc("effect",6,0,48,48),perpetual:!0},[B.Healing]:{key:"effect-heal",animation:new Kc("effect",8,0,64,64)},[B.Fireball]:{key:"effect-fireball",animation:new Kc("effect",8,0,64,64)},[B.Iceball]:{key:"effect-iceball",animation:new Kc("effect",8,0,64,64)},[B.Burning]:{key:"effect-burn",animation:new Kc("effect",4,0,64,64),perpetual:!0,speed:150},[B.Freezing]:{key:"effect-freeze",animation:new Kc("effect",4,0,64,64),perpetual:!0,speed:150},[B.Poisonball]:{key:"effect-poisonball",animation:new Kc("effect",10,0,40,40),speed:175},[B.Boulder]:{key:"effect-boulder",animation:new Kc("effect",7,0,32,32)}}),t(this,"fallbackCallback",void 0),t(this,"hitPointsCallback",void 0),t(this,"forced",void 0),t(this,"handler",new Jc(this)),this.loadAnimations()}loadAnimations(){ve.each(this.effects,(t=>{t.animation.setSpeed(t.speed||50),t.animation.setCount(1,(()=>{t.perpetual||this.removeEffect(),t.animation.reset(),t.animation.count=1}))}))}setAnimation(t,e=120,i=0,n){"death"!==this.animation?.name&&(this.spriteFlipX=!1,this.spriteFlipY=!1,["atk","walk","idle"].includes(t)&&(t+=`_${this.orientation===j.Left?"right":this.orientationToString()}`,this.spriteFlipX=this.orientation===j.Left),super.setAnimation(t,e,i,n))}animateDeath(t,e=120,i=0){this.setAnimation("death",e,i,t)}toggleHurt(){this.dead||this.teleporting||(this.sprite=this.hurtSprite,window.setTimeout((()=>{this.sprite=this.normalSprite}),75))}despawn(){this.hitPoints=0,this.dead=!0,this.removeTarget(),this.stop(),this.orientation=j.Down}follow(t,e=!1){this.following=!0,this.setTarget(t),this.move(t.gridX,t.gridY,e)}followPosition(t,e){this.following=!0,this.move(t,e)}addAttacker(t){this.attackers[t.instance]=t}removeAttacker(t){delete this.attackers[t.instance]}hasAttackers(){return Object.keys(this.attackers).length>0}performAction(t,e){switch(this.setOrientation(t),e){case P.Idle:case P.Orientate:this.setAnimation("idle",this.idleSpeed);break;case P.Attack:this.setAnimation("atk",this.attackAnimationSpeed,1);break;case P.Walk:this.setAnimation("walk",this.walkAnimationSpeed)}}idle(t){let e=t||this.orientation;this.performAction(e,P.Idle)}orientationToString(){switch(this.orientation){case j.Left:return"left";case j.Right:return"right";case j.Up:return"up";case j.Down:return"down"}}lookAt(t){let{gridX:e,gridY:i}=this;t.gridX>e?this.setOrientation(j.Right):t.gridX<e?this.setOrientation(j.Left):t.gridY>i?this.setOrientation(j.Down):t.gridY<i&&this.setOrientation(j.Up),this.idle()}go(t,e,i=!1,n=!1){this.frozen||(this.following&&(this.following=!1,this.removeTarget()),this.move(t,e,i,n))}move(t,e,i=!1,n=!1){if(this.hasPath()&&!i)this.proceed(t,e);else{let i=this.requestPathfinding(t,e);if((!i||i.length<2)&&n)return this.fallbackCallback?.(t,e);this.followPath(i)}this.destination={x:t,y:e}}proceed(t,e){this.newDestination={x:t,y:e}}nextStep(){let t,e,i,n=!1;if(this.step%2==0&&this.secondStepCallback&&this.secondStepCallback(),this.hasPath()){if(this.beforeStepCallback?.(),this.updateGridPosition(),!this.interrupted&&this.path)if(this.hasNextStep()&&([this.nextGridX,this.nextGridY]=this.path[this.step+1]),this.stepCallback?.(),this.changedPath()){if(({x:t,y:e}=this.newDestination),i=this.requestPathfinding(t,e),!i)return;this.newDestination=null,i.length<2?n=!0:(this.startPathingCallback?.(i),this.followPath(i))}else this.hasNextStep()?(this.step++,this.updateMovement()):n=!0;else n=!0,this.interrupted=!1;n&&(this.path=null,this.idle(),this.stopPathingCallback&&this.stopPathingCallback(this.gridX,this.gridY,this.forced),this.forced&&=!1)}}updateMovement(){let{path:t,step:e}=this;t&&(t[e][0]<t[e-1][0]&&this.performAction(j.Left,P.Walk),t[e][0]>t[e-1][0]&&this.performAction(j.Right,P.Walk),t[e][1]<t[e-1][1]&&this.performAction(j.Up,P.Walk),t[e][1]>t[e-1][1]&&this.performAction(j.Down,P.Walk))}followPath(t){!t||t.length<2||(this.path=t,this.step=0,this.following&&t.pop(),this.moving||this.changedPath()||this.startPathingCallback?.(t),this.nextStep())}stop(t=!1){t?this.hasPath()&&(this.path=null,this.destination=null,this.newDestination=null,this.movement=new Zc,this.performAction(this.orientation,P.Idle),this.nextGridX=this.gridX,this.nextGridY=this.gridY):this.interrupted=!0}hasEffect(){return this.effect!==B.None}removeEffect(){this.effect=B.None}setEffect(t){this.effect=t}canAttackTarget(){return!!this.hasTarget()&&!(this.getDistance(this.target)>this.attackRange-1)}getEffectAnimation(){return this.effects[this.effect]?.animation}getActiveEffect(){return this.effects[this.effect]?.key||""}triggerHealthBar(){this.healthBarVisible=!0,this.healthBarTimeout&&clearTimeout(this.healthBarTimeout),this.healthBarTimeout=window.setTimeout((()=>{this.healthBarVisible=!1}),7e3)}clearHealthBar(){this.healthBarVisible=!1,clearTimeout(this.healthBarTimeout),this.healthBarTimeout=null}requestPathfinding(t,e){return this.requestPathCallback?.(t,e)||null}updateGridPosition(){this.path&&0!==this.path.length&&this.setGridPosition(this.path[this.step][0],this.path[this.step][1])}forEachAttacker(t){ve.each(this.attackers,(e=>t(e)))}hasShadow(){return!0}hasPath(){return null!==this.path}hasNextStep(){return this.path&&this.path.length-1>this.step}changedPath(){return!!this.newDestination}removeTarget(){this.target=null}forget(){this.attackers={}}moved(){this.moveCallback?.()}setTarget(t){this.target=t,this.lastTarget=t.instance}hasTarget(t){return t?this.target===t:!!this.target}setObjectTarget(t){let e=new tg(`${t.x}-${t.y}`,R.Object);e.setGridPosition(t.x,t.y),this.setTarget(e),this.followPosition(t.x,t.y)}setHitPoints(t,e){let i=!1;t<0&&(t=0),t<this.hitPoints&&(i=!0),this.hitPoints=t,e&&(this.maxHitPoints=e),this.hitPointsCallback?.(this.hitPoints,e||this.maxHitPoints,i)}setOrientation(t){this.orientation=t}onRequestPath(t){this.requestPathCallback=t}onStartPathing(t){this.startPathingCallback=t}onStopPathing(t){this.stopPathingCallback=t}onBeforeStep(t){this.beforeStepCallback=t}onStep(t){this.stepCallback=t}onSecondStep(t){this.secondStepCallback=t}onMove(t){this.moveCallback=t}onHitPoints(t){this.hitPointsCallback=t}onFallback(t){this.fallbackCallback=t}}class eg extends tg{constructor(e){super(e,R.Mob),t(this,"hiddenName",!1)}hasShadow(){return!this.hiddenName}drawNames(){return!this.hiddenName}}class ig extends tg{constructor(t){super(t,R.NPC)}}class ng{constructor(t,e,i,n,r,o,a){this.id=t,this.name=e,this.description=i,this.stage=n,this.stageCount=r,this.subStage=o,this.rewards=a}update(t,e,i,n){this.stage=t,e&&(this.subStage=e),i&&(this.name=i),n&&(this.description=n)}isFinished(){return this.stage>=this.stageCount}isStarted(){return this.stage>0}}class rg{constructor(e,i=0,n=1){t(this,"name",void 0),t(this,"percentage",0),this.type=e,this.experience=i,this.level=n,this.name=N[e]}update(t,e,i){this.experience=t,this.level=e||this.level,this.percentage=i||0}}class og{constructor(t,e,i,n=-1){this.type=t,this.key=e,this.level=i,this.quickSlot=n}update(t,e=this.quickSlot){this.level=t,this.quickSlot=e}}class ag{constructor(t,e,i){this.id=t,this.username=e,this.online=i}}class sg{constructor(e="",i="",n=0,r={}){t(this,"attackStats",J.getEmptyStats()),t(this,"defenseStats",J.getEmptyStats()),t(this,"bonuses",J.getEmptyBonuses()),this.key=e,this.name=i,this.count=n,this.enchantments=r}update(t="",e="",i=0,n={},r,o,a){this.key=t,this.name=e,this.count=i,this.enchantments=n,this.attackStats=r||J.getEmptyStats(),this.defenseStats=o||J.getEmptyStats(),this.bonuses=a||J.getEmptyBonuses()}exists(){return""!==this.key}}class lg extends sg{constructor(t="clotharmor",e="Cloth Armor",i=1,n={}){super(t,e,i,n)}update(t="clotharmor",e="Cloth Armor",i=0,n={},r,o,a){super.update(t,e,i,n,r,o,a)}}class hg extends sg{}class dg extends sg{}class ug extends sg{}class cg extends sg{}class gg extends tg{constructor(e){super(e,R.Player),t(this,"rank",W.None),t(this,"wanted",!1),t(this,"pvpKills",-1),t(this,"pvpDeaths",-1),t(this,"moveLeft",!1),t(this,"moveRight",!1),t(this,"moveUp",!1),t(this,"moveDown",!1),t(this,"poison",!1),t(this,"disableAction",!1),t(this,"medal",F.None),t(this,"hitPoints",0),t(this,"maxHitPoints",0),t(this,"mana",0),t(this,"maxMana",0),t(this,"equipments",{[M.Armour]:new lg,[M.Boots]:new hg,[M.Pendant]:new dg,[M.Ring]:new ug,[M.Weapon]:new cg}),t(this,"skills",{}),t(this,"abilities",{}),t(this,"quests",{}),t(this,"achievements",{}),t(this,"friends",{}),t(this,"syncCallback",void 0),t(this,"poisonCallback",void 0),t(this,"abilityCallback",void 0),t(this,"manaCallback",void 0)}load(t,e=!1){this.instance=t.instance,this.name=t.name,this.level=t.level,this.movementSpeed=t.movementSpeed,this.orientation=t.orientation,this.rank=t.rank,this.attackRange=t.attackRange,t.displayInfo&&(this.nameColour=t.displayInfo.colour),this.setOrientation(t.orientation),e||this.setGridPosition(t.x,t.y),this.setHitPoints(t.hitPoints,t.maxHitPoints),this.setMana(t.mana,t.maxMana),t.equipments&&ve.each(t.equipments,this.equip.bind(this))}loadSkills(t){ve.each(t,(t=>this.setSkill(t)))}loadQuests(t){for(let[e,i]of t.entries())this.quests[i.key]=new ng(e,i.name,i.description,i.stage,i.stageCount,i.subStage,i.rewards)}loadAchievements(t){for(let[e,i]of t.entries())this.achievements[i.key]=new ng(e,i.name,i.description,i.stage,i.stageCount)}loadAbilities(t){ve.each(t,(t=>this.setAbility(t.key,t.level,t.type,t.quickSlot)))}loadFriends(t){let e=0;ve.each(t,((t,i)=>{this.friends[i]=new ag(e,i,t),e++}))}equip(t){let{type:e,name:i,key:n,count:r,enchantments:o,attackRange:a,attackStats:s,defenseStats:l,bonuses:h}=t;if(!n)return this.unequip(e);e===M.Weapon&&(this.attackRange=a||1),this.equipments[e].update(n,i,r,o,s,l,h)}addFriend(t,e){this.friends[t]=new ag(ve.size(this.friends),t,e)}unequip(t){this.equipments[t].update()}sync(){this.syncCallback?.()}getSpriteName(){return this.equipments[M.Armour].key}getArmour(){return this.equipments[M.Armour]}getBoots(){return this.equipments[M.Boots]}getPendant(){return this.equipments[M.Pendant]}getRing(){return this.equipments[M.Ring]}getWeapon(){return this.equipments[M.Weapon]}isAdmin(){return this.rank===W.Administrator}isModerator(){return this.rank===W.Moderator}getTotalExperience(){let t=0;return ve.each(this.skills,(e=>{t+=e.experience})),t}getMedalKey(){switch(this.medal){case F.Silver:return"silvermedal";case F.Gold:return"goldmedal";default:return""}}setMana(t,e){this.mana=t,e&&(this.maxMana=e),this.manaCallback?.(this.mana,e||this.maxMana)}setSkill({type:t,experience:e,level:i,percentage:n}){this.skills[t]||(this.skills[t]=new rg(t)),this.skills[t].update(e,i,n)}setQuest(t,e,i){this.quests[t]?.update(e,i)}setAchievement(t,e,i,n){this.achievements[t]?.update(e,void 0,i,n)}setAbility(t,e,i,n=-1){t in this.abilities?this.abilities[t]?.update(e,n):this.abilities[t]=new og(i,t,e,n),i!==z.Active&&-1===n||this.abilityCallback?.(t,e,n)}setPoison(t){this.poison=t,this.poisonCallback?.(t)}setFriendStatus(t,e){this.friends[t].online=e}isRanged(){return this.attackRange>1}hasWeapon(){return this.equipments[M.Weapon].exists()}hasMedal(){return this.medal!==F.None}hasKeyboardMovement(){return this.moveLeft||this.moveRight||this.moveUp||this.moveDown}onPoison(t){this.poisonCallback=t}onSync(t){this.syncCallback=t}onAbility(t){this.abilityCallback=t}onMana(t){this.manaCallback=t}}class pg extends Qc{constructor(t){super(t,R.Chest)}idle(){this.setAnimation("idle_down",150)}}class fg extends Qc{constructor(e,i=1,n={}){super(e,R.Item),t(this,"dropped",!1),this.count=i,this.enchantments=n}idle(){this.setAnimation("idle",150)}hasShadow(){return!0}}class wg extends Qc{constructor(e,i){super(e,R.Projectile),t(this,"type",R.Projectile),t(this,"speed",150),t(this,"fadingDuration",100),t(this,"target",void 0),this.owner=i}idle(){this.setAnimation("travel")}impact(){this.impactCallback?.()}setStart(t,e){this.setGridPosition(Math.floor(t/J.tileSize),Math.floor(e/J.tileSize))}setTarget(t){this.target=t,this.updateAngle()}getAnimationSpeed(){return this.idleSpeed}getTimeDiff(){return(Date.now()-this.lastUpdate)/1e3}getImpactEffect(){switch(this.sprite.name){case"projectile-boulder":return B.Boulder;case"projectile-poisonball":return B.Poisonball;case"projectile-iceball":return B.Iceball}return B.None}updateAngle(){this.target&&(this.angle=Math.atan2(this.target.y-this.y,this.target.x-this.x)*(180/Math.PI)-90)}getAngle(){return this.angle*Math.PI/180}onImpact(t){this.impactCallback=t}}class mg{constructor(e){t(this,"renderingGrid",[]),this.map=e,this.load()}load(){for(let t=0;t<this.map.height;t++){this.renderingGrid[t]=[];for(let e=0;e<this.map.width;e++)this.renderingGrid[t][e]={}}r.debug("Finished generating the rendering grid.")}addToRenderingGrid(t){let{instance:e,gridX:i,gridY:n}=t;this.map.isOutOfBounds(i,n)||(this.renderingGrid[n][i][e]=t)}removeFromRenderingGrid({instance:t,gridX:e,gridY:i}){delete this.renderingGrid[i][e][t]}}class _g{constructor(e){t(this,"grids",void 0),t(this,"sprites",void 0),t(this,"entities",{}),t(this,"decrepit",[]),this.game=e,this.grids=new mg(e.map),this.sprites=e.sprites,e.input.loadCursors()}create(t){if(this.isPlayer(t.instance))return;if(t.instance in this.entities)return;let e;switch(t.type){case R.Chest:e=this.createChest(t.instance);break;case R.NPC:e=this.createNPC(t.instance);break;case R.Item:e=this.createItem(t);break;case R.Mob:e=this.createMob(t);break;case R.Projectile:e=this.createProjectile(t);break;case R.Player:e=this.createPlayer(t)}if(!e)return r.error(`Failed to create entity ${t.instance}`);let i=this.game.sprites.get(e.isItem()?`item-${t.key}`:t.key);if(!i)return r.error(`Failed to create sprite for entity ${t.key}.`);e.name=t.name,e.setGridPosition(t.x,t.y),e.setSprite(i),e.setIdleSpeed(i.idleSpeed),e.idle(),this.addEntity(e),e instanceof tg&&e.handler.load(this.game)}createChest(t){return new pg(t)}createNPC(t){return new ig(t)}createItem(t){return new fg(t.instance,t.count,t.enchantments)}createMob(t){let e=new eg(t.instance);return e.setHitPoints(t.hitPoints,t.maxHitPoints),e.attackRange=t.attackRange,e.level=t.level,e.hiddenName=t.hiddenName,e.movementSpeed=t.movementSpeed,e.orientation=t.orientation,t.displayInfo&&(t.displayInfo.colour&&(e.nameColour=t.displayInfo.colour),t.displayInfo.scale&&(e.customScale=t.displayInfo.scale)),e}createProjectile(t){let e=this.get(t.ownerInstance),i=this.get(t.targetInstance);if(!e||!i)return;e.lookAt(i);let n=new wg(t.instance,e);return n.name=t.name,n.setStart(e.x,e.y),n.setTarget(i),n.angled=!0,n.type=t.type,n.onImpact((()=>{let e=n.getImpactEffect();e!==B.None&&i.setEffect(e),this.game.info.create(q.Damage,t.damage,i.x,i.y,this.isPlayer(i.instance)),i.triggerHealthBar(),this.unregisterPosition(n),delete this.entities[n.instance]})),e.performAction(e.orientation,P.Attack),e.triggerHealthBar(),n}createPlayer(t){let e=new gg(t.instance);return e.load(t),e.setSprite(this.game.sprites.get(e.getSpriteName())),e}isPlayer(t){return this.game.player.instance===t}get(t){return this.entities[t]}addEntity(t){this.entities[t.instance]=t,this.registerPosition(t),t instanceof fg&&t.dropped||t.fadeIn(this.game.time)}removeEntity(t){this.unregisterPosition(t),delete this.entities[t.instance]}removeItem(t){this.unregisterPosition(t),delete this.entities[t.instance]}removeChest(t){t.setSprite(this.game.sprites.getDeath()),t.animateDeath((()=>{this.unregisterPosition(t),delete this.entities[t.instance]}))}removeNPC(t){t.setSprite(this.game.sprites.getDeath()),t.animateDeath((()=>{this.unregisterPosition(t),delete this.entities[t.instance]}))}registerPosition(t){this.grids.addToRenderingGrid(t)}unregisterPosition(t){this.grids.removeFromRenderingGrid(t)}clean(){0!==this.decrepit.length&&ve.each(this.decrepit,(t=>{t&&this.removeEntity(t)}))}cleanDisplayInfo(){ve.each(this.entities,(t=>{t.nameColour="",t.customScale=0}))}clearPlayers(t){ve.each(this.entities,(e=>{e.isPlayer()&&e.instance!==t.instance&&this.removeEntity(e)}))}getAll(){return this.entities}forEachEntity(t){ve.each(this.entities,t)}}class kg{constructor(e,i,n,r,o,a=!1,s=-1){t(this,"opacity",1),t(this,"text",void 0),t(this,"prefix",void 0),t(this,"suffix",void 0),t(this,"lastTime",void 0),t(this,"speed",void 0),t(this,"updateY",void 0),t(this,"duration",void 0),t(this,"colour",void 0),t(this,"fill",void 0),t(this,"stroke",void 0),t(this,"destroyCallback",void 0),this.id=e,this.type=i,this.value=n,this.x=r,this.y=o,this.text=`${n}`,this.prefix="",this.suffix="",this.lastTime=0,this.speed=100,this.updateY=this.isHeal()?2:1,this.duration=this.isHeal()?400:1e3,this.colour=H[i],s>-1&&(this.colour=U[s]),this.fill=this.colour.fill,this.stroke=this.colour.stroke,a&&this.hasInflicted()&&(this.fill=this.colour.inflicted.fill,this.stroke=this.colour.inflicted.stroke),this.isDamage()&&n<1&&(this.text="MISS"),this.isPoison()&&(this.prefix="--"),this.isPoints()&&(this.prefix="++"),this.isExperience()&&(this.prefix="+",this.suffix="EXP")}update(t){t-this.lastTime>this.speed&&(this.y-=this.updateY,this.lastTime=t,this.opacity-=70/this.duration,this.opacity<0&&this.destroyCallback?.(this.id))}getText(){return`${this.prefix}${this.text} ${this.suffix}`}isHeal(){return this.type===q.Heal}isPoison(){return this.type===q.Poison}isExperience(){return this.type===q.Experience||this.type===q.Profession}isPoints(){return this.type===q.Heal||this.type===q.Mana}isDamage(){return this.type===q.Damage||this.type===q.Stun||this.type===q.Critical}hasInflicted(){return void 0!==this.colour.inflicted}onDestroy(t){this.destroyCallback=t}}class bg{constructor(){t(this,"infos",{})}create(t,e,i,n,r=!1,o=-1,a=!1){a&&(i+=J.randomInt(-16,16),n+=J.randomInt(-10,10));let s=J.createId(Date.now(),i,n);this.addInfo(new kg(s,t,e,i,n,r,o))}addInfo(t){this.infos[t.id]=t,t.onDestroy((t=>delete this.infos[t]))}isEmpty(){return 0===ve.size(this.infos)}update(t){this.forEachInfo((e=>e.update(t)))}forEachInfo(t){ve.each(this.infos,t)}}class vg{constructor(e){t(this,"chatBox",document.querySelector("#chat")),t(this,"log",document.querySelector("#chat-log")),t(this,"input",document.querySelector("#chat-input")),t(this,"button",document.querySelector("#chat-button")),t(this,"fadingDuration",5e3),t(this,"fadingTimeout",void 0),this.game=e,this.button.addEventListener("click",(()=>this.toggle())),this.input.addEventListener("blur",(()=>this.hide()))}keyDown(t){if("Enter"===t&&""!==this.input.value)return this.send();"Escape"!==t&&"Enter"!==t||this.toggle()}privateMessage(t){this.inputVisible()||(this.toggle(),this.input.value=`/pm *${t}* `,this.input.focus())}add(t,e,i="",n=!1){let r=this.createElement(t,e);r.style.color=i||"white",n&&(r.style.fontWeight="bold"),this.log.append(r),this.log.scrollTop=this.log.scrollHeight,this.displayChatBox(),this.hideChatBox()}createElement(t,e){let i=document.createElement("p");return i.innerHTML=`${t} » ${e}`,i}send(){this.game.socket.send(V.Chat,[this.input.value]),this.hide()}toggle(){this.clearTimeout(),this.inputVisible()?this.hide():this.display()}display(){this.button.classList.add("active"),this.inputVisible()?this.input.style.display="block":J.fadeIn(this.input),this.displayChatBox(),this.input.focus(),this.input.value="",J.fadeIn(this.input)}displayChatBox(){J.fadeIn(this.chatBox)}hide(){this.button.classList.remove("active"),this.hideChatBox(),this.input.blur(),this.input.value="",J.fadeOut(this.input)}hideChatBox(){this.clearTimeout(),this.fadingTimeout=window.setTimeout((()=>{this.inputVisible()||J.fadeOut(this.chatBox)}),this.fadingDuration)}inputVisible(){return"block"===this.input.style.display}clear(){this.inputVisible()&&this.toggle(),this.clearTimeout()}clearTimeout(){clearTimeout(this.fadingTimeout),window.clearTimeout(this.fadingTimeout),this.fadingTimeout=void 0}}class yg{constructor(e){t(this,"hovering",void 0),t(this,"attackInfo",$c("#attack-info")),t(this,"name",this.attackInfo.find(".name")),t(this,"details",this.attackInfo.find(".details")),t(this,"health",this.attackInfo.find(".health")),t(this,"updateCallback",void 0),this.input=e,this.onUpdate(this.handleUpdate.bind(this))}update(t){let{name:e,health:i,details:n}=this;if(!t||!this.validEntity(t))return this.hovering=void 0,this.hide();this.isVisible()||this.display(),this.hovering=t,e.html(t.name),this.hasHealth()?this.setHealth(t.hitPoints):(i.hide(),n.html(""))}handleUpdate(t,e){this.hasHealth()&&this.hovering.instance===t&&(e<1?this.hide():this.setHealth(e))}setHealth(t){if(!this.hasHealth())return;this.health.show();let{maxHitPoints:e}=this.hovering;this.health.css("width",Math.ceil(t/e*100)-10+"%"),this.details.html(`${t} / ${e}`)}validEntity(t){return t.instance!==this.input.player.instance&&!t.isProjectile()}hasHealth(){return!!this.hovering&&(this.hovering.isMob()||this.hovering.isPlayer())}display(){this.attackInfo.fadeIn("fast")}hide(){this.attackInfo.fadeOut("fast")}isVisible(){return"block"===this.attackInfo.css("display")}onUpdate(t){this.updateCallback=t}}class xg{constructor(e){t(this,"app",void 0),t(this,"map",void 0),t(this,"camera",void 0),t(this,"player",void 0),t(this,"friends",void 0),t(this,"selectedCellVisible",!1),t(this,"keyMovement",!1),t(this,"targetVisible",!0),t(this,"selectedX",-1),t(this,"selectedY",-1),t(this,"cursor",void 0),t(this,"targetColour","rgba(255, 255, 255, 0.5)"),t(this,"cursors",{}),t(this,"lastMousePosition",{x:0,y:0}),t(this,"hovering",void 0),t(this,"mouse",{x:0,y:0}),t(this,"targetAnimation",new Kc("move",4,0,16,16)),t(this,"chatHandler",void 0),t(this,"hud",void 0),t(this,"entity",void 0),this.game=e,this.app=e.app,this.map=e.map,this.camera=e.camera,this.player=e.player,this.friends=e.menu.getFriends(),this.chatHandler=new vg(e),this.hud=new yg(this),this.app.onLeftClick(this.handleLeftClick.bind(this)),this.app.onRightClick(this.handleRightClick.bind(this)),this.app.onKeyDown(this.handleKeyDown.bind(this)),this.app.onKeyUp(this.handleKeyUp.bind(this)),this.app.onMouseMove((t=>{this.game.started&&(this.setCoords(t),this.moveCursor())})),this.friends.onMessage((t=>this.chatHandler.privateMessage(t))),this.targetAnimation.setSpeed(50)}loadCursors(){this.cursors.hand=this.game.sprites.get("hand"),this.cursors.sword=this.game.sprites.get("sword"),this.cursors.loot=this.game.sprites.get("loot"),this.cursors.target=this.game.sprites.get("target"),this.cursors.arrow=this.game.sprites.get("arrow"),this.cursors.talk=this.game.sprites.get("talk"),this.cursors.spell=this.game.sprites.get("spell"),this.cursors.bow=this.game.sprites.get("bow"),this.cursors.axe=this.game.sprites.get("axe_cursor"),r.debug("Loaded Cursors!")}handleLeftClick(t){if(this.setCoords(t),this.keyMovement=!1,this.player.disableAction=!1,this.isCtrlKey())return this.game.socket.send(V.Command,[I.CtrlClick,this.getCoords()]);this.move(this.getCoords())}handleRightClick(t){this.setCoords(t);let e=this.getCoords(),i=this.game.getEntityAt(e.x,e.y);i&&console.log(i)}handleKeyDown(t){if(this.friends.isPopupActive())return this.friends.keyDown(t.key);if(this.chatHandler.inputVisible())return this.chatHandler.keyDown(t.key);let e;switch(t.key){case"w":case"ц":case"ArrowUp":return void(this.player.moveUp=!0);case"a":case"ф":case"ArrowLeft":return void(this.player.moveLeft=!0);case"s":case"ы":case"ArrowDown":return void(this.player.moveDown=!0);case"d":case"в":case"ArrowRight":return void(this.player.moveRight=!0);case"Enter":return void this.chatHandler.toggle();case"i":return void this.game.menu.getInventory().toggle();case"m":return void this.game.menu.getWarp().toggle();case"p":return void this.game.menu.getProfile().toggle();case"h":this.game.menu.getInventory().selectEdible();break;case"t":return e=this.game.entities.get(this.player.lastTarget),void(e&&this.player.follow(e));case"Escape":return this.game.menu.hide(),void(this.player.moving&&this.player.stop());case"+":case"=":return this.game.camera.zoom(.1),void this.game.renderer.resize();case"-":case"_":return this.game.camera.zoom(-.1),void this.game.renderer.resize()}}handleKeyUp(t){switch(t.key){case"w":case"ArrowUp":this.player.moveUp=!1;break;case"a":case"ArrowLeft":this.player.moveLeft=!1;break;case"s":case"ArrowDown":this.player.moveDown=!1;break;case"d":case"ArrowRight":this.player.moveRight=!1}this.player.disableAction=!1}keyMove(t){this.player.hasPath()||(this.move(t),this.keyMovement=!0)}move(t){if(!(this.player.stunned||(this.setPassiveTarget(),this.player.disableAction||this.game.zoning.direction||this.game.map.isOutOfBounds(t.x,t.y)))){if(s()&&this.chatHandler.inputVisible()&&this.chatHandler.toggle(),this.game.menu.hide(),this.game.map.isObject(t.x,t.y))return this.player.setObjectTarget(t);if(this.player.removeTarget(),this.entity=this.game.getEntityAt(t.x,t.y),this.entity&&(this.setAttackTarget(),this.isTargetable(this.entity)))return this.player.follow(this.entity),this.isAttackable(this.entity)&&this.entity.addAttacker(this.player),void this.game.socket.send(V.Target,[c.Attack,this.entity.instance]);this.player.go(t.x,t.y)}}moveCursor(){if(s())return;let t=this.getCoords();if(this.entity=this.game.getEntityAt(t.x,t.y),this.hud.update(this.entity),!this.entity){if(this.map.isObject(t.x,t.y)){let e=this.map.getTileCursor(t.x,t.y);return this.setCursor(this.cursors[e||"talk"]),void(this.hovering=D.Object)}return this.setCursor(this.cursors.hand),void(this.hovering=null)}switch(this.entity.type){case R.Item:case R.Chest:this.setCursor(this.cursors.loot),this.hovering=D.Item;break;case R.Mob:this.setCursor(this.getAttackCursor()),this.hovering=D.Mob;break;case R.NPC:this.setCursor(this.cursors.talk),this.hovering=D.NPC;break;case R.Player:this.game.pvp&&(this.setCursor(this.getAttackCursor()),this.hovering=D.Player)}}saveMouse(){this.lastMousePosition.x=this.mouse.x,this.lastMousePosition.y=this.mouse.y}setPosition(t,e){this.selectedX=t,this.selectedY=e}setCursor(t){t&&(this.cursor=t)}setPassiveTarget(){this.targetAnimation.setRow(0)}setAttackTarget(){this.targetAnimation.setRow(1)}setCoords(t){let{width:e,height:i}=this.game.renderer.background;this.mouse.x=t.pageX,this.mouse.y=t.pageY,this.mouse.x>=e?this.mouse.x=e-1:this.mouse.x<=0&&(this.mouse.x=0),this.mouse.y>=i?this.mouse.y=i-1:this.mouse.y<=0&&(this.mouse.y=0)}getAttackCursor(){return this.cursors[this.player.isRanged()?"bow":"sword"]}getCoords(){let t=this.map.tileSize*this.camera.zoomFactor,e=this.mouse.x%t,i=this.mouse.y%t;return{x:Math.round((this.mouse.x-e)/t)+this.game.camera.gridX,y:Math.round((this.mouse.y-i)/t)+this.game.camera.gridY}}getTargetData(){let t=this.game.sprites.get("target");if(!t)return;let{frame:e}=this.targetAnimation,{tileSize:i}=this.game.map,{zoomFactor:n}=this.game.camera;return t.loaded||t.load(),{sprite:t,x:e.x,y:e.y,width:t.width,height:t.height,dx:this.selectedX*i*n,dy:this.selectedY*i*n,dw:t.width*n,dh:t.height*n}}isCtrlKey(){return window.event.ctrlKey}isTargetable(t){return this.isAttackable(t)||t.isNPC()||t.isChest()}isAttackable(t){return t.isMob()||t.isPlayer()&&this.game.pvp}isMouseRendered(){return this.mouse.x===this.lastMousePosition.x&&this.mouse.y===this.lastMousePosition.y}}class Sg{constructor(e,i,n){t(this,"container",void 0),t(this,"close",void 0),t(this,"button",void 0),t(this,"showCallback",void 0),this.containerName=e,this.closeButton=i,this.toggleButton=n,this.container=document.querySelector(this.containerName),this.close=document.querySelector(this.closeButton),this.button=document.querySelector(this.toggleButton),this.close?.addEventListener("click",this.hide.bind(this)),this.button?.addEventListener("click",this.toggle.bind(this))}batch(t){r.debug("Unimplemented menu batch() function.")}synchronize(t){}add(t){r.debug("Unimplemented menu add() function.")}remove(t){r.debug("Unimplemented menu remove() function.")}show(t,e,i,n,r){this.showCallback?.(),this.button?.classList.add("active"),J.fadeIn(this.container)}hide(){this.isVisible()&&(this.button?.classList.remove("active"),J.fadeOut(this.container))}toggle(){this.isVisible()?this.hide():this.show()}resize(){}isVisible(){return"block"===this.container.style.display}onShow(t){this.showCallback=t}}class Cg extends Sg{constructor(){super(),t(this,"container",document.querySelector("#action-container")),t(this,"list",document.querySelector("#action-container > ul")),t(this,"name",document.querySelector("#action-container > .action-item-name")),t(this,"description",document.querySelector("#action-container > .action-item-description")),t(this,"buttonCallback",void 0)}show(t,e,i,n,r,o=""){this.clear(),ve.each(t,(t=>this.add(t))),this.name.innerHTML=e;let a=o||`<u>Attack Stats:</u>&emsp;&emsp;<u>Defense Stats:</u> <br>\n            Crush: ${i.crush}&emsp;&emsp;&emsp;&emsp;Crush: ${n.crush} <br>\n            Slash: ${i.slash}&emsp;&emsp;&emsp;&emsp;Slash: ${n.slash} <br>\n            Stab: ${i.stab}&emsp;&emsp;&emsp;&emsp;&ensp;Stab: ${n.stab} <br>\n            Magic: ${i.magic}&emsp;&emsp;&emsp;&emsp;Magic: ${n.magic} <br>\n            <u>Bonuses</u>: <br>\n            Accuracy: ${r.accuracy} <br>\n            Strength: ${r.strength} <br>\n            Archery: ${r.archery} <br>\n            Magic: ${r.magic} <br>`;this.description.innerHTML=a,super.show()}add(t){let e=document.createElement("li");e.classList.add("action-button",`action-${t.toLowerCase()}`),e.addEventListener("click",(()=>this.buttonCallback?.(t))),this.list.append(e)}clear(){this.list.innerHTML=""}onButton(t){this.buttonCallback=t}}class Eg extends Sg{constructor(e){super("#inventory",void 0,"#inventory-button"),t(this,"list",document.querySelector("#inventory-container > ul")),t(this,"selectedSlot",-1),t(this,"selectCallback",void 0),t(this,"touchClone",void 0),this.actions=e,this.load(),this.actions.onButton((t=>this.handleAction(t)))}load(){if(!this.list)return r.error("Could not create the skeleton for the inventory.");for(let t=0;t<$.INVENTORY_SIZE;t++)this.list.append(this.createSlot(t))}handleAction(t){this.selectCallback?.(this.selectedSlot,J.getContainerAction(t)),this.actions.hide()}batch(t){ve.each(t,(t=>{t.key&&this.setSlot(t)}))}add(t){this.setSlot(t)}remove(t){this.setSlot(t)}select(t,e=!1){let i=this.getElement(t);if(this.isEmpty(i))return this.actions.hide();if(this.selectedSlot=t,e)return void(i.edible?this.handleAction(O.Eat):i.equippable&&this.handleAction(O.Equip));let n=[];i.edible&&n.push(O.Eat),i.equippable&&n.push(O.Equip),n.push(O.Drop),this.actions.show(n,i.name,i.attackStats,i.defenseStats,i.bonuses,i.description)}selectEdible(){let t=this.getFirstEdible();-1!==t&&(this.selectedSlot=t,this.handleAction(O.Eat))}dragStart(t,e){if(this.isEmpty(this.getElement(e)))return t.preventDefault(),void t.stopPropagation();this.selectedSlot=e}dragDrop(t,e){let i=t.target;i&&(i.classList.remove("item-slot-focused"),-1!==this.selectedSlot&&(this.selectCallback?.(this.selectedSlot,f.Swap,e),this.selectedSlot=-1))}dragOver(t){t.target&&t.target.draggable&&(t.preventDefault(),t.target.classList.add("item-slot-focused"))}dragLeave(t){t.target.classList.remove("item-slot-focused")}touchStart(t){this.isEmpty(this.getElement(t))||(this.selectedSlot=t)}touchMove(t,e){if(-1===this.selectedSlot)return;let[i]=t.touches;e.classList.add("item-slot-focused"),this.touchClone??=e.cloneNode(!0),this.touchClone.style.position="absolute",this.touchClone.style.top=i.clientY-e.clientHeight/2+"px",this.touchClone.style.left=i.clientX-e.clientWidth/2+"px",this.touchClone.style.opacity="0.75",document.querySelector("#game-container")?.append(this.touchClone)}touchCancel(t){this.touchClone?.remove(),this.touchClone=void 0,t.classList.remove("item-slot-focused")}touchEnd(t,e){this.touchCancel(e);let[i]=t.changedTouches,n=document.elementFromPoint(i.clientX,i.clientY)?.dataset?.index;n&&-1!==this.selectedSlot&&(this.selectCallback?.(this.selectedSlot,f.Swap,parseInt(n)),this.selectedSlot=-1)}setSlot(t){let e=this.getElement(t.index);if(!e)return r.error(`Could not find slot element at: ${t.index}`);let i=e.querySelector(".inventory-item-image"),n=e.querySelector(".inventory-item-count");if(!i)return r.error(`Could not find image element at: ${t.index}`);n&&(n.textContent=J.getCount(t.count)),i.style.backgroundImage=t.key?J.getImageURL(t.key):"",e.dataset.key=t.key,e.dataset.count=`${t.count}`,e.edible=t.edible,e.equippable=t.equippable,e.name=t.name,e.description=t.description,e.attackStats=t.attackStats,e.defenseStats=t.defenseStats,e.bonuses=t.bonuses}createSlot(t){let e=document.createElement("li"),i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return i.dataset.index=`${t}`,i.draggable=!0,i.classList.add("item-slot"),n.classList.add("inventory-item-image"),r.classList.add("inventory-item-count"),i.append(n),i.append(r),e.append(i),e.addEventListener("click",(()=>this.select(t))),e.addEventListener("dblclick",(()=>this.select(t,!0))),e.addEventListener("dragstart",(e=>this.dragStart(e,t))),e.addEventListener("drop",(e=>this.dragDrop(e,t))),e.addEventListener("dragover",(t=>this.dragOver(t))),e.addEventListener("dragleave",(t=>this.dragLeave(t))),e.addEventListener("touchstart",(()=>this.touchStart(t))),e.addEventListener("touchmove",(t=>this.touchMove(t,i))),e.addEventListener("touchcancel",(()=>this.touchCancel(i))),e.addEventListener("touchend",(t=>this.touchEnd(t,i))),e}hide(){super.hide(),this.selectedSlot=-1,this.actions.hide()}isEmpty(t){let e=t.querySelector(".inventory-item-image");return!e||""===e.style.backgroundImage}getElement(t){return this.list.children[t].querySelector("div")}getFirstEdible(){for(let t=0;t<this.list.children.length;t++){if(this.getElement(t).edible)return t}return-1}forEachSlot(t){for(let e=0;e<this.list.children.length;e++)t(e,this.getElement(e))}onSelect(t){this.selectCallback=t}}class Ig extends Sg{constructor(e){super("#bank","#close-bank"),t(this,"bankList",document.querySelector("#bank-slot > ul")),t(this,"inventoryList",document.querySelector("#bank-inventory-slots > ul")),t(this,"selectCallback",void 0),this.inventory=e,this.load()}load(){if(!this.bankList)return r.error("[Bank] Could not find the bank slot list.");if(!this.inventoryList)return r.error("[Bank] Could not find the inventory slot list.");for(let t=0;t<$.BANK_SIZE;t++)this.bankList.append(J.createSlot(L.Bank,t,this.select.bind(this)));for(let t=0;t<$.INVENTORY_SIZE;t++)this.inventoryList.append(J.createSlot(L.Inventory,t,this.select.bind(this)))}select(t,e){this.selectCallback?.(t,e)}setSlot(t,e="",i=0){let n=this.getBankElement(t).querySelector(".bank-image"),r=this.getBankElement(t).querySelector(".item-count");n.style.backgroundImage=J.getImageURL(e),r.textContent=J.getCount(i)}synchronize(){this.isVisible()&&this.inventory.forEachSlot(((t,e)=>{let i=this.getInventoryElement(t).querySelector(".bank-image"),n=this.getInventoryElement(t).querySelector(".item-count");i.style.backgroundImage=e.style.backgroundImage,n.textContent=e.textContent}))}add(t){this.setSlot(t.index,t.key,t.count)}remove(t){this.setSlot(t.index,t.key,t.count)}show(t){super.show(),this.synchronize(),ve.each(t,(t=>this.setSlot(t.index,t.key,t.count)))}hide(){super.hide()}getBankElement(t){return this.bankList.children[t].querySelector("div")}getInventoryElement(t){return this.inventoryList.children[t].querySelector("div")}onSelect(t){this.selectCallback=t}}class Ag extends Sg{constructor(e){super("#store","#close-store"),t(this,"key",""),t(this,"currency","gold"),t(this,"selectedIndex",-1),t(this,"selectedCount",-1),t(this,"confirmSell",document.querySelector("#confirm-sell")),t(this,"sellSlot",document.querySelector("#store-sell-slot")),t(this,"sellSlotText",document.querySelector("#store-sell-slot-text")),t(this,"sellSlotReturn",document.querySelector("#store-sell-slot-return")),t(this,"sellSlotReturnText",document.querySelector("#store-sell-slot-return-text")),t(this,"storeList",document.querySelector("#store-container > ul")),t(this,"inventoryList",document.querySelector("#store-inventory-slots > ul")),t(this,"selectCallback",void 0),this.inventory=e,this.load(),this.sellSlot.addEventListener("click",this.synchronize.bind(this)),this.confirmSell.addEventListener("click",this.sell.bind(this))}load(){for(let t=0;t<$.INVENTORY_SIZE;t++)this.inventoryList.append(J.createSlot(L.Inventory,t,this.select.bind(this)))}update(t){this.clear(),this.key=t.key,this.currency=t.currency;for(let e=0;e<t.items.length;e++)this.storeList.append(this.createStoreItem(t.items[e],e))}select(t,e){this.selectCallback?.(S.Select,this.key,e)}sell(){this.selectCallback?.(S.Sell,this.key,this.selectedIndex,this.selectedCount)}buy(t,e=1){this.selectCallback?.(S.Buy,this.key,t,e)}synchronize(){this.isVisible()&&(this.clearSellSlot(),this.inventory.forEachSlot(((t,e)=>{let i=this.getElement(t).querySelector(".bank-image"),n=this.getElement(t).querySelector(".item-count");i.style.backgroundImage=e.style.backgroundImage,n.textContent=e.textContent})))}show(t){super.show(),this.update(t),this.synchronize()}clear(){this.key="",this.currency="gold",this.storeList.innerHTML=""}clearSellSlot(){this.selectedIndex=-1,this.selectedCount=-1,this.sellSlot.style.backgroundImage="",this.sellSlotText.textContent="",this.sellSlotReturn.style.backgroundImage="",this.sellSlotReturnText.textContent=""}move(t){if(t.key!==this.key)return r.error("Invalid store key provided for the select.");this.synchronize();let e=this.getElement(t.item.index).querySelector(".bank-image"),i=this.getElement(t.item.index).querySelector(".item-count");if(!e||!i)return r.error("[Store] Could not find image and count elements.");this.sellSlot.style.backgroundImage=e.style.backgroundImage,this.sellSlot.textContent=i.textContent,this.sellSlotReturn.style.backgroundImage=J.getImageURL(this.currency),this.sellSlotReturnText.textContent=t.item.price.toString()||"",e.style.backgroundImage="",i.textContent="",this.selectedIndex=t.item.index,this.selectedCount=t.item.count}createStoreItem(t,e){let i=document.createElement("li"),n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");return n.classList.add("store-item"),r.classList.add("store-item-image"),o.classList.add("store-item-name"),a.classList.add("store-item-count"),s.classList.add("store-item-price"),l.classList.add("store-item-buy"),a.textContent=t.count.toString(),o.textContent=t.name,s.textContent=t.price.toString(),l.textContent="Buy",r.style.backgroundImage=J.getImageURL(t.key),l.addEventListener("click",(()=>this.buy(e))),n.append(r,o,a,s,l),i.append(n),i}getElement(t){return this.inventoryList.children[t].querySelector("div")}onSelect(t){this.selectCallback=t}}class Yg{constructor(e){t(this,"health",document.querySelector("#health")),t(this,"healthBar",document.querySelector("#health-bar")),t(this,"mana",document.querySelector("#mana")),t(this,"manaBar",document.querySelector("#mana-bar")),t(this,"healthText",document.querySelector("#health-bar-text")),t(this,"manaText",document.querySelector("#mana-bar-text")),this.player=e,this.player.onHitPoints(this.handleHitPoints.bind(this)),this.player.onMana(this.handleMana.bind(this)),this.player.onPoison(this.handlePoison.bind(this))}handleHitPoints(t,e,i){this.setPoints(this.health,this.healthBar,this.healthText,t,e,i)}handleMana(t,e){this.setPoints(this.mana,this.manaBar,this.manaText,t,e)}handlePoison(t){this.health.style.background=t?"linear-gradient(to right, #046E20, #19B047)":"linear-gradient(to right, #f00, #ef5a5a)"}resize(){this.handleHitPoints(this.player.hitPoints,this.player.maxHitPoints),this.handleMana(this.player.mana,this.player.maxMana)}setPoints(t,e,i,n,r,o){let a=n/r;t.style.width=`${Math.floor(e.offsetWidth*a).toString()}px`,i.textContent=`${n}/${r}`,o&&this.flash(this.player.poison?"poison":"white")}flash(t){this.health.classList.add(t),window.setTimeout((()=>this.health.classList.remove(t)),500)}}class Xg extends Sg{constructor(){super("#state-page"),t(this,"name",document.querySelector("#profile-name")),t(this,"level",document.querySelector("#profile-level")),t(this,"experience",document.querySelector("#profile-experience")),t(this,"weapon",document.querySelector("#state-page > .weapon-slot")),t(this,"armour",document.querySelector("#state-page > .armour-slot")),t(this,"pendant",document.querySelector("#state-page > .pendant-slot")),t(this,"ring",document.querySelector("#state-page > .ring-slot")),t(this,"boots",document.querySelector("#state-page > .boots-slot")),t(this,"selectCallback",void 0),this.weapon.addEventListener("click",(()=>this.selectCallback?.(M.Weapon))),this.armour.addEventListener("click",(()=>this.selectCallback?.(M.Armour))),this.pendant.addEventListener("click",(()=>this.selectCallback?.(M.Pendant))),this.ring.addEventListener("click",(()=>this.selectCallback?.(M.Ring))),this.boots.addEventListener("click",(()=>this.selectCallback?.(M.Boots)))}synchronize(t){this.name.textContent=t.name,this.level.textContent=`Level ${t.level}`,this.experience.textContent=`${t.getTotalExperience()}`,this.weapon.style.backgroundImage=J.getImageURL(t.getWeapon().key),this.armour.style.backgroundImage=J.getImageURL("clotharmor"===t.getArmour().key?"":t.getArmour().key),this.pendant.style.backgroundImage=J.getImageURL(t.getPendant().key),this.ring.style.backgroundImage=J.getImageURL(t.getRing().key),this.boots.style.backgroundImage=J.getImageURL(t.getBoots().key)}onSelect(t){this.selectCallback=t}}var Tg={};
/**
             * @license
             * Lodash <https://lodash.com/>
             * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
             * Released under MIT license <https://lodash.com/license>
             * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
             * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
             */
!function(t,e){(function(){var i,n="Expected a function",r="__lodash_hash_undefined__",o="__lodash_placeholder__",a=16,s=32,l=64,h=128,d=256,u=1/0,c=9007199254740991,g=NaN,p=4294967295,f=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",s],["partialRight",l],["rearg",d]],w="[object Arguments]",m="[object Array]",_="[object Boolean]",k="[object Date]",b="[object Error]",v="[object Function]",y="[object GeneratorFunction]",x="[object Map]",S="[object Number]",C="[object Object]",E="[object Promise]",I="[object RegExp]",A="[object Set]",Y="[object String]",X="[object Symbol]",T="[object WeakMap]",L="[object ArrayBuffer]",j="[object DataView]",R="[object Float32Array]",z="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",q="[object Int32Array]",M="[object Uint8Array]",D="[object Uint8ClampedArray]",N="[object Uint16Array]",B="[object Uint32Array]",F=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,V=RegExp(U.source),G=RegExp($.source),Z=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tt=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(it.source),rt=/^\s+/,ot=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,lt=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,wt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,vt=/['\n\r\u2028\u2029\\]/g,yt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\ufe0e\\ufe0f",It="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",At="['’]",Yt="[\\ud800-\\udfff]",Xt="["+It+"]",Tt="["+yt+"]",Lt="\\d+",jt="[\\u2700-\\u27bf]",Rt="["+St+"]",zt="[^\\ud800-\\udfff"+It+Lt+xt+St+Ct+"]",Pt="\\ud83c[\\udffb-\\udfff]",Ot="[^\\ud800-\\udfff]",qt="(?:\\ud83c[\\udde6-\\uddff]){2}",Mt="[\\ud800-\\udbff][\\udc00-\\udfff]",Dt="["+Ct+"]",Nt="(?:"+Rt+"|"+zt+")",Bt="(?:"+Dt+"|"+zt+")",Ft="(?:['’](?:d|ll|m|re|s|t|ve))?",Wt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+Tt+"|"+Pt+")"+"?",Ut="[\\ufe0e\\ufe0f]?",$t=Ut+Ht+("(?:\\u200d(?:"+[Ot,qt,Mt].join("|")+")"+Ut+Ht+")*"),Vt="(?:"+[jt,qt,Mt].join("|")+")"+$t,Gt="(?:"+[Ot+Tt+"?",Tt,qt,Mt,Yt].join("|")+")",Zt=RegExp(At,"g"),Kt=RegExp(Tt,"g"),Qt=RegExp(Pt+"(?="+Pt+")|"+Gt+$t,"g"),Jt=RegExp([Dt+"?"+Rt+"+"+Ft+"(?="+[Xt,Dt,"$"].join("|")+")",Bt+"+"+Wt+"(?="+[Xt,Dt+Nt,"$"].join("|")+")",Dt+"?"+Nt+"+"+Ft,Dt+"+"+Wt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lt,Vt].join("|"),"g"),te=RegExp("[\\u200d\\ud800-\\udfff"+yt+Et+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ne=-1,re={};re[R]=re[z]=re[P]=re[O]=re[q]=re[M]=re[D]=re[N]=re[B]=!0,re[w]=re[m]=re[L]=re[_]=re[j]=re[k]=re[b]=re[v]=re[x]=re[S]=re[C]=re[I]=re[A]=re[Y]=re[T]=!1;var oe={};oe[w]=oe[m]=oe[L]=oe[j]=oe[_]=oe[k]=oe[R]=oe[z]=oe[P]=oe[O]=oe[q]=oe[x]=oe[S]=oe[C]=oe[I]=oe[A]=oe[Y]=oe[X]=oe[M]=oe[D]=oe[N]=oe[B]=!0,oe[b]=oe[v]=oe[T]=!1;var ae={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,le=parseInt,he="object"==typeof Uc&&Uc&&Uc.Object===Object&&Uc,de="object"==typeof self&&self&&self.Object===Object&&self,ue=he||de||Function("return this")(),ce=e&&!e.nodeType&&e,ge=ce&&t&&!t.nodeType&&t,pe=ge&&ge.exports===ce,fe=pe&&he.process,we=function(){try{var t=ge&&ge.require&&ge.require("util").types;return t||fe&&fe.binding&&fe.binding("util")}catch(F_){}}(),me=we&&we.isArrayBuffer,_e=we&&we.isDate,ke=we&&we.isMap,be=we&&we.isRegExp,ve=we&&we.isSet,ye=we&&we.isTypedArray;function xe(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function Se(t,e,i,n){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(n,a,i(a),t)}return n}function Ce(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function Ee(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function Ie(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function Ae(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var a=t[i];e(a,i,t)&&(o[r++]=a)}return o}function Ye(t,e){return!!(null==t?0:t.length)&&Me(t,e,0)>-1}function Xe(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}function Te(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function Le(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function je(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function Re(t,e,i,n){var r=null==t?0:t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function ze(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}var Pe=Fe("length");function Oe(t,e,i){var n;return i(t,(function(t,i,r){if(e(t,i,r))return n=i,!1})),n}function qe(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Me(t,e,i){return e==e?function(t,e,i){var n=i-1,r=t.length;for(;++n<r;)if(t[n]===e)return n;return-1}(t,e,i):qe(t,Ne,i)}function De(t,e,i,n){for(var r=i-1,o=t.length;++r<o;)if(n(t[r],e))return r;return-1}function Ne(t){return t!=t}function Be(t,e){var i=null==t?0:t.length;return i?Ue(t,e)/i:g}function Fe(t){return function(e){return null==e?i:e[t]}}function We(t){return function(e){return null==t?i:t[e]}}function He(t,e,i,n,r){return r(t,(function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)})),i}function Ue(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function $e(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function Ve(t){return t?t.slice(0,ci(t)+1).replace(rt,""):t}function Ge(t){return function(e){return t(e)}}function Ze(t,e){return Te(e,(function(e){return t[e]}))}function Ke(t,e){return t.has(e)}function Qe(t,e){for(var i=-1,n=t.length;++i<n&&Me(e,t[i],0)>-1;);return i}function Je(t,e){for(var i=t.length;i--&&Me(e,t[i],0)>-1;);return i}function ti(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}var ei=We({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ii=We({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ni(t){return"\\"+ae[t]}function ri(t){return te.test(t)}function oi(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function ai(t,e){return function(i){return t(e(i))}}function si(t,e){for(var i=-1,n=t.length,r=0,a=[];++i<n;){var s=t[i];s!==e&&s!==o||(t[i]=o,a[r++]=i)}return a}function li(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function hi(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}function di(t){return ri(t)?function(t){var e=Qt.lastIndex=0;for(;Qt.test(t);)++e;return e}(t):Pe(t)}function ui(t){return ri(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function ci(t){for(var e=t.length;e--&&ot.test(t.charAt(e)););return e}var gi=We({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var pi=function t(e){var ot=(e=null==e?ue:pi.defaults(ue.Object(),e,pi.pick(ue,ie))).Array,yt=e.Date,xt=e.Error,St=e.Function,Ct=e.Math,Et=e.Object,It=e.RegExp,At=e.String,Yt=e.TypeError,Xt=ot.prototype,Tt=St.prototype,Lt=Et.prototype,jt=e["__core-js_shared__"],Rt=Tt.toString,zt=Lt.hasOwnProperty,Pt=0,Ot=function(){var t=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),qt=Lt.toString,Mt=Rt.call(Et),Dt=ue._,Nt=It("^"+Rt.call(zt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=pe?e.Buffer:i,Ft=e.Symbol,Wt=e.Uint8Array,Ht=Bt?Bt.allocUnsafe:i,Ut=ai(Et.getPrototypeOf,Et),$t=Et.create,Vt=Lt.propertyIsEnumerable,Gt=Xt.splice,Qt=Ft?Ft.isConcatSpreadable:i,te=Ft?Ft.iterator:i,ae=Ft?Ft.toStringTag:i,he=function(){try{var t=go(Et,"defineProperty");return t({},"",{}),t}catch(F_){}}(),de=e.clearTimeout!==ue.clearTimeout&&e.clearTimeout,ce=yt&&yt.now!==ue.Date.now&&yt.now,ge=e.setTimeout!==ue.setTimeout&&e.setTimeout,fe=Ct.ceil,we=Ct.floor,Pe=Et.getOwnPropertySymbols,We=Bt?Bt.isBuffer:i,fi=e.isFinite,wi=Xt.join,mi=ai(Et.keys,Et),_i=Ct.max,ki=Ct.min,bi=yt.now,vi=e.parseInt,yi=Ct.random,xi=Xt.reverse,Si=go(e,"DataView"),Ci=go(e,"Map"),Ei=go(e,"Promise"),Ii=go(e,"Set"),Ai=go(e,"WeakMap"),Yi=go(Et,"create"),Xi=Ai&&new Ai,Ti={},Li=Do(Si),ji=Do(Ci),Ri=Do(Ei),zi=Do(Ii),Pi=Do(Ai),Oi=Ft?Ft.prototype:i,qi=Oi?Oi.valueOf:i,Mi=Oi?Oi.toString:i;function Di(t){if(ns(t)&&!Ua(t)&&!(t instanceof Wi)){if(t instanceof Fi)return t;if(zt.call(t,"__wrapped__"))return No(t)}return new Fi(t)}var Ni=function(){function t(){}return function(e){if(!is(e))return{};if($t)return $t(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Bi(){}function Fi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Wi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ui(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function $i(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Vi(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new $i;++e<i;)this.add(t[e])}function Gi(t){var e=this.__data__=new Ui(t);this.size=e.size}function Zi(t,e){var i=Ua(t),n=!i&&Ha(t),r=!i&&!n&&Za(t),o=!i&&!n&&!r&&us(t),a=i||n||r||o,s=a?$e(t.length,At):[],l=s.length;for(var h in t)!e&&!zt.call(t,h)||a&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||bo(h,l))||s.push(h);return s}function Ki(t){var e=t.length;return e?t[Gn(0,e-1)]:i}function Qi(t,e){return Oo(Xr(t),ln(e,0,t.length))}function Ji(t){return Oo(Xr(t))}function tn(t,e,n){(n!==i&&!Ba(t[e],n)||n===i&&!(e in t))&&an(t,e,n)}function en(t,e,n){var r=t[e];zt.call(t,e)&&Ba(r,n)&&(n!==i||e in t)||an(t,e,n)}function nn(t,e){for(var i=t.length;i--;)if(Ba(t[i][0],e))return i;return-1}function rn(t,e,i,n){return gn(t,(function(t,r,o){e(n,t,i(t),o)})),n}function on(t,e){return t&&Tr(e,js(e),t)}function an(t,e,i){"__proto__"==e&&he?he(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function sn(t,e){for(var n=-1,r=e.length,o=ot(r),a=null==t;++n<r;)o[n]=a?i:As(t,e[n]);return o}function ln(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function hn(t,e,n,r,o,a){var s,l=1&e,h=2&e,d=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!is(t))return t;var u=Ua(t);if(u){if(s=function(t){var e=t.length,i=new t.constructor(e);e&&"string"==typeof t[0]&&zt.call(t,"index")&&(i.index=t.index,i.input=t.input);return i}(t),!l)return Xr(t,s)}else{var c=wo(t),g=c==v||c==y;if(Za(t))return Sr(t,l);if(c==C||c==w||g&&!o){if(s=h||g?{}:_o(t),!l)return h?function(t,e){return Tr(t,fo(t),e)}(t,function(t,e){return t&&Tr(e,Rs(e),t)}(s,t)):function(t,e){return Tr(t,po(t),e)}(t,on(s,t))}else{if(!oe[c])return o?t:{};s=function(t,e,i){var n=t.constructor;switch(e){case L:return Cr(t);case _:case k:return new n(+t);case j:return function(t,e){var i=e?Cr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case R:case z:case P:case O:case q:case M:case D:case N:case B:return Er(t,i);case x:return new n;case S:case Y:return new n(t);case I:return function(t){var e=new t.constructor(t.source,gt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case A:return new n;case X:return r=t,qi?Et(qi.call(r)):{}}var r}(t,c,l)}}a||(a=new Gi);var p=a.get(t);if(p)return p;a.set(t,s),ls(t)?t.forEach((function(i){s.add(hn(i,e,n,i,t,a))})):rs(t)&&t.forEach((function(i,r){s.set(r,hn(i,e,n,r,t,a))}));var f=u?i:(d?h?oo:ro:h?Rs:js)(t);return Ce(f||t,(function(i,r){f&&(i=t[r=i]),en(s,r,hn(i,e,n,r,t,a))})),s}function dn(t,e,n){var r=n.length;if(null==t)return!r;for(t=Et(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function un(t,e,r){if("function"!=typeof t)throw new Yt(n);return jo((function(){t.apply(i,r)}),e)}function cn(t,e,i,n){var r=-1,o=Ye,a=!0,s=t.length,l=[],h=e.length;if(!s)return l;i&&(e=Te(e,Ge(i))),n?(o=Xe,a=!1):e.length>=200&&(o=Ke,a=!1,e=new Vi(e));t:for(;++r<s;){var d=t[r],u=null==i?d:i(d);if(d=n||0!==d?d:0,a&&u==u){for(var c=h;c--;)if(e[c]===u)continue t;l.push(d)}else o(e,u,n)||l.push(d)}return l}Di.templateSettings={escape:Z,evaluate:K,interpolate:Q,variable:"",imports:{_:Di}},Di.prototype=Bi.prototype,Di.prototype.constructor=Di,Fi.prototype=Ni(Bi.prototype),Fi.prototype.constructor=Fi,Wi.prototype=Ni(Bi.prototype),Wi.prototype.constructor=Wi,Hi.prototype.clear=function(){this.__data__=Yi?Yi(null):{},this.size=0},Hi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hi.prototype.get=function(t){var e=this.__data__;if(Yi){var n=e[t];return n===r?i:n}return zt.call(e,t)?e[t]:i},Hi.prototype.has=function(t){var e=this.__data__;return Yi?e[t]!==i:zt.call(e,t)},Hi.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Yi&&e===i?r:e,this},Ui.prototype.clear=function(){this.__data__=[],this.size=0},Ui.prototype.delete=function(t){var e=this.__data__,i=nn(e,t);return!(i<0)&&(i==e.length-1?e.pop():Gt.call(e,i,1),--this.size,!0)},Ui.prototype.get=function(t){var e=this.__data__,n=nn(e,t);return n<0?i:e[n][1]},Ui.prototype.has=function(t){return nn(this.__data__,t)>-1},Ui.prototype.set=function(t,e){var i=this.__data__,n=nn(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},$i.prototype.clear=function(){this.size=0,this.__data__={hash:new Hi,map:new(Ci||Ui),string:new Hi}},$i.prototype.delete=function(t){var e=uo(this,t).delete(t);return this.size-=e?1:0,e},$i.prototype.get=function(t){return uo(this,t).get(t)},$i.prototype.has=function(t){return uo(this,t).has(t)},$i.prototype.set=function(t,e){var i=uo(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},Vi.prototype.add=Vi.prototype.push=function(t){return this.__data__.set(t,r),this},Vi.prototype.has=function(t){return this.__data__.has(t)},Gi.prototype.clear=function(){this.__data__=new Ui,this.size=0},Gi.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Gi.prototype.get=function(t){return this.__data__.get(t)},Gi.prototype.has=function(t){return this.__data__.has(t)},Gi.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Ui){var n=i.__data__;if(!Ci||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new $i(n)}return i.set(t,e),this.size=i.size,this};var gn=Rr(vn),pn=Rr(yn,!0);function fn(t,e){var i=!0;return gn(t,(function(t,n,r){return i=!!e(t,n,r)})),i}function wn(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(l===i?s==s&&!ds(s):n(s,l)))var l=s,h=a}return h}function mn(t,e){var i=[];return gn(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function _n(t,e,i,n,r){var o=-1,a=t.length;for(i||(i=ko),r||(r=[]);++o<a;){var s=t[o];e>0&&i(s)?e>1?_n(s,e-1,i,n,r):Le(r,s):n||(r[r.length]=s)}return r}var kn=zr(),bn=zr(!0);function vn(t,e){return t&&kn(t,e,js)}function yn(t,e){return t&&bn(t,e,js)}function xn(t,e){return Ae(e,(function(e){return Ja(t[e])}))}function Sn(t,e){for(var n=0,r=(e=br(e,t)).length;null!=t&&n<r;)t=t[Mo(e[n++])];return n&&n==r?t:i}function Cn(t,e,i){var n=e(t);return Ua(t)?n:Le(n,i(t))}function En(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in Et(t)?function(t){var e=zt.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(F_){}var o=qt.call(t);r&&(e?t[ae]=n:delete t[ae]);return o}(t):function(t){return qt.call(t)}(t)}function In(t,e){return t>e}function An(t,e){return null!=t&&zt.call(t,e)}function Yn(t,e){return null!=t&&e in Et(t)}function Xn(t,e,n){for(var r=n?Xe:Ye,o=t[0].length,a=t.length,s=a,l=ot(a),h=1/0,d=[];s--;){var u=t[s];s&&e&&(u=Te(u,Ge(e))),h=ki(u.length,h),l[s]=!n&&(e||o>=120&&u.length>=120)?new Vi(s&&u):i}u=t[0];var c=-1,g=l[0];t:for(;++c<o&&d.length<h;){var p=u[c],f=e?e(p):p;if(p=n||0!==p?p:0,!(g?Ke(g,f):r(d,f,n))){for(s=a;--s;){var w=l[s];if(!(w?Ke(w,f):r(t[s],f,n)))continue t}g&&g.push(f),d.push(p)}}return d}function Tn(t,e,n){var r=null==(t=Yo(t,e=br(e,t)))?t:t[Mo(Qo(e))];return null==r?i:xe(r,t,n)}function Ln(t){return ns(t)&&En(t)==w}function jn(t,e,n,r,o){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=Ua(t),l=Ua(e),h=s?m:wo(t),d=l?m:wo(e),u=(h=h==w?C:h)==C,c=(d=d==w?C:d)==C,g=h==d;if(g&&Za(t)){if(!Za(e))return!1;s=!0,u=!1}if(g&&!u)return a||(a=new Gi),s||us(t)?io(t,e,n,r,o,a):function(t,e,i,n,r,o,a){switch(i){case j:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!o(new Wt(t),new Wt(e)));case _:case k:case S:return Ba(+t,+e);case b:return t.name==e.name&&t.message==e.message;case I:case Y:return t==e+"";case x:var s=oi;case A:var l=1&n;if(s||(s=li),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;n|=2,a.set(t,e);var d=io(s(t),s(e),n,r,o,a);return a.delete(t),d;case X:if(qi)return qi.call(t)==qi.call(e)}return!1}(t,e,h,n,r,o,a);if(!(1&n)){var p=u&&zt.call(t,"__wrapped__"),f=c&&zt.call(e,"__wrapped__");if(p||f){var v=p?t.value():t,y=f?e.value():e;return a||(a=new Gi),o(v,y,n,r,a)}}if(!g)return!1;return a||(a=new Gi),function(t,e,n,r,o,a){var s=1&n,l=ro(t),h=l.length,d=ro(e).length;if(h!=d&&!s)return!1;var u=h;for(;u--;){var c=l[u];if(!(s?c in e:zt.call(e,c)))return!1}var g=a.get(t),p=a.get(e);if(g&&p)return g==e&&p==t;var f=!0;a.set(t,e),a.set(e,t);var w=s;for(;++u<h;){var m=t[c=l[u]],_=e[c];if(r)var k=s?r(_,m,c,e,t,a):r(m,_,c,t,e,a);if(!(k===i?m===_||o(m,_,n,r,a):k)){f=!1;break}w||(w="constructor"==c)}if(f&&!w){var b=t.constructor,v=e.constructor;b==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,r,o,a)}(t,e,n,r,jn,o))}function Rn(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Et(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var h=(l=n[o])[0],d=t[h],u=l[1];if(s&&l[2]){if(d===i&&!(h in t))return!1}else{var c=new Gi;if(r)var g=r(d,u,h,t,e,c);if(!(g===i?jn(u,d,3,r,c):g))return!1}}return!0}function zn(t){return!(!is(t)||function(t){return!!Ot&&Ot in t}(t))&&(Ja(t)?Nt:wt).test(Do(t))}function Pn(t){return"function"==typeof t?t:null==t?ol:"object"==typeof t?Ua(t)?Bn(t[0],t[1]):Nn(t):pl(t)}function On(t){if(!Co(t))return mi(t);var e=[];for(var i in Et(t))zt.call(t,i)&&"constructor"!=i&&e.push(i);return e}function qn(t){if(!is(t))return function(t){var e=[];if(null!=t)for(var i in Et(t))e.push(i);return e}(t);var e=Co(t),i=[];for(var n in t)("constructor"!=n||!e&&zt.call(t,n))&&i.push(n);return i}function Mn(t,e){return t<e}function Dn(t,e){var i=-1,n=Va(t)?ot(t.length):[];return gn(t,(function(t,r,o){n[++i]=e(t,r,o)})),n}function Nn(t){var e=co(t);return 1==e.length&&e[0][2]?Io(e[0][0],e[0][1]):function(i){return i===t||Rn(i,t,e)}}function Bn(t,e){return yo(t)&&Eo(e)?Io(Mo(t),e):function(n){var r=As(n,t);return r===i&&r===e?Ys(n,t):jn(e,r,3)}}function Fn(t,e,n,r,o){t!==e&&kn(e,(function(a,s){if(o||(o=new Gi),is(a))!function(t,e,n,r,o,a,s){var l=To(t,n),h=To(e,n),d=s.get(h);if(d)return void tn(t,n,d);var u=a?a(l,h,n+"",t,e,s):i,c=u===i;if(c){var g=Ua(h),p=!g&&Za(h),f=!g&&!p&&us(h);u=h,g||p||f?Ua(l)?u=l:Ga(l)?u=Xr(l):p?(c=!1,u=Sr(h,!0)):f?(c=!1,u=Er(h,!0)):u=[]:as(h)||Ha(h)?(u=l,Ha(l)?u=ks(l):is(l)&&!Ja(l)||(u=_o(h))):c=!1}c&&(s.set(h,u),o(u,h,r,a,s),s.delete(h));tn(t,n,u)}(t,e,s,n,Fn,r,o);else{var l=r?r(To(t,s),a,s+"",t,e,o):i;l===i&&(l=a),tn(t,s,l)}}),Rs)}function Wn(t,e){var n=t.length;if(n)return bo(e+=e<0?n:0,n)?t[e]:i}function Hn(t,e,i){e=e.length?Te(e,(function(t){return Ua(t)?function(e){return Sn(e,1===t.length?t[0]:t)}:t})):[ol];var n=-1;e=Te(e,Ge(ho()));var r=Dn(t,(function(t,i,r){var o=Te(e,(function(e){return e(t)}));return{criteria:o,index:++n,value:t}}));return function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(r,(function(t,e){return function(t,e,i){var n=-1,r=t.criteria,o=e.criteria,a=r.length,s=i.length;for(;++n<a;){var l=Ir(r[n],o[n]);if(l)return n>=s?l:l*("desc"==i[n]?-1:1)}return t.index-e.index}(t,e,i)}))}function Un(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var a=e[n],s=Sn(t,a);i(s,a)&&tr(o,br(a,t),s)}return o}function $n(t,e,i,n){var r=n?De:Me,o=-1,a=e.length,s=t;for(t===e&&(e=Xr(e)),i&&(s=Te(t,Ge(i)));++o<a;)for(var l=0,h=e[o],d=i?i(h):h;(l=r(s,d,l,n))>-1;)s!==t&&Gt.call(s,l,1),Gt.call(t,l,1);return t}function Vn(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==o){var o=r;bo(r)?Gt.call(t,r,1):cr(t,r)}}return t}function Gn(t,e){return t+we(yi()*(e-t+1))}function Zn(t,e){var i="";if(!t||e<1||e>c)return i;do{e%2&&(i+=t),(e=we(e/2))&&(t+=t)}while(e);return i}function Kn(t,e){return Ro(Ao(t,e,ol),t+"")}function Qn(t){return Ki(Bs(t))}function Jn(t,e){var i=Bs(t);return Oo(i,ln(e,0,i.length))}function tr(t,e,n,r){if(!is(t))return t;for(var o=-1,a=(e=br(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var h=Mo(e[o]),d=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(o!=s){var u=l[h];(d=r?r(u,h,l):i)===i&&(d=is(u)?u:bo(e[o+1])?[]:{})}en(l,h,d),l=l[h]}return t}var er=Xi?function(t,e){return Xi.set(t,e),t}:ol,ir=he?function(t,e){return he(t,"toString",{configurable:!0,enumerable:!1,value:il(e),writable:!0})}:ol;function nr(t){return Oo(Bs(t))}function rr(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=ot(r);++n<r;)o[n]=t[n+e];return o}function or(t,e){var i;return gn(t,(function(t,n,r){return!(i=e(t,n,r))})),!!i}function ar(t,e,i){var n=0,r=null==t?n:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;n<r;){var o=n+r>>>1,a=t[o];null!==a&&!ds(a)&&(i?a<=e:a<e)?n=o+1:r=o}return r}return sr(t,e,ol,i)}function sr(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,l=null===e,h=ds(e),d=e===i;o<a;){var u=we((o+a)/2),c=n(t[u]),g=c!==i,p=null===c,f=c==c,w=ds(c);if(s)var m=r||f;else m=d?f&&(r||g):l?f&&g&&(r||!p):h?f&&g&&!p&&(r||!w):!p&&!w&&(r?c<=e:c<e);m?o=u+1:a=u}return ki(a,4294967294)}function lr(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var a=t[i],s=e?e(a):a;if(!i||!Ba(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function hr(t){return"number"==typeof t?t:ds(t)?g:+t}function dr(t){if("string"==typeof t)return t;if(Ua(t))return Te(t,dr)+"";if(ds(t))return Mi?Mi.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ur(t,e,i){var n=-1,r=Ye,o=t.length,a=!0,s=[],l=s;if(i)a=!1,r=Xe;else if(o>=200){var h=e?null:Zr(t);if(h)return li(h);a=!1,r=Ke,l=new Vi}else l=e?[]:s;t:for(;++n<o;){var d=t[n],u=e?e(d):d;if(d=i||0!==d?d:0,a&&u==u){for(var c=l.length;c--;)if(l[c]===u)continue t;e&&l.push(u),s.push(d)}else r(l,u,i)||(l!==s&&l.push(u),s.push(d))}return s}function cr(t,e){return null==(t=Yo(t,e=br(e,t)))||delete t[Mo(Qo(e))]}function gr(t,e,i,n){return tr(t,e,i(Sn(t,e)),n)}function pr(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?rr(t,n?0:o,n?o+1:r):rr(t,n?o+1:0,n?r:o)}function fr(t,e){var i=t;return i instanceof Wi&&(i=i.value()),je(e,(function(t,e){return e.func.apply(e.thisArg,Le([t],e.args))}),i)}function wr(t,e,i){var n=t.length;if(n<2)return n?ur(t[0]):[];for(var r=-1,o=ot(n);++r<n;)for(var a=t[r],s=-1;++s<n;)s!=r&&(o[r]=cn(o[r]||a,t[s],e,i));return ur(_n(o,1),e,i)}function mr(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var l=r<a?e[r]:i;n(s,t[r],l)}return s}function _r(t){return Ga(t)?t:[]}function kr(t){return"function"==typeof t?t:ol}function br(t,e){return Ua(t)?t:yo(t,e)?[t]:qo(bs(t))}var vr=Kn;function yr(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:rr(t,e,n)}var xr=de||function(t){return ue.clearTimeout(t)};function Sr(t,e){if(e)return t.slice();var i=t.length,n=Ht?Ht(i):new t.constructor(i);return t.copy(n),n}function Cr(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function Er(t,e){var i=e?Cr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Ir(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=ds(t),s=e!==i,l=null===e,h=e==e,d=ds(e);if(!l&&!d&&!a&&t>e||a&&s&&h&&!l&&!d||r&&s&&h||!n&&h||!o)return 1;if(!r&&!a&&!d&&t<e||d&&n&&o&&!r&&!a||l&&n&&o||!s&&o||!h)return-1}return 0}function Ar(t,e,i,n){for(var r=-1,o=t.length,a=i.length,s=-1,l=e.length,h=_i(o-a,0),d=ot(l+h),u=!n;++s<l;)d[s]=e[s];for(;++r<a;)(u||r<o)&&(d[i[r]]=t[r]);for(;h--;)d[s++]=t[r++];return d}function Yr(t,e,i,n){for(var r=-1,o=t.length,a=-1,s=i.length,l=-1,h=e.length,d=_i(o-s,0),u=ot(d+h),c=!n;++r<d;)u[r]=t[r];for(var g=r;++l<h;)u[g+l]=e[l];for(;++a<s;)(c||r<o)&&(u[g+i[a]]=t[r++]);return u}function Xr(t,e){var i=-1,n=t.length;for(e||(e=ot(n));++i<n;)e[i]=t[i];return e}function Tr(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],h=r?r(n[l],t[l],l,n,t):i;h===i&&(h=t[l]),o?an(n,l,h):en(n,l,h)}return n}function Lr(t,e){return function(i,n){var r=Ua(i)?Se:rn,o=e?e():{};return r(i,t,ho(n,2),o)}}function jr(t){return Kn((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&vo(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Et(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e}))}function Rr(t,e){return function(i,n){if(null==i)return i;if(!Va(i))return t(i,n);for(var r=i.length,o=e?r:-1,a=Et(i);(e?o--:++o<r)&&!1!==n(a[o],o,a););return i}}function zr(t){return function(e,i,n){for(var r=-1,o=Et(e),a=n(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===i(o[l],l,o))break}return e}}function Pr(t){return function(e){var n=ri(e=bs(e))?ui(e):i,r=n?n[0]:e.charAt(0),o=n?yr(n,1).join(""):e.slice(1);return r[t]()+o}}function Or(t){return function(e){return je(Js(Hs(e).replace(Zt,"")),t,"")}}function qr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ni(t.prototype),n=t.apply(i,e);return is(n)?n:i}}function Mr(t){return function(e,n,r){var o=Et(e);if(!Va(e)){var a=ho(n,3);e=js(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function Dr(t){return no((function(e){var r=e.length,o=r,a=Fi.prototype.thru;for(t&&e.reverse();o--;){var s=e[o];if("function"!=typeof s)throw new Yt(n);if(a&&!l&&"wrapper"==so(s))var l=new Fi([],!0)}for(o=l?o:r;++o<r;){var h=so(s=e[o]),d="wrapper"==h?ao(s):i;l=d&&xo(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?l[so(d[0])].apply(l,d[3]):1==s.length&&xo(s)?l[h]():l.thru(s)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&Ua(i))return l.plant(i).value();for(var n=0,o=r?e[n].apply(this,t):i;++n<r;)o=e[n].call(this,o);return o}}))}function Nr(t,e,n,r,o,a,s,l,d,u){var c=e&h,g=1&e,p=2&e,f=24&e,w=512&e,m=p?i:qr(t);return function i(){for(var h=arguments.length,_=ot(h),k=h;k--;)_[k]=arguments[k];if(f)var b=lo(i),v=ti(_,b);if(r&&(_=Ar(_,r,o,f)),a&&(_=Yr(_,a,s,f)),h-=v,f&&h<u){var y=si(_,b);return Vr(t,e,Nr,i.placeholder,n,_,y,l,d,u-h)}var x=g?n:this,S=p?x[t]:t;return h=_.length,l?_=Xo(_,l):w&&h>1&&_.reverse(),c&&d<h&&(_.length=d),this&&this!==ue&&this instanceof i&&(S=m||qr(S)),S.apply(x,_)}}function Br(t,e){return function(i,n){return function(t,e,i,n){return vn(t,(function(t,r,o){e(n,i(t),r,o)})),n}(i,t,e(n),{})}}function Fr(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=dr(n),r=dr(r)):(n=hr(n),r=hr(r)),o=t(n,r)}return o}}function Wr(t){return no((function(e){return e=Te(e,Ge(ho())),Kn((function(i){var n=this;return t(e,(function(t){return xe(t,n,i)}))}))}))}function Hr(t,e){var n=(e=e===i?" ":dr(e)).length;if(n<2)return n?Zn(e,t):e;var r=Zn(e,fe(t/di(e)));return ri(e)?yr(ui(r),0,t).join(""):r.slice(0,t)}function Ur(t){return function(e,n,r){return r&&"number"!=typeof r&&vo(e,n,r)&&(n=r=i),e=fs(e),n===i?(n=e,e=0):n=fs(n),function(t,e,i,n){for(var r=-1,o=_i(fe((e-t)/(i||1)),0),a=ot(o);o--;)a[n?o:++r]=t,t+=i;return a}(e,n,r=r===i?e<n?1:-1:fs(r),t)}}function $r(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=_s(e),i=_s(i)),t(e,i)}}function Vr(t,e,n,r,o,a,h,d,u,c){var g=8&e;e|=g?s:l,4&(e&=~(g?l:s))||(e&=-4);var p=[t,e,o,g?a:i,g?h:i,g?i:a,g?i:h,d,u,c],f=n.apply(i,p);return xo(t)&&Lo(f,p),f.placeholder=r,zo(f,t,e)}function Gr(t){var e=Ct[t];return function(t,i){if(t=_s(t),(i=null==i?0:ki(ws(i),292))&&fi(t)){var n=(bs(t)+"e").split("e");return+((n=(bs(e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}var Zr=Ii&&1/li(new Ii([,-0]))[1]==u?function(t){return new Ii(t)}:dl;function Kr(t){return function(e){var i=wo(e);return i==x?oi(e):i==A?hi(e):function(t,e){return Te(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qr(t,e,r,u,c,g,p,f){var w=2&e;if(!w&&"function"!=typeof t)throw new Yt(n);var m=u?u.length:0;if(m||(e&=-97,u=c=i),p=p===i?p:_i(ws(p),0),f=f===i?f:ws(f),m-=c?c.length:0,e&l){var _=u,k=c;u=c=i}var b=w?i:ao(t),v=[t,e,r,u,c,_,k,g,p,f];if(b&&function(t,e){var i=t[1],n=e[1],r=i|n,a=r<131,s=n==h&&8==i||n==h&&i==d&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==i;if(!a&&!s)return t;1&n&&(t[2]=e[2],r|=1&i?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?Ar(u,l,e[4]):l,t[4]=u?si(t[3],o):e[4]}(l=e[5])&&(u=t[5],t[5]=u?Yr(u,l,e[6]):l,t[6]=u?si(t[5],o):e[6]);(l=e[7])&&(t[7]=l);n&h&&(t[8]=null==t[8]?e[8]:ki(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=r}(v,b),t=v[0],e=v[1],r=v[2],u=v[3],c=v[4],!(f=v[9]=v[9]===i?w?0:t.length:_i(v[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||e==a?function(t,e,n){var r=qr(t);return function o(){for(var a=arguments.length,s=ot(a),l=a,h=lo(o);l--;)s[l]=arguments[l];var d=a<3&&s[0]!==h&&s[a-1]!==h?[]:si(s,h);return(a-=d.length)<n?Vr(t,e,Nr,o.placeholder,i,s,d,i,i,n-a):xe(this&&this!==ue&&this instanceof o?r:t,this,s)}}(t,e,f):e!=s&&33!=e||c.length?Nr.apply(i,v):function(t,e,i,n){var r=1&e,o=qr(t);return function e(){for(var a=-1,s=arguments.length,l=-1,h=n.length,d=ot(h+s),u=this&&this!==ue&&this instanceof e?o:t;++l<h;)d[l]=n[l];for(;s--;)d[l++]=arguments[++a];return xe(u,r?i:this,d)}}(t,e,r,u);else var y=function(t,e,i){var n=1&e,r=qr(t);return function e(){return(this&&this!==ue&&this instanceof e?r:t).apply(n?i:this,arguments)}}(t,e,r);return zo((b?er:Lo)(y,v),t,e)}function Jr(t,e,n,r){return t===i||Ba(t,Lt[n])&&!zt.call(r,n)?e:t}function to(t,e,n,r,o,a){return is(t)&&is(e)&&(a.set(e,t),Fn(t,e,i,to,a),a.delete(e)),t}function eo(t){return as(t)?i:t}function io(t,e,n,r,o,a){var s=1&n,l=t.length,h=e.length;if(l!=h&&!(s&&h>l))return!1;var d=a.get(t),u=a.get(e);if(d&&u)return d==e&&u==t;var c=-1,g=!0,p=2&n?new Vi:i;for(a.set(t,e),a.set(e,t);++c<l;){var f=t[c],w=e[c];if(r)var m=s?r(w,f,c,e,t,a):r(f,w,c,t,e,a);if(m!==i){if(m)continue;g=!1;break}if(p){if(!ze(e,(function(t,e){if(!Ke(p,e)&&(f===t||o(f,t,n,r,a)))return p.push(e)}))){g=!1;break}}else if(f!==w&&!o(f,w,n,r,a)){g=!1;break}}return a.delete(t),a.delete(e),g}function no(t){return Ro(Ao(t,i,$o),t+"")}function ro(t){return Cn(t,js,po)}function oo(t){return Cn(t,Rs,fo)}var ao=Xi?function(t){return Xi.get(t)}:dl;function so(t){for(var e=t.name+"",i=Ti[e],n=zt.call(Ti,e)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function lo(t){return(zt.call(Di,"placeholder")?Di:t).placeholder}function ho(){var t=Di.iteratee||al;return t=t===al?Pn:t,arguments.length?t(arguments[0],arguments[1]):t}function uo(t,e){var i=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?i["string"==typeof e?"string":"hash"]:i.map}function co(t){for(var e=js(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,Eo(r)]}return e}function go(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return zn(n)?n:i}var po=Pe?function(t){return null==t?[]:(t=Et(t),Ae(Pe(t),(function(e){return Vt.call(t,e)})))}:ml,fo=Pe?function(t){for(var e=[];t;)Le(e,po(t)),t=Ut(t);return e}:ml,wo=En;function mo(t,e,i){for(var n=-1,r=(e=br(e,t)).length,o=!1;++n<r;){var a=Mo(e[n]);if(!(o=null!=t&&i(t,a)))break;t=t[a]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&es(r)&&bo(a,r)&&(Ua(t)||Ha(t))}function _o(t){return"function"!=typeof t.constructor||Co(t)?{}:Ni(Ut(t))}function ko(t){return Ua(t)||Ha(t)||!!(Qt&&t&&t[Qt])}function bo(t,e){var i=typeof t;return!!(e=null==e?c:e)&&("number"==i||"symbol"!=i&&_t.test(t))&&t>-1&&t%1==0&&t<e}function vo(t,e,i){if(!is(i))return!1;var n=typeof e;return!!("number"==n?Va(i)&&bo(e,i.length):"string"==n&&e in i)&&Ba(i[e],t)}function yo(t,e){if(Ua(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!ds(t))||(tt.test(t)||!J.test(t)||null!=e&&t in Et(e))}function xo(t){var e=so(t),i=Di[e];if("function"!=typeof i||!(e in Wi.prototype))return!1;if(t===i)return!0;var n=ao(i);return!!n&&t===n[0]}(Si&&wo(new Si(new ArrayBuffer(1)))!=j||Ci&&wo(new Ci)!=x||Ei&&wo(Ei.resolve())!=E||Ii&&wo(new Ii)!=A||Ai&&wo(new Ai)!=T)&&(wo=function(t){var e=En(t),n=e==C?t.constructor:i,r=n?Do(n):"";if(r)switch(r){case Li:return j;case ji:return x;case Ri:return E;case zi:return A;case Pi:return T}return e});var So=jt?Ja:_l;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function Eo(t){return t==t&&!is(t)}function Io(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==i||t in Et(n)))}}function Ao(t,e,n){return e=_i(e===i?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=_i(i.length-e,0),a=ot(o);++r<o;)a[r]=i[e+r];r=-1;for(var s=ot(e+1);++r<e;)s[r]=i[r];return s[e]=n(a),xe(t,this,s)}}function Yo(t,e){return e.length<2?t:Sn(t,rr(e,0,-1))}function Xo(t,e){for(var n=t.length,r=ki(e.length,n),o=Xr(t);r--;){var a=e[r];t[r]=bo(a,n)?o[a]:i}return t}function To(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Lo=Po(er),jo=ge||function(t,e){return ue.setTimeout(t,e)},Ro=Po(ir);function zo(t,e,i){var n=e+"";return Ro(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Ce(f,(function(i){var n="_."+i[0];e&i[1]&&!Ye(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(lt):[]}(n),i)))}function Po(t){var e=0,n=0;return function(){var r=bi(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Oo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Gn(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var qo=function(t){var e=Pa(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(et,(function(t,i,n,r){e.push(n?r.replace(ut,"$1"):i||t)})),e}));function Mo(t){if("string"==typeof t||ds(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Do(t){if(null!=t){try{return Rt.call(t)}catch(F_){}try{return t+""}catch(F_){}}return""}function No(t){if(t instanceof Wi)return t.clone();var e=new Fi(t.__wrapped__,t.__chain__);return e.__actions__=Xr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Bo=Kn((function(t,e){return Ga(t)?cn(t,_n(e,1,Ga,!0)):[]})),Fo=Kn((function(t,e){var n=Qo(e);return Ga(n)&&(n=i),Ga(t)?cn(t,_n(e,1,Ga,!0),ho(n,2)):[]})),Wo=Kn((function(t,e){var n=Qo(e);return Ga(n)&&(n=i),Ga(t)?cn(t,_n(e,1,Ga,!0),i,n):[]}));function Ho(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:ws(i);return r<0&&(r=_i(n+r,0)),qe(t,ho(e,3),r)}function Uo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ws(n),o=n<0?_i(r+o,0):ki(o,r-1)),qe(t,ho(e,3),o,!0)}function $o(t){return(null==t?0:t.length)?_n(t,1):[]}function Vo(t){return t&&t.length?t[0]:i}var Go=Kn((function(t){var e=Te(t,_r);return e.length&&e[0]===t[0]?Xn(e):[]})),Zo=Kn((function(t){var e=Qo(t),n=Te(t,_r);return e===Qo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Xn(n,ho(e,2)):[]})),Ko=Kn((function(t){var e=Qo(t),n=Te(t,_r);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Xn(n,i,e):[]}));function Qo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=Kn(ta);function ta(t,e){return t&&t.length&&e&&e.length?$n(t,e):t}var ea=no((function(t,e){var i=null==t?0:t.length,n=sn(t,e);return Vn(t,Te(e,(function(t){return bo(t,i)?+t:t})).sort(Ir)),n}));function ia(t){return null==t?t:xi.call(t)}var na=Kn((function(t){return ur(_n(t,1,Ga,!0))})),ra=Kn((function(t){var e=Qo(t);return Ga(e)&&(e=i),ur(_n(t,1,Ga,!0),ho(e,2))})),oa=Kn((function(t){var e=Qo(t);return e="function"==typeof e?e:i,ur(_n(t,1,Ga,!0),i,e)}));function aa(t){if(!t||!t.length)return[];var e=0;return t=Ae(t,(function(t){if(Ga(t))return e=_i(t.length,e),!0})),$e(e,(function(e){return Te(t,Fe(e))}))}function sa(t,e){if(!t||!t.length)return[];var n=aa(t);return null==e?n:Te(n,(function(t){return xe(e,i,t)}))}var la=Kn((function(t,e){return Ga(t)?cn(t,e):[]})),ha=Kn((function(t){return wr(Ae(t,Ga))})),da=Kn((function(t){var e=Qo(t);return Ga(e)&&(e=i),wr(Ae(t,Ga),ho(e,2))})),ua=Kn((function(t){var e=Qo(t);return e="function"==typeof e?e:i,wr(Ae(t,Ga),i,e)})),ca=Kn(aa);var ga=Kn((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,sa(t,n)}));function pa(t){var e=Di(t);return e.__chain__=!0,e}function fa(t,e){return e(t)}var wa=no((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return sn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Wi&&bo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fa,args:[o],thisArg:i}),new Fi(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)}));var ma=Lr((function(t,e,i){zt.call(t,i)?++t[i]:an(t,i,1)}));var _a=Mr(Ho),ka=Mr(Uo);function ba(t,e){return(Ua(t)?Ce:gn)(t,ho(e,3))}function va(t,e){return(Ua(t)?Ee:pn)(t,ho(e,3))}var ya=Lr((function(t,e,i){zt.call(t,i)?t[i].push(e):an(t,i,[e])}));var xa=Kn((function(t,e,i){var n=-1,r="function"==typeof e,o=Va(t)?ot(t.length):[];return gn(t,(function(t){o[++n]=r?xe(e,t,i):Tn(t,e,i)})),o})),Sa=Lr((function(t,e,i){an(t,i,e)}));function Ca(t,e){return(Ua(t)?Te:Dn)(t,ho(e,3))}var Ea=Lr((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]}));var Ia=Kn((function(t,e){if(null==t)return[];var i=e.length;return i>1&&vo(t,e[0],e[1])?e=[]:i>2&&vo(e[0],e[1],e[2])&&(e=[e[0]]),Hn(t,_n(e,1),[])})),Aa=ce||function(){return ue.Date.now()};function Ya(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Qr(t,h,i,i,i,i,e)}function Xa(t,e){var r;if("function"!=typeof e)throw new Yt(n);return t=ws(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=i),r}}var Ta=Kn((function(t,e,i){var n=1;if(i.length){var r=si(i,lo(Ta));n|=s}return Qr(t,n,e,i,r)})),La=Kn((function(t,e,i){var n=3;if(i.length){var r=si(i,lo(La));n|=s}return Qr(e,n,t,i,r)}));function ja(t,e,r){var o,a,s,l,h,d,u=0,c=!1,g=!1,p=!0;if("function"!=typeof t)throw new Yt(n);function f(e){var n=o,r=a;return o=a=i,u=e,l=t.apply(r,n)}function w(t){return u=t,h=jo(_,e),c?f(t):l}function m(t){var n=t-d;return d===i||n>=e||n<0||g&&t-u>=s}function _(){var t=Aa();if(m(t))return k(t);h=jo(_,function(t){var i=e-(t-d);return g?ki(i,s-(t-u)):i}(t))}function k(t){return h=i,p&&o?f(t):(o=a=i,l)}function b(){var t=Aa(),n=m(t);if(o=arguments,a=this,d=t,n){if(h===i)return w(d);if(g)return xr(h),h=jo(_,e),f(d)}return h===i&&(h=jo(_,e)),l}return e=_s(e)||0,is(r)&&(c=!!r.leading,s=(g="maxWait"in r)?_i(_s(r.maxWait)||0,e):s,p="trailing"in r?!!r.trailing:p),b.cancel=function(){h!==i&&xr(h),u=0,o=d=a=h=i},b.flush=function(){return h===i?l:k(Aa())},b}var Ra=Kn((function(t,e){return un(t,1,e)})),za=Kn((function(t,e,i){return un(t,_s(e)||0,i)}));function Pa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Yt(n);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,n);return i.cache=o.set(r,a)||o,a};return i.cache=new(Pa.Cache||$i),i}function Oa(t){if("function"!=typeof t)throw new Yt(n);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Pa.Cache=$i;var qa=vr((function(t,e){var i=(e=1==e.length&&Ua(e[0])?Te(e[0],Ge(ho())):Te(_n(e,1),Ge(ho()))).length;return Kn((function(n){for(var r=-1,o=ki(n.length,i);++r<o;)n[r]=e[r].call(this,n[r]);return xe(t,this,n)}))})),Ma=Kn((function(t,e){var n=si(e,lo(Ma));return Qr(t,s,i,e,n)})),Da=Kn((function(t,e){var n=si(e,lo(Da));return Qr(t,l,i,e,n)})),Na=no((function(t,e){return Qr(t,d,i,i,i,e)}));function Ba(t,e){return t===e||t!=t&&e!=e}var Fa=$r(In),Wa=$r((function(t,e){return t>=e})),Ha=Ln(function(){return arguments}())?Ln:function(t){return ns(t)&&zt.call(t,"callee")&&!Vt.call(t,"callee")},Ua=ot.isArray,$a=me?Ge(me):function(t){return ns(t)&&En(t)==L};function Va(t){return null!=t&&es(t.length)&&!Ja(t)}function Ga(t){return ns(t)&&Va(t)}var Za=We||_l,Ka=_e?Ge(_e):function(t){return ns(t)&&En(t)==k};function Qa(t){if(!ns(t))return!1;var e=En(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!as(t)}function Ja(t){if(!is(t))return!1;var e=En(t);return e==v||e==y||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ts(t){return"number"==typeof t&&t==ws(t)}function es(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function is(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var rs=ke?Ge(ke):function(t){return ns(t)&&wo(t)==x};function os(t){return"number"==typeof t||ns(t)&&En(t)==S}function as(t){if(!ns(t)||En(t)!=C)return!1;var e=Ut(t);if(null===e)return!0;var i=zt.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&Rt.call(i)==Mt}var ss=be?Ge(be):function(t){return ns(t)&&En(t)==I};var ls=ve?Ge(ve):function(t){return ns(t)&&wo(t)==A};function hs(t){return"string"==typeof t||!Ua(t)&&ns(t)&&En(t)==Y}function ds(t){return"symbol"==typeof t||ns(t)&&En(t)==X}var us=ye?Ge(ye):function(t){return ns(t)&&es(t.length)&&!!re[En(t)]};var cs=$r(Mn),gs=$r((function(t,e){return t<=e}));function ps(t){if(!t)return[];if(Va(t))return hs(t)?ui(t):Xr(t);if(te&&t[te])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[te]());var e=wo(t);return(e==x?oi:e==A?li:Bs)(t)}function fs(t){return t?(t=_s(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ws(t){var e=fs(t),i=e%1;return e==e?i?e-i:e:0}function ms(t){return t?ln(ws(t),0,p):0}function _s(t){if("number"==typeof t)return t;if(ds(t))return g;if(is(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=is(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ve(t);var i=ft.test(t);return i||mt.test(t)?le(t.slice(2),i?2:8):pt.test(t)?g:+t}function ks(t){return Tr(t,Rs(t))}function bs(t){return null==t?"":dr(t)}var vs=jr((function(t,e){if(Co(e)||Va(e))Tr(e,js(e),t);else for(var i in e)zt.call(e,i)&&en(t,i,e[i])})),ys=jr((function(t,e){Tr(e,Rs(e),t)})),xs=jr((function(t,e,i,n){Tr(e,Rs(e),t,n)})),Ss=jr((function(t,e,i,n){Tr(e,js(e),t,n)})),Cs=no(sn);var Es=Kn((function(t,e){t=Et(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&vo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Rs(a),l=-1,h=s.length;++l<h;){var d=s[l],u=t[d];(u===i||Ba(u,Lt[d])&&!zt.call(t,d))&&(t[d]=a[d])}return t})),Is=Kn((function(t){return t.push(i,to),xe(Ps,i,t)}));function As(t,e,n){var r=null==t?i:Sn(t,e);return r===i?n:r}function Ys(t,e){return null!=t&&mo(t,e,Yn)}var Xs=Br((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=qt.call(e)),t[e]=i}),il(ol)),Ts=Br((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=qt.call(e)),zt.call(t,e)?t[e].push(i):t[e]=[i]}),ho),Ls=Kn(Tn);function js(t){return Va(t)?Zi(t):On(t)}function Rs(t){return Va(t)?Zi(t,!0):qn(t)}var zs=jr((function(t,e,i){Fn(t,e,i)})),Ps=jr((function(t,e,i,n){Fn(t,e,i,n)})),Os=no((function(t,e){var i={};if(null==t)return i;var n=!1;e=Te(e,(function(e){return e=br(e,t),n||(n=e.length>1),e})),Tr(t,oo(t),i),n&&(i=hn(i,7,eo));for(var r=e.length;r--;)cr(i,e[r]);return i}));var qs=no((function(t,e){return null==t?{}:function(t,e){return Un(t,e,(function(e,i){return Ys(t,i)}))}(t,e)}));function Ms(t,e){if(null==t)return{};var i=Te(oo(t),(function(t){return[t]}));return e=ho(e),Un(t,i,(function(t,i){return e(t,i[0])}))}var Ds=Kr(js),Ns=Kr(Rs);function Bs(t){return null==t?[]:Ze(t,js(t))}var Fs=Or((function(t,e,i){return e=e.toLowerCase(),t+(i?Ws(e):e)}));function Ws(t){return Qs(bs(t).toLowerCase())}function Hs(t){return(t=bs(t))&&t.replace(kt,ei).replace(Kt,"")}var Us=Or((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),$s=Or((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()})),Vs=Pr("toLowerCase");var Gs=Or((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}));var Zs=Or((function(t,e,i){return t+(i?" ":"")+Qs(e)}));var Ks=Or((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()})),Qs=Pr("toUpperCase");function Js(t,e,n){return t=bs(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var tl=Kn((function(t,e){try{return xe(t,i,e)}catch(F_){return Qa(F_)?F_:new xt(F_)}})),el=no((function(t,e){return Ce(e,(function(e){e=Mo(e),an(t,e,Ta(t[e],t))})),t}));function il(t){return function(){return t}}var nl=Dr(),rl=Dr(!0);function ol(t){return t}function al(t){return Pn("function"==typeof t?t:hn(t,1))}var sl=Kn((function(t,e){return function(i){return Tn(i,t,e)}})),ll=Kn((function(t,e){return function(i){return Tn(t,i,e)}}));function hl(t,e,i){var n=js(e),r=xn(e,n);null!=i||is(e)&&(r.length||!n.length)||(i=e,e=t,t=this,r=xn(e,js(e)));var o=!(is(i)&&"chain"in i&&!i.chain),a=Ja(t);return Ce(r,(function(i){var n=e[i];t[i]=n,a&&(t.prototype[i]=function(){var e=this.__chain__;if(o||e){var i=t(this.__wrapped__),r=i.__actions__=Xr(this.__actions__);return r.push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,Le([this.value()],arguments))})})),t}function dl(){}var ul=Wr(Te),cl=Wr(Ie),gl=Wr(ze);function pl(t){return yo(t)?Fe(Mo(t)):function(t){return function(e){return Sn(e,t)}}(t)}var fl=Ur(),wl=Ur(!0);function ml(){return[]}function _l(){return!1}var kl=Fr((function(t,e){return t+e}),0),bl=Gr("ceil"),vl=Fr((function(t,e){return t/e}),1),yl=Gr("floor");var xl=Fr((function(t,e){return t*e}),1),Sl=Gr("round"),Cl=Fr((function(t,e){return t-e}),0);return Di.after=function(t,e){if("function"!=typeof e)throw new Yt(n);return t=ws(t),function(){if(--t<1)return e.apply(this,arguments)}},Di.ary=Ya,Di.assign=vs,Di.assignIn=ys,Di.assignInWith=xs,Di.assignWith=Ss,Di.at=Cs,Di.before=Xa,Di.bind=Ta,Di.bindAll=el,Di.bindKey=La,Di.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ua(t)?t:[t]},Di.chain=pa,Di.chunk=function(t,e,n){e=(n?vo(t,e,n):e===i)?1:_i(ws(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var o=0,a=0,s=ot(fe(r/e));o<r;)s[a++]=rr(t,o,o+=e);return s},Di.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,r=[];++e<i;){var o=t[e];o&&(r[n++]=o)}return r},Di.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ot(t-1),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Le(Ua(i)?Xr(i):[i],_n(e,1))},Di.cond=function(t){var e=null==t?0:t.length,i=ho();return t=e?Te(t,(function(t){if("function"!=typeof t[1])throw new Yt(n);return[i(t[0]),t[1]]})):[],Kn((function(i){for(var n=-1;++n<e;){var r=t[n];if(xe(r[0],this,i))return xe(r[1],this,i)}}))},Di.conforms=function(t){return function(t){var e=js(t);return function(i){return dn(i,t,e)}}(hn(t,1))},Di.constant=il,Di.countBy=ma,Di.create=function(t,e){var i=Ni(t);return null==e?i:on(i,e)},Di.curry=function t(e,n,r){var o=Qr(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Di.curryRight=function t(e,n,r){var o=Qr(e,a,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Di.debounce=ja,Di.defaults=Es,Di.defaultsDeep=Is,Di.defer=Ra,Di.delay=za,Di.difference=Bo,Di.differenceBy=Fo,Di.differenceWith=Wo,Di.drop=function(t,e,n){var r=null==t?0:t.length;return r?rr(t,(e=n||e===i?1:ws(e))<0?0:e,r):[]},Di.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?rr(t,0,(e=r-(e=n||e===i?1:ws(e)))<0?0:e):[]},Di.dropRightWhile=function(t,e){return t&&t.length?pr(t,ho(e,3),!0,!0):[]},Di.dropWhile=function(t,e){return t&&t.length?pr(t,ho(e,3),!0):[]},Di.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&vo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ws(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ws(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Di.filter=function(t,e){return(Ua(t)?Ae:mn)(t,ho(e,3))},Di.flatMap=function(t,e){return _n(Ca(t,e),1)},Di.flatMapDeep=function(t,e){return _n(Ca(t,e),u)},Di.flatMapDepth=function(t,e,n){return n=n===i?1:ws(n),_n(Ca(t,e),n)},Di.flatten=$o,Di.flattenDeep=function(t){return(null==t?0:t.length)?_n(t,u):[]},Di.flattenDepth=function(t,e){return(null==t?0:t.length)?_n(t,e=e===i?1:ws(e)):[]},Di.flip=function(t){return Qr(t,512)},Di.flow=nl,Di.flowRight=rl,Di.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n},Di.functions=function(t){return null==t?[]:xn(t,js(t))},Di.functionsIn=function(t){return null==t?[]:xn(t,Rs(t))},Di.groupBy=ya,Di.initial=function(t){return(null==t?0:t.length)?rr(t,0,-1):[]},Di.intersection=Go,Di.intersectionBy=Zo,Di.intersectionWith=Ko,Di.invert=Xs,Di.invertBy=Ts,Di.invokeMap=xa,Di.iteratee=al,Di.keyBy=Sa,Di.keys=js,Di.keysIn=Rs,Di.map=Ca,Di.mapKeys=function(t,e){var i={};return e=ho(e,3),vn(t,(function(t,n,r){an(i,e(t,n,r),t)})),i},Di.mapValues=function(t,e){var i={};return e=ho(e,3),vn(t,(function(t,n,r){an(i,n,e(t,n,r))})),i},Di.matches=function(t){return Nn(hn(t,1))},Di.matchesProperty=function(t,e){return Bn(t,hn(e,1))},Di.memoize=Pa,Di.merge=zs,Di.mergeWith=Ps,Di.method=sl,Di.methodOf=ll,Di.mixin=hl,Di.negate=Oa,Di.nthArg=function(t){return t=ws(t),Kn((function(e){return Wn(e,t)}))},Di.omit=Os,Di.omitBy=function(t,e){return Ms(t,Oa(ho(e)))},Di.once=function(t){return Xa(2,t)},Di.orderBy=function(t,e,n,r){return null==t?[]:(Ua(e)||(e=null==e?[]:[e]),Ua(n=r?i:n)||(n=null==n?[]:[n]),Hn(t,e,n))},Di.over=ul,Di.overArgs=qa,Di.overEvery=cl,Di.overSome=gl,Di.partial=Ma,Di.partialRight=Da,Di.partition=Ea,Di.pick=qs,Di.pickBy=Ms,Di.property=pl,Di.propertyOf=function(t){return function(e){return null==t?i:Sn(t,e)}},Di.pull=Jo,Di.pullAll=ta,Di.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?$n(t,e,ho(i,2)):t},Di.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?$n(t,e,i,n):t},Di.pullAt=ea,Di.range=fl,Di.rangeRight=wl,Di.rearg=Na,Di.reject=function(t,e){return(Ua(t)?Ae:mn)(t,Oa(ho(e,3)))},Di.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],o=t.length;for(e=ho(e,3);++n<o;){var a=t[n];e(a,n,t)&&(i.push(a),r.push(n))}return Vn(t,r),i},Di.rest=function(t,e){if("function"!=typeof t)throw new Yt(n);return Kn(t,e=e===i?e:ws(e))},Di.reverse=ia,Di.sampleSize=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:ws(e),(Ua(t)?Qi:Jn)(t,e)},Di.set=function(t,e,i){return null==t?t:tr(t,e,i)},Di.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:tr(t,e,n,r)},Di.shuffle=function(t){return(Ua(t)?Ji:nr)(t)},Di.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&vo(t,e,n)?(e=0,n=r):(e=null==e?0:ws(e),n=n===i?r:ws(n)),rr(t,e,n)):[]},Di.sortBy=Ia,Di.sortedUniq=function(t){return t&&t.length?lr(t):[]},Di.sortedUniqBy=function(t,e){return t&&t.length?lr(t,ho(e,2)):[]},Di.split=function(t,e,n){return n&&"number"!=typeof n&&vo(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!ss(e))&&!(e=dr(e))&&ri(t)?yr(ui(t),0,n):t.split(e,n):[]},Di.spread=function(t,e){if("function"!=typeof t)throw new Yt(n);return e=null==e?0:_i(ws(e),0),Kn((function(i){var n=i[e],r=yr(i,0,e);return n&&Le(r,n),xe(t,this,r)}))},Di.tail=function(t){var e=null==t?0:t.length;return e?rr(t,1,e):[]},Di.take=function(t,e,n){return t&&t.length?rr(t,0,(e=n||e===i?1:ws(e))<0?0:e):[]},Di.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?rr(t,(e=r-(e=n||e===i?1:ws(e)))<0?0:e,r):[]},Di.takeRightWhile=function(t,e){return t&&t.length?pr(t,ho(e,3),!1,!0):[]},Di.takeWhile=function(t,e){return t&&t.length?pr(t,ho(e,3)):[]},Di.tap=function(t,e){return e(t),t},Di.throttle=function(t,e,i){var r=!0,o=!0;if("function"!=typeof t)throw new Yt(n);return is(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),ja(t,e,{leading:r,maxWait:e,trailing:o})},Di.thru=fa,Di.toArray=ps,Di.toPairs=Ds,Di.toPairsIn=Ns,Di.toPath=function(t){return Ua(t)?Te(t,Mo):ds(t)?[t]:Xr(qo(bs(t)))},Di.toPlainObject=ks,Di.transform=function(t,e,i){var n=Ua(t),r=n||Za(t)||us(t);if(e=ho(e,4),null==i){var o=t&&t.constructor;i=r?n?new o:[]:is(t)&&Ja(o)?Ni(Ut(t)):{}}return(r?Ce:vn)(t,(function(t,n,r){return e(i,t,n,r)})),i},Di.unary=function(t){return Ya(t,1)},Di.union=na,Di.unionBy=ra,Di.unionWith=oa,Di.uniq=function(t){return t&&t.length?ur(t):[]},Di.uniqBy=function(t,e){return t&&t.length?ur(t,ho(e,2)):[]},Di.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ur(t,i,e):[]},Di.unset=function(t,e){return null==t||cr(t,e)},Di.unzip=aa,Di.unzipWith=sa,Di.update=function(t,e,i){return null==t?t:gr(t,e,kr(i))},Di.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:gr(t,e,kr(n),r)},Di.values=Bs,Di.valuesIn=function(t){return null==t?[]:Ze(t,Rs(t))},Di.without=la,Di.words=Js,Di.wrap=function(t,e){return Ma(kr(e),t)},Di.xor=ha,Di.xorBy=da,Di.xorWith=ua,Di.zip=ca,Di.zipObject=function(t,e){return mr(t||[],e||[],en)},Di.zipObjectDeep=function(t,e){return mr(t||[],e||[],tr)},Di.zipWith=ga,Di.entries=Ds,Di.entriesIn=Ns,Di.extend=ys,Di.extendWith=xs,hl(Di,Di),Di.add=kl,Di.attempt=tl,Di.camelCase=Fs,Di.capitalize=Ws,Di.ceil=bl,Di.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=_s(n))==n?n:0),e!==i&&(e=(e=_s(e))==e?e:0),ln(_s(t),e,n)},Di.clone=function(t){return hn(t,4)},Di.cloneDeep=function(t){return hn(t,5)},Di.cloneDeepWith=function(t,e){return hn(t,5,e="function"==typeof e?e:i)},Di.cloneWith=function(t,e){return hn(t,4,e="function"==typeof e?e:i)},Di.conformsTo=function(t,e){return null==e||dn(t,e,js(e))},Di.deburr=Hs,Di.defaultTo=function(t,e){return null==t||t!=t?e:t},Di.divide=vl,Di.endsWith=function(t,e,n){t=bs(t),e=dr(e);var r=t.length,o=n=n===i?r:ln(ws(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Di.eq=Ba,Di.escape=function(t){return(t=bs(t))&&G.test(t)?t.replace($,ii):t},Di.escapeRegExp=function(t){return(t=bs(t))&&nt.test(t)?t.replace(it,"\\$&"):t},Di.every=function(t,e,n){var r=Ua(t)?Ie:fn;return n&&vo(t,e,n)&&(e=i),r(t,ho(e,3))},Di.find=_a,Di.findIndex=Ho,Di.findKey=function(t,e){return Oe(t,ho(e,3),vn)},Di.findLast=ka,Di.findLastIndex=Uo,Di.findLastKey=function(t,e){return Oe(t,ho(e,3),yn)},Di.floor=yl,Di.forEach=ba,Di.forEachRight=va,Di.forIn=function(t,e){return null==t?t:kn(t,ho(e,3),Rs)},Di.forInRight=function(t,e){return null==t?t:bn(t,ho(e,3),Rs)},Di.forOwn=function(t,e){return t&&vn(t,ho(e,3))},Di.forOwnRight=function(t,e){return t&&yn(t,ho(e,3))},Di.get=As,Di.gt=Fa,Di.gte=Wa,Di.has=function(t,e){return null!=t&&mo(t,e,An)},Di.hasIn=Ys,Di.head=Vo,Di.identity=ol,Di.includes=function(t,e,i,n){t=Va(t)?t:Bs(t),i=i&&!n?ws(i):0;var r=t.length;return i<0&&(i=_i(r+i,0)),hs(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&Me(t,e,i)>-1},Di.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:ws(i);return r<0&&(r=_i(n+r,0)),Me(t,e,r)},Di.inRange=function(t,e,n){return e=fs(e),n===i?(n=e,e=0):n=fs(n),function(t,e,i){return t>=ki(e,i)&&t<_i(e,i)}(t=_s(t),e,n)},Di.invoke=Ls,Di.isArguments=Ha,Di.isArray=Ua,Di.isArrayBuffer=$a,Di.isArrayLike=Va,Di.isArrayLikeObject=Ga,Di.isBoolean=function(t){return!0===t||!1===t||ns(t)&&En(t)==_},Di.isBuffer=Za,Di.isDate=Ka,Di.isElement=function(t){return ns(t)&&1===t.nodeType&&!as(t)},Di.isEmpty=function(t){if(null==t)return!0;if(Va(t)&&(Ua(t)||"string"==typeof t||"function"==typeof t.splice||Za(t)||us(t)||Ha(t)))return!t.length;var e=wo(t);if(e==x||e==A)return!t.size;if(Co(t))return!On(t).length;for(var i in t)if(zt.call(t,i))return!1;return!0},Di.isEqual=function(t,e){return jn(t,e)},Di.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?jn(t,e,i,n):!!r},Di.isError=Qa,Di.isFinite=function(t){return"number"==typeof t&&fi(t)},Di.isFunction=Ja,Di.isInteger=ts,Di.isLength=es,Di.isMap=rs,Di.isMatch=function(t,e){return t===e||Rn(t,e,co(e))},Di.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Rn(t,e,co(e),n)},Di.isNaN=function(t){return os(t)&&t!=+t},Di.isNative=function(t){if(So(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return zn(t)},Di.isNil=function(t){return null==t},Di.isNull=function(t){return null===t},Di.isNumber=os,Di.isObject=is,Di.isObjectLike=ns,Di.isPlainObject=as,Di.isRegExp=ss,Di.isSafeInteger=function(t){return ts(t)&&t>=-9007199254740991&&t<=c},Di.isSet=ls,Di.isString=hs,Di.isSymbol=ds,Di.isTypedArray=us,Di.isUndefined=function(t){return t===i},Di.isWeakMap=function(t){return ns(t)&&wo(t)==T},Di.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==En(t)},Di.join=function(t,e){return null==t?"":wi.call(t,e)},Di.kebabCase=Us,Di.last=Qo,Di.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ws(n))<0?_i(r+o,0):ki(o,r-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,o):qe(t,Ne,o,!0)},Di.lowerCase=$s,Di.lowerFirst=Vs,Di.lt=cs,Di.lte=gs,Di.max=function(t){return t&&t.length?wn(t,ol,In):i},Di.maxBy=function(t,e){return t&&t.length?wn(t,ho(e,2),In):i},Di.mean=function(t){return Be(t,ol)},Di.meanBy=function(t,e){return Be(t,ho(e,2))},Di.min=function(t){return t&&t.length?wn(t,ol,Mn):i},Di.minBy=function(t,e){return t&&t.length?wn(t,ho(e,2),Mn):i},Di.stubArray=ml,Di.stubFalse=_l,Di.stubObject=function(){return{}},Di.stubString=function(){return""},Di.stubTrue=function(){return!0},Di.multiply=xl,Di.nth=function(t,e){return t&&t.length?Wn(t,ws(e)):i},Di.noConflict=function(){return ue._===this&&(ue._=Dt),this},Di.noop=dl,Di.now=Aa,Di.pad=function(t,e,i){t=bs(t);var n=(e=ws(e))?di(t):0;if(!e||n>=e)return t;var r=(e-n)/2;return Hr(we(r),i)+t+Hr(fe(r),i)},Di.padEnd=function(t,e,i){t=bs(t);var n=(e=ws(e))?di(t):0;return e&&n<e?t+Hr(e-n,i):t},Di.padStart=function(t,e,i){t=bs(t);var n=(e=ws(e))?di(t):0;return e&&n<e?Hr(e-n,i)+t:t},Di.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),vi(bs(t).replace(rt,""),e||0)},Di.random=function(t,e,n){if(n&&"boolean"!=typeof n&&vo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fs(t),e===i?(e=t,t=0):e=fs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=yi();return ki(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Gn(t,e)},Di.reduce=function(t,e,i){var n=Ua(t)?je:He,r=arguments.length<3;return n(t,ho(e,4),i,r,gn)},Di.reduceRight=function(t,e,i){var n=Ua(t)?Re:He,r=arguments.length<3;return n(t,ho(e,4),i,r,pn)},Di.repeat=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:ws(e),Zn(bs(t),e)},Di.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Di.result=function(t,e,n){var r=-1,o=(e=br(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Mo(e[r])];a===i&&(r=o,a=n),t=Ja(a)?a.call(t):a}return t},Di.round=Sl,Di.runInContext=t,Di.sample=function(t){return(Ua(t)?Ki:Qn)(t)},Di.size=function(t){if(null==t)return 0;if(Va(t))return hs(t)?di(t):t.length;var e=wo(t);return e==x||e==A?t.size:On(t).length},Di.snakeCase=Gs,Di.some=function(t,e,n){var r=Ua(t)?ze:or;return n&&vo(t,e,n)&&(e=i),r(t,ho(e,3))},Di.sortedIndex=function(t,e){return ar(t,e)},Di.sortedIndexBy=function(t,e,i){return sr(t,e,ho(i,2))},Di.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=ar(t,e);if(n<i&&Ba(t[n],e))return n}return-1},Di.sortedLastIndex=function(t,e){return ar(t,e,!0)},Di.sortedLastIndexBy=function(t,e,i){return sr(t,e,ho(i,2),!0)},Di.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var i=ar(t,e,!0)-1;if(Ba(t[i],e))return i}return-1},Di.startCase=Zs,Di.startsWith=function(t,e,i){return t=bs(t),i=null==i?0:ln(ws(i),0,t.length),e=dr(e),t.slice(i,i+e.length)==e},Di.subtract=Cl,Di.sum=function(t){return t&&t.length?Ue(t,ol):0},Di.sumBy=function(t,e){return t&&t.length?Ue(t,ho(e,2)):0},Di.template=function(t,e,n){var r=Di.templateSettings;n&&vo(t,e,n)&&(e=i),t=bs(t),e=xs({},e,r,Jr);var o,a,s=xs({},e.imports,r.imports,Jr),l=js(s),h=Ze(s,l),d=0,u=e.interpolate||bt,c="__p += '",g=It((e.escape||bt).source+"|"+u.source+"|"+(u===Q?ct:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(zt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ne+"]")+"\n";t.replace(g,(function(e,i,n,r,s,l){return n||(n=r),c+=t.slice(d,l).replace(vt,ni),i&&(o=!0,c+="' +\n__e("+i+") +\n'"),s&&(a=!0,c+="';\n"+s+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=l+e.length,e})),c+="';\n";var f=zt.call(e,"variable")&&e.variable;if(f){if(dt.test(f))throw new xt("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";c=(a?c.replace(F,""):c).replace(W,"$1").replace(H,"$1;"),c="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var w=tl((function(){return St(l,p+"return "+c).apply(i,h)}));if(w.source=c,Qa(w))throw w;return w},Di.times=function(t,e){if((t=ws(t))<1||t>c)return[];var i=p,n=ki(t,p);e=ho(e),t-=p;for(var r=$e(n,e);++i<t;)e(i);return r},Di.toFinite=fs,Di.toInteger=ws,Di.toLength=ms,Di.toLower=function(t){return bs(t).toLowerCase()},Di.toNumber=_s,Di.toSafeInteger=function(t){return t?ln(ws(t),-9007199254740991,c):0===t?t:0},Di.toString=bs,Di.toUpper=function(t){return bs(t).toUpperCase()},Di.trim=function(t,e,n){if((t=bs(t))&&(n||e===i))return Ve(t);if(!t||!(e=dr(e)))return t;var r=ui(t),o=ui(e);return yr(r,Qe(r,o),Je(r,o)+1).join("")},Di.trimEnd=function(t,e,n){if((t=bs(t))&&(n||e===i))return t.slice(0,ci(t)+1);if(!t||!(e=dr(e)))return t;var r=ui(t);return yr(r,0,Je(r,ui(e))+1).join("")},Di.trimStart=function(t,e,n){if((t=bs(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=dr(e)))return t;var r=ui(t);return yr(r,Qe(r,ui(e))).join("")},Di.truncate=function(t,e){var n=30,r="...";if(is(e)){var o="separator"in e?e.separator:o;n="length"in e?ws(e.length):n,r="omission"in e?dr(e.omission):r}var a=(t=bs(t)).length;if(ri(t)){var s=ui(t);a=s.length}if(n>=a)return t;var l=n-di(r);if(l<1)return r;var h=s?yr(s,0,l).join(""):t.slice(0,l);if(o===i)return h+r;if(s&&(l+=h.length-l),ss(o)){if(t.slice(l).search(o)){var d,u=h;for(o.global||(o=It(o.source,bs(gt.exec(o))+"g")),o.lastIndex=0;d=o.exec(u);)var c=d.index;h=h.slice(0,c===i?l:c)}}else if(t.indexOf(dr(o),l)!=l){var g=h.lastIndexOf(o);g>-1&&(h=h.slice(0,g))}return h+r},Di.unescape=function(t){return(t=bs(t))&&V.test(t)?t.replace(U,gi):t},Di.uniqueId=function(t){var e=++Pt;return bs(t)+e},Di.upperCase=Ks,Di.upperFirst=Qs,Di.each=ba,Di.eachRight=va,Di.first=Vo,hl(Di,function(){var t={};return vn(Di,(function(e,i){zt.call(Di.prototype,i)||(t[i]=e)})),t}(),{chain:!1}),Di.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Di[t].placeholder=Di})),Ce(["drop","take"],(function(t,e){Wi.prototype[t]=function(n){n=n===i?1:_i(ws(n),0);var r=this.__filtered__&&!e?new Wi(this):this.clone();return r.__filtered__?r.__takeCount__=ki(n,r.__takeCount__):r.__views__.push({size:ki(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Wi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=1==i||3==i;Wi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ho(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}})),Ce(["head","last"],(function(t,e){var i="take"+(e?"Right":"");Wi.prototype[t]=function(){return this[i](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");Wi.prototype[t]=function(){return this.__filtered__?new Wi(this):this[i](1)}})),Wi.prototype.compact=function(){return this.filter(ol)},Wi.prototype.find=function(t){return this.filter(t).head()},Wi.prototype.findLast=function(t){return this.reverse().find(t)},Wi.prototype.invokeMap=Kn((function(t,e){return"function"==typeof t?new Wi(this):this.map((function(i){return Tn(i,t,e)}))})),Wi.prototype.reject=function(t){return this.filter(Oa(ho(t)))},Wi.prototype.slice=function(t,e){t=ws(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wi(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ws(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wi.prototype.toArray=function(){return this.take(p)},vn(Wi.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Di[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(Di.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,l=e instanceof Wi,h=s[0],d=l||Ua(e),u=function(t){var e=o.apply(Di,Le([t],s));return r&&c?e[0]:e};d&&n&&"function"==typeof h&&1!=h.length&&(l=d=!1);var c=this.__chain__,g=!!this.__actions__.length,p=a&&!c,f=l&&!g;if(!a&&d){e=f?e:new Wi(this);var w=t.apply(e,s);return w.__actions__.push({func:fa,args:[u],thisArg:i}),new Fi(w,c)}return p&&f?t.apply(this,s):(w=this.thru(u),p?r?w.value()[0]:w.value():w)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Xt[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Di.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(Ua(r)?r:[],t)}return this[i]((function(i){return e.apply(Ua(i)?i:[],t)}))}})),vn(Wi.prototype,(function(t,e){var i=Di[e];if(i){var n=i.name+"";zt.call(Ti,n)||(Ti[n]=[]),Ti[n].push({name:e,func:i})}})),Ti[Nr(i,2).name]=[{name:"wrapper",func:i}],Wi.prototype.clone=function(){var t=new Wi(this.__wrapped__);return t.__actions__=Xr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Xr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Xr(this.__views__),t},Wi.prototype.reverse=function(){if(this.__filtered__){var t=new Wi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Ua(t),n=e<0,r=i?t.length:0,o=function(t,e,i){var n=-1,r=i.length;for(;++n<r;){var o=i[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ki(e,t+a);break;case"takeRight":t=_i(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,h=n?s:a-1,d=this.__iteratees__,u=d.length,c=0,g=ki(l,this.__takeCount__);if(!i||!n&&r==l&&g==l)return fr(t,this.__actions__);var p=[];t:for(;l--&&c<g;){for(var f=-1,w=t[h+=e];++f<u;){var m=d[f],_=m.iteratee,k=m.type,b=_(w);if(2==k)w=b;else if(!b){if(1==k)continue t;break t}}p[c++]=w}return p},Di.prototype.at=wa,Di.prototype.chain=function(){return pa(this)},Di.prototype.commit=function(){return new Fi(this.value(),this.__chain__)},Di.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Di.prototype.plant=function(t){for(var e,n=this;n instanceof Bi;){var r=No(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Di.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wi){var e=t;return this.__actions__.length&&(e=new Wi(this)),(e=e.reverse()).__actions__.push({func:fa,args:[ia],thisArg:i}),new Fi(e,this.__chain__)}return this.thru(ia)},Di.prototype.toJSON=Di.prototype.valueOf=Di.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},Di.prototype.first=Di.prototype.head,te&&(Di.prototype[te]=function(){return this}),Di}();ge?((ge.exports=pi)._=pi,ce._=pi):ue._=pi}).call(Uc)}({get exports(){return Tg},set exports(t){Tg=t}},Tg);class Lg extends Sg{constructor(){super("#abilities-page"),t(this,"activeAbilities",document.querySelector("#active-abilities")),t(this,"passiveAbilities",document.querySelector("#passive-abilities")),t(this,"abilityBar",document.querySelector("#ability-shortcut")),t(this,"draggedElement",""),t(this,"selectCallback",void 0);for(let t=0;t<this.activeAbilities.children.length;t++)this.activeAbilities.children[t].addEventListener("click",(()=>this.handleAction(t)));for(let t=0;t<this.abilityBar.children.length;t++){let e=this.abilityBar.children[t];e.draggable=!0,e.addEventListener("dragover",(t=>this.dragOver(t))),e.addEventListener("drop",(e=>this.dragDrop(e,t)))}}synchronize(t){this.hideAll();let e=0,i=0;Tg.each(t.abilities,(t=>{switch(t.type){case z.Active:this.setActiveAbility(e,t.key,t.level),e++;break;case z.Passive:this.setPassiveAbility(i,t.key,t.level),i++}}))}handleAction(t){let e=this.activeAbilities.children[t];"none"!==e.style.display&&e.key&&this.selectCallback?.(w.Use,e.key)}dragStart(t){this.draggedElement=t}dragDrop(t,e){this.selectCallback?.(w.QuickSlot,this.draggedElement,e),this.draggedElement=""}dragOver(t){t.target&&t.target.draggable&&t.preventDefault()}dragLeave(t){}setAbility(t,e,i=1,n=!1){t.innerHTML="",t.className="ability",t.style.display="block";let r=document.createElement("div");r.classList.add("ability-icon"),r.classList.add(`ability-icon-${e}`),r.draggable=!0,n||(r.addEventListener("dragleave",(t=>this.dragLeave(t))),r.addEventListener("dragstart",(()=>this.dragStart(e)))),i>4&&(i=4),i<1&&(i=1);for(let o=0;o<i;o++){let e=document.createElement("div");e.classList.add("ability-level"),e.classList.add(`ability-level${o+1}`),t.append(e,r)}}setActiveAbility(t,e,i=1){let n=this.activeAbilities.children[t];return n?e?(this.setAbility(n,e,i),void(n.key=e)):this.hideAbility(n):r.error(`Could not find ability with index ${t}, key: ${e}.`)}setPassiveAbility(t,e,i=1){let n=this.passiveAbilities.children[t];return n?e?void this.setAbility(n,e,i,!0):this.hideAbility(n):r.error(`Could not find ability with index ${t}, key: ${e}.`)}hideAbility(t){t.style.display="none"}hideAll(){for(let t of this.activeAbilities.children)this.hideAbility(t);for(let t of this.passiveAbilities.children)this.hideAbility(t)}onSelect(t){this.selectCallback=t}}class jg extends Sg{constructor(){super("#skills-page"),t(this,"list",document.querySelector("#skills-list > ul"))}synchronize(t){this.list.innerHTML="",ve.each(t.skills,(t=>this.list.append(this.createElement(t))))}createElement(t){let e=document.createElement("li"),i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("p");return i.classList.add("profession-item"),n.classList.add("profession-name"),n.textContent=t.name,r.textContent=`Level ${t.level} | ${t.percentage.toFixed(1)}%`,n.append(r),i.append(n),e.append(i),e}}class Rg extends Sg{constructor(e){super("#profile-dialog",void 0,"#profile-button"),t(this,"state",new Xg),t(this,"skills",new jg),t(this,"abilities",new Lg),t(this,"pages",[this.state,this.skills,this.abilities]),t(this,"activePage",0),t(this,"previous",document.querySelector("#profile-navigator > .previous")),t(this,"next",document.querySelector("#profile-navigator > .next")),t(this,"unequipCallback",void 0),t(this,"abilityCallback",void 0),this.player=e,this.handleNavigation(),this.previous.addEventListener("click",(()=>this.handleNavigation("previous"))),this.next.addEventListener("click",(()=>this.handleNavigation("next"))),this.state.onSelect((t=>this.unequipCallback?.(t))),this.abilities.onSelect(((t,e,i)=>this.abilityCallback?.(t,e,i)))}handleNavigation(t="previous"){this.isDisabled(t)||(this.previous.classList.remove("disabled"),this.next.classList.remove("disabled"),this.pages[this.activePage]?.hide(),this.activePage+="previous"===t?-1:1,this.activePage<=0&&(this.activePage=0,this.previous.classList.add("disabled")),this.activePage>=this.pages.length-1&&(this.activePage=this.pages.length-1,this.next.classList.add("disabled")),this.pages[this.activePage]?.show())}synchronize(){this.forEachPage((t=>t.synchronize(this.player)))}isDisabled(t){return"previous"===t&&this.previous.classList.contains("disabled")||"next"===t&&this.next.classList.contains("disabled")}forEachPage(t){ve.each(this.pages,t)}onUnequip(t){this.unequipCallback=t}onAbility(t){this.abilityCallback=t}}class zg extends Sg{constructor(){super("#enchant","#close-enchant")}}class Pg extends Sg{constructor(e){super("#map-frame","#close-map-frame","#warp-button"),t(this,"list",document.querySelectorAll(".map-button")),t(this,"selectCallback",void 0),this.socket=e,ve.each(this.list,(t=>t.addEventListener("click",(()=>this.handleWarp(t)))))}handleWarp(t){let e=parseInt(t.id.replace("warp",""));if(isNaN(e))return r.error("Invalid warp element clicked.");this.selectCallback?.(e),this.hide()}onSelect(t){this.selectCallback=t}}class Og extends Sg{constructor(){super("#notification"),t(this,"title",document.querySelector("#notification-text-title")),t(this,"description",document.querySelector("#notification-text-description")),t(this,"timeout",void 0)}show(t,e,i){if(this.isVisible())return this.hide(!1),void window.setTimeout((()=>this.show(t,e,i)),700);this.container.classList.add("active"),this.setPosition(),this.title.style.color=i,this.title.innerHTML=t,this.description.innerHTML=e,clearTimeout(this.timeout),this.timeout=window.setTimeout((()=>this.hide(!1)),7e3)}hide(t=!0){t||(this.container.classList.remove("active"),this.container.style.top="100%")}resize(){this.isVisible()&&this.setPosition()}isVisible(){return this.container.classList.contains("active")}getPosition(){return window.innerHeight-this.container.offsetHeight}setPosition(){this.container.style.top=`${this.getPosition()}px`}}class qg extends Sg{constructor(e){super("#settings-page",void 0,"#settings-button"),t(this,"musicSlider",document.querySelector("#music")),t(this,"soundSlider",document.querySelector("#sound")),t(this,"brightnessSlider",document.querySelector("#brightness")),t(this,"audioEnabledCheckbox",document.querySelector("#audio-enabled-checkbox > input")),t(this,"lowPowerCheckbox",document.querySelector("#low-power-checkbox > input")),t(this,"debugCheckbox",document.querySelector("#debug-mode-checkbox > input")),t(this,"showNamesCheckbox",document.querySelector("#show-names-checkbox > input")),t(this,"showLevelsCheckbox",document.querySelector("#show-levels-checkbox > input")),t(this,"disableCachingCheckbox",document.querySelector("#disable-region-caching-checkbox > input")),this.game=e,this.musicSlider.addEventListener("input",this.handleMusic.bind(this)),this.soundSlider.addEventListener("input",this.handleSoundVolume.bind(this)),this.brightnessSlider.addEventListener("input",this.handleBrightness.bind(this)),this.audioEnabledCheckbox.addEventListener("change",this.handleAudioEnabled.bind(this)),this.lowPowerCheckbox.addEventListener("change",this.handleLowPower.bind(this)),this.debugCheckbox.addEventListener("change",this.handleDebug.bind(this)),this.showNamesCheckbox.addEventListener("change",this.handleName.bind(this)),this.showLevelsCheckbox.addEventListener("change",this.handleLevel.bind(this)),this.disableCachingCheckbox.addEventListener("change",this.handleCaching.bind(this)),this.load()}load(){let t=this.game.storage.getSettings();this.musicSlider.value=t.musicVolume?.toString(),this.soundSlider.value=t.soundVolume?.toString(),this.brightnessSlider.value=t.brightness?.toString(),this.audioEnabledCheckbox.checked=t.audioEnabled,this.lowPowerCheckbox.checked=t.lowPowerMode,this.debugCheckbox.checked=t.debugMode,this.showNamesCheckbox.checked=t.showNames,this.showLevelsCheckbox.checked=t.showLevels,this.disableCachingCheckbox.checked=t.disableCaching,this.handleBrightness(),this.handleDebug(),this.handleLowPower(),this.handleName(),this.handleLevel()}handleMusic(){this.game.storage.setMusicVolume(this.musicSlider.valueAsNumber),this.game.audio.updateVolume()}handleSoundVolume(){this.game.storage.setSoundVolume(this.soundSlider.valueAsNumber)}handleBrightness(){this.game.storage.setBrightness(this.brightnessSlider.valueAsNumber),this.game.renderer.setBrightness(this.brightnessSlider.valueAsNumber)}handleAudioEnabled(){this.game.storage.setAudioEnabled(this.audioEnabledCheckbox.checked),this.game.audio.updateVolume()}handleLowPower(){this.game.storage.setLowPowerMode(this.lowPowerCheckbox.checked),this.game.renderer.animateTiles=!this.lowPowerCheckbox.checked,this.lowPowerCheckbox.checked?this.game.camera.decenter():(this.game.camera.center(),this.game.camera.centreOn(this.game.player),this.game.renderer.updateAnimatedTiles())}handleDebug(){this.game.storage.setDebug(this.debugCheckbox.checked),this.game.renderer.debugging=this.debugCheckbox.checked}handleName(){this.game.storage.setShowNames(this.showNamesCheckbox.checked),this.game.renderer.drawNames=this.showNamesCheckbox.checked}handleLevel(){this.game.storage.setShowLevels(this.showLevelsCheckbox.checked),this.game.renderer.drawLevels=this.showLevelsCheckbox.checked}handleCaching(){this.game.storage.setDisableCaching(this.disableCachingCheckbox.checked)}}class Mg{constructor(e){t(this,"abilityBar",document.querySelector("#ability-shortcut")),this.player=e,this.player.onAbility(this.handleAbility.bind(this))}handleAbility(t,e,i=-1){if(this.abilityBar.hidden=!1,setTimeout((()=>this.abilityBar.style.opacity="1"),100),-1===i)return;let n=this.abilityBar.children[i];n&&(this.clean(t),n.className="ability-quickslot",n.classList.add(`quickslot-icon-${t}`))}clean(t){for(let e of this.abilityBar.children)e.classList.contains(`quickslot-icon-${t}`)&&e.classList.remove(`quickslot-icon-${t}`)}}class Dg extends Sg{constructor(e,i){super("#equipments","#close-equipments","#equipment-button"),t(this,"playerArmour",document.querySelector("#player-image-armour")),t(this,"playerWeapon",document.querySelector("#player-image-weapon")),t(this,"weapon",document.querySelector("#equipment-container > .weapon-slot")),t(this,"armour",document.querySelector("#equipment-container > .armour-slot")),t(this,"pendant",document.querySelector("#equipment-container > .pendant-slot")),t(this,"ring",document.querySelector("#equipment-container > .ring-slot")),t(this,"boots",document.querySelector("#equipment-container > .boots-slot")),t(this,"previous",document.querySelector("#player-image-navigator > .previous")),t(this,"next",document.querySelector("#player-image-navigator > .next")),t(this,"attackStats",document.querySelector("#attack-stats")),t(this,"defenseStats",document.querySelector("#defense-stats")),t(this,"bonuses",document.querySelector("#bonuses")),t(this,"imageOrientation",j.Down),t(this,"selectCallback",void 0),this.player=e,this.sprites=i,this.previous.addEventListener("click",(()=>this.handleNavigation("previous"))),this.next.addEventListener("click",(()=>this.handleNavigation("next"))),this.weapon.addEventListener("click",(()=>this.selectCallback?.(M.Weapon))),this.armour.addEventListener("click",(()=>this.selectCallback?.(M.Armour))),this.pendant.addEventListener("click",(()=>this.selectCallback?.(M.Pendant))),this.ring.addEventListener("click",(()=>this.selectCallback?.(M.Ring))),this.boots.addEventListener("click",(()=>this.selectCallback?.(M.Boots)))}synchronize(){this.loadStats(),this.loadPlayerImage(),this.weapon.style.backgroundImage=J.getImageURL(this.player.getWeapon().key),this.armour.style.backgroundImage=J.getImageURL("clotharmor"===this.player.getArmour().key?"":this.player.getArmour().key),this.pendant.style.backgroundImage=J.getImageURL(this.player.getPendant().key),this.ring.style.backgroundImage=J.getImageURL(this.player.getRing().key),this.boots.style.backgroundImage=J.getImageURL(this.player.getBoots().key)}resize(){this.loadPlayerImage()}handleNavigation(t){let e=[j.Left,j.Up,j.Right,j.Down],i=e.indexOf(this.imageOrientation);switch(t){case"previous":i=0===i?e.length-1:i-1;break;case"next":i=i===e.length-1?0:i+1}this.imageOrientation=e[i],this.loadPlayerImage()}loadStats(){let t=J.getEmptyStats(),e=J.getEmptyStats(),i=J.getEmptyBonuses();Tg.each(this.player.equipments,(n=>{n.exists()&&(t.crush+=n.attackStats.crush,t.slash+=n.attackStats.slash,t.stab+=n.attackStats.stab,t.magic+=n.attackStats.magic,e.crush+=n.defenseStats.crush,e.slash+=n.defenseStats.slash,e.stab+=n.defenseStats.stab,e.magic+=n.defenseStats.magic,i.accuracy+=n.bonuses.accuracy,i.strength+=n.bonuses.strength,i.archery+=n.bonuses.archery)}));Tg.each(["Crush","Slash","Stab","Magic"],(i=>{let n=i.toLowerCase(),r=this.attackStats.querySelector(`.${n.toLowerCase()}`),o=this.defenseStats.querySelector(`.${n.toLowerCase()}`),a=t[n],s=e[n];r.textContent=`${i}: ${a>0?"+":""}${a}`,o.textContent=`${i}: ${s>0?"+":""}${s}`})),Tg.each(["Accuracy","Strength","Archery"],(t=>{let e=t.toLowerCase(),n=this.bonuses.querySelector(`.${e.toLowerCase()}`),r=i[e];n.textContent=`${t}: ${r>0?"+":""}${r}`}))}loadPlayerImage(){let t=`url("/img/sprites/${this.player.getArmour().key}.png")`,e=this.player.sprite,i=this.imageOrientation===j.Left,n=this.getOrientationIndex();if(e){if(this.playerArmour.style.backgroundImage=t,this.playerArmour.style.backgroundPosition=`0 -${n*e.height}px`,this.player.hasWeapon()){let t=`url("/img/sprites/${this.player.getWeapon().key}.png")`,e=this.sprites.get(this.player.getWeapon().key),i=Math.floor(e.offsetX/2),r=Math.floor(e.offsetY/2);this.playerWeapon.style.width=`${e.width}px`,this.playerWeapon.style.height=`${e.height}px`,this.playerWeapon.style.marginLeft=`${i}px`,this.playerWeapon.style.marginTop=`${r}px`,this.playerWeapon.style.backgroundImage=t,this.playerWeapon.style.backgroundPosition=`0 -${n*e.height}px`}else this.playerWeapon.style.backgroundImage="none";this.playerArmour.style.transform=`scaleX(${i?-1:1})`,this.playerWeapon.style.transform=`scaleX(${i?-1:1})`}}getOrientationIndex(){switch(this.imageOrientation){case j.Left:case j.Right:return 1;case j.Up:return 4;case j.Down:return 7}}onSelect(t){this.selectCallback=t}}class Ng extends Sg{constructor(e){super("#achievements","#close-achievements","#achievements-button"),t(this,"list",document.querySelector("#achievements-container > ul")),this.player=e}handle(t,e){if(t===_.Batch)return void Tg.each(this.player.achievements,(t=>this.createAchievement(t)));let i=this.player.achievements[e];i&&this.update(this.list.children[i.id],i)}createAchievement(t){let e=document.createElement("li"),i=document.createElement("div"),n=document.createElement("p"),r=document.createElement("p");e.classList.add("achievement-element"),n.classList.add("stroke"),n.classList.add("achievement-title"),r.classList.add("achievement-description"),n.innerHTML=t.name,r.innerHTML=t.description,e.append(n),e.append(r),t.isFinished()?(n.style.color="#fcda1d",i.classList.add("coin"),i.classList.add("coin-default"),e.prepend(i)):t.isStarted()&&e.append(this.createProgress(t)),this.list.append(e)}createProgress(t){let e=document.createElement("p");return e.classList.add("stroke"),e.classList.add("achievement-progress"),e.innerHTML=t.isStarted()?`${t.stage-1}/${t.stageCount-1}`:"",e}update(t,e){let i=t.querySelector(".achievement-title"),n=t.querySelector(".achievement-description"),r=t.querySelector(".achievement-progress");if(i.innerHTML=e.name,n.innerHTML=e.description,e.isFinished()){i.style.color="#fcda1d",r?.remove();let e=document.createElement("div");e.classList.add("coin"),e.classList.add("coin-default"),t.prepend(e)}else{i.style.color="#fff",t.querySelector(".coin")?.remove(),r?r.innerHTML=e.isStarted()?`${e.stage-1}/${e.stageCount-1}`:"":(r=this.createProgress(e),t.append(r))}}}class Bg extends Sg{constructor(e){super("#quests","#close-quests","#quests-button"),t(this,"list",document.querySelector("#quests-container > ul")),t(this,"title",document.querySelector("#quest-log-title")),t(this,"shortDescription",document.querySelector("#quest-log-shortdesc")),t(this,"description",document.querySelector("#quest-log-description")),t(this,"rewards",document.querySelector("#quest-log-rewards")),this.player=e}handle(t,e=""){switch(t){case m.Batch:Tg.each(this.player.quests,(t=>this.createElement(t)));break;case m.Progress:return this.handleProgress(e)}this.buildLog(this.player.quests.tutorial)}handleProgress(t){if(!t)return;let e=this.player.quests[t];if(!e)return;let i=this.list.children[e.id].querySelector("p");i&&(i.classList.remove("green","yellow"),e.isFinished()?i.classList.add("green"):e.isStarted()&&i.classList.add("yellow"))}createElement(t){let e=document.createElement("li"),i=document.createElement("p");e.classList.add("container-slot"),i.classList.add("stroke"),i.innerHTML=t.name,t.isFinished()?i.classList.add("green"):t.isStarted()&&i.classList.add("yellow"),e.append(i),this.list.append(e),e.addEventListener("click",(()=>this.buildLog(t)))}buildLog(t){let[e,i]=t.description.split("|");this.title.innerHTML=t.name,this.shortDescription.innerHTML=e,this.description.innerHTML=i,t.rewards&&(this.rewards.innerHTML=t.rewards.join("<br>"))}}class Fg extends Sg{constructor(e){super("#friends-page",void 0,"#friends-button"),t(this,"list",document.querySelector("#friends-container > ul")),t(this,"addButton",document.querySelector("#add-friend")),t(this,"removeButton",document.querySelector("#remove-friend")),t(this,"input",document.querySelector("#popup-friend-input")),t(this,"confirm",document.querySelector("#popup-friend-confirm")),t(this,"cancel",document.querySelector("#popup-friend-cancel")),t(this,"popup",document.querySelector("#popup-container")),t(this,"confirmCallback",void 0),t(this,"messageCallback",void 0),t(this,"popupActive",!1),t(this,"removeActive",!1),this.player=e,this.addButton.addEventListener("click",(()=>this.showPopup())),this.removeButton.addEventListener("click",(()=>this.showPopup(!0))),this.confirm.addEventListener("click",this.handleConfirm.bind(this)),this.cancel.addEventListener("click",this.hidePopup.bind(this))}handle(t,e="",i=!1){switch(t){case T.List:Tg.each(this.player.friends,(t=>this.createElement(t.username,t.online)));break;case T.Add:return this.createElement(e,i);case T.Remove:return this.removeElement(e);case T.Status:return this.updateStatus(e,i)}}handleConfirm(){let t=this.input.value,e=this.removeActive;this.input.value="",this.hidePopup(),!t||t.length>32||this.confirmCallback?.(t,e)}handleMessage(t){this.player.friends[t].online&&this.messageCallback?.(t)}keyDown(t){"Escape"===t&&this.hidePopup(),"Enter"===t&&""!==this.input.value&&this.handleConfirm()}showPopup(t=!1){this.popupActive=!0,this.removeActive=t,this.input.placeholder=t?"Enter name to remove...":"Enter name to add...",J.fadeIn(this.popup),document.querySelector("#friends-container")?.classList.add("dimmed"),this.input.focus()}hidePopup(){this.popupActive=!1,this.removeActive=!1,J.fadeOut(this.popup),document.querySelector("#friends-container")?.classList.remove("dimmed")}createElement(t,e=!1){let i=document.createElement("li"),n=document.createElement("p");i.classList.add("container-slot"),n.classList.add("stroke"),e&&n.classList.add("green"),n.innerHTML=t,i.append(n),this.list.append(i),i.addEventListener("click",(()=>this.handleMessage(t)))}removeElement(t){let e=this.player.friends[t];e&&(this.list.children[e.id].remove(),delete this.player.friends[t])}updateStatus(t,e){let i=this.player.friends[t];if(!i)return;let n=this.list.children[i.id].children[0];e?n.classList.add("green"):n.classList.remove("green")}isPopupActive(){return this.popupActive}onConfirm(t){this.confirmCallback=t}onMessage(t){this.messageCallback=t}}class Wg{constructor(e){t(this,"actions",new Cg),t(this,"inventory",void 0),t(this,"bank",void 0),t(this,"store",void 0),t(this,"profile",void 0),t(this,"enchant",void 0),t(this,"warp",void 0),t(this,"notification",void 0),t(this,"settings",void 0),t(this,"equipments",void 0),t(this,"achievements",void 0),t(this,"quests",void 0),t(this,"friends",void 0),t(this,"header",void 0),t(this,"menus",void 0),this.game=e,this.inventory=new Eg(this.actions),this.bank=new Ig(this.inventory),this.store=new Ag(this.inventory),this.profile=new Rg(e.player),this.enchant=new zg,this.warp=new Pg(e.socket),this.notification=new Og,this.settings=new qg(e),this.header=new Yg(e.player),this.equipments=new Dg(e.player,e.sprites),this.achievements=new Ng(e.player),this.quests=new Bg(e.player),this.friends=new Fg(e.player),this.menus={inventory:this.inventory,bank:this.bank,store:this.store,profile:this.profile,enchant:this.enchant,warp:this.warp,notification:this.notification,settings:this.settings,equipments:this.equipments,achievements:this.achievements,quests:this.quests,friends:this.friends},this.inventory.onSelect(this.handleInventorySelect.bind(this)),this.bank.onSelect(this.handleBankSelect.bind(this)),this.store.onSelect(this.handleStoreSelect.bind(this)),this.equipments.onSelect(this.handleProfileUnequip.bind(this)),this.profile.onUnequip(this.handleProfileUnequip.bind(this)),this.profile.onAbility(this.handleAbility.bind(this)),this.warp.onSelect(this.handleWarp.bind(this)),this.friends.onConfirm(this.handleFriendConfirm.bind(this)),this.load()}load(){new Mg(this.game.player),this.forEachMenu((t=>t.onShow((()=>this.hide()))))}hide(){this.forEachMenu((t=>t.hide()))}synchronize(t){if(t)return this.menus[t]?.synchronize();this.forEachMenu((t=>t.synchronize()))}resize(){this.header.resize(),this.forEachMenu((t=>t.resize()))}getInventory(){return this.inventory}getBank(){return this.bank}getStore(){return this.store}getProfile(){return this.profile}getNotification(){return this.notification}getWarp(){return this.warp}getAchievements(){return this.achievements}getQuests(){return this.quests}getFriends(){return this.friends}handleInventorySelect(t,e,i){this.game.socket.send(V.Container,{opcode:e,type:L.Inventory,index:t,tIndex:i})}handleBankSelect(t,e){this.game.socket.send(V.Container,{opcode:f.Select,type:L.Bank,subType:t,index:e})}handleStoreSelect(t,e,i,n=1){this.game.socket.send(V.Store,{opcode:t,key:e,index:i,count:n})}handleProfileUnequip(t){this.game.socket.send(V.Equipment,{opcode:d.Unequip,type:t})}handleAbility(t,e,i){this.game.socket.send(V.Ability,{opcode:t,key:e,index:i})}handleWarp(t){this.game.socket.send(V.Warp,{id:t})}handleFriendConfirm(t,e=!1){this.game.socket.send(V.Friends,{opcode:e?T.Remove:T.Add,username:t})}forEachMenu(t){ve.each(this.menus,t)}}class Hg{constructor(e,i,n){t(this,"x",-1),t(this,"y",-1),t(this,"blinkInterval",void 0),t(this,"visible",!0),this.id=e,this.element=i,this.type=n,this.load()}load(){this.blinkInterval=window.setInterval((()=>{this.visible?this.hide():this.show(),this.visible=!this.visible}),600)}setPosition(t,e){this.x=t,this.y=e}destroy(){clearInterval(this.blinkInterval),this.type===x.Button?this.hide():this.element.remove()}show(){this.type===x.Button?this.element.addClass("active"):this.element.show()}hide(){this.type===x.Button?this.element.removeClass("active"):this.element.hide()}}class Ug{constructor(e){t(this,"camera",void 0),t(this,"pointers",{}),t(this,"container",$c("#bubbles")),this.game=e,this.camera=this.game.camera}create(t,e,i){let{pointers:n,container:r}=this;if(!(t in n))switch(e){case x.Button:n[t]=new Hg(t,$c(`#${i}`),e);break;default:{let i=$c(`<div id="${t}" class="pointer"></div>`);this.setSize(i),r.append(i),n[t]=new Hg(t,i,e);break}}}resize(){ve.each(this.pointers,(({type:t,x:e,y:i,element:n})=>{switch(t){case x.Relative:{let t=this.getZoom(),r=0,o=0;n.css({left:e*t-r+"px",top:i*t-o+"px"});break}}}))}setSize(t){t.css({top:"30px",width:"64px",height:"64px",margin:"inherit",marginTop:"-18px",background:'url("/img/pointer.png") no-repeat -4px'})}clean(){ve.each(this.pointers,(t=>t.destroy())),this.pointers={}}destroy(t){delete this.pointers[t.id],t.destroy()}set(t,e,i){let{camera:n,game:r}=this;if(!n)return;let{element:o}=t,{canvasWidth:a,canvasHeight:s}=r.renderer,l=r.map.tileSize*this.getZoom(),h=(e-n.x)*this.getZoom(),d=parseInt(o.css("width"))/2-l/2,u=(i-n.y)*this.getZoom()-l,c=h/a,g=u/s;c>=1.5?o.css({left:"",right:0,top:"50%",bottom:"",transform:"rotate(-90deg)"}):g>=1.5?o.css({left:"50%",right:"",top:"",bottom:0,transform:""}):c<=0?o.css({left:0,right:"",top:"50%",bottom:"",transform:"rotate(90deg)"}):g<=0?o.css({left:"",right:"50%",top:0,bottom:"",transform:"rotate(180deg)"}):o.css({left:h-d+"px",right:"",top:`${u}px`,bottom:"",transform:""})}setToEntity(t){let e=this.get(t.instance);e&&this.set(e,t.x,t.y)}setToPosition(t,e,i){let n=this.get(t);n&&(n.setPosition(e,i),this.set(n,e,i))}setRelative(t,e,i){let n=this.get(t);if(!n)return;let r=this.getZoom();n.setPosition(e,i),n.element.css({left:e*r-0+"px",top:i*r-0+"px"})}update(){ve.each(this.pointers,(t=>{switch(t.type){case x.Entity:{let e=this.game.entities.get(t.id);e?this.setToEntity(e):this.destroy(t);break}case x.Location:-1!==t.x&&-1!==t.y&&this.set(t,t.x,t.y)}}))}get(t){let{pointers:e}=this;return t in e?e[t]:null}getZoom(){return this.game.camera.zoomFactor}}const $g=[{id:"adhererarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"adherer",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"adhererrobe",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"adminarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"agent",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ancientmanumentnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"angelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ant",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-28},{id:"archerarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"archerschooluniform",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"axe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"fireaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"poisonaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"rustedaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"babyspider",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"bamboospear",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bastardsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bat",idleSpeed:100,width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"icebat",idleSpeed:100,width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"beachnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"bearseonbiarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"beautifullife",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"beearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bee",width:20,height:19,animations:{death:{length:1,row:4},atk_right:{length:4,row:1},walk_right:{length:4,row:1},idle_right:{length:2,row:1},atk_up:{length:4,row:3},idle_up:{length:2,row:3},walk_up:{length:4,row:3},atk_down:{length:4,row:2},walk_down:{length:4,row:2},idle_down:{length:2,row:2}},offsetX:-8,offsetY:-8},{id:"beetlearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"beetle",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"blackpirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-15},{id:"blackspiderarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"blackwizard",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"blazespider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"bloodbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bluebikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"greencockroach",width:42,height:42,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:3,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:3,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"bluedamboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"piratearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenpiratearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"purplepiratearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redpiratearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluepreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"bluescimitar",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluestoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"bluesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"bluewingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluewingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"boss",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"boxingman",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"breaker",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"bridalmask",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bronzemedal",width:12,height:12},{id:"brownmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"bucklerbenef",width:32,height:32,animations:{atk_right:{length:10,row:0},walk_right:{length:10,row:0},idle_right:{length:10,row:0},atk_up:{length:10,row:0},walk_up:{length:10,row:0},idle_up:{length:10,row:0},atk_down:{length:10,row:0},walk_down:{length:10,row:0},idle_down:{length:10,row:0}},offsetX:-9,offsetY:-32},{id:"burgerarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"butcherknife",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"cactusaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"goldaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"carnelianaxe",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"cactus",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:1,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:1,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:1,row:8}},offsetX:-16,offsetY:-28},{id:"candybar",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"captainbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"catarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"cat",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:4,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:4,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:4,row:8}},offsetX:-16,offsetY:-25},{id:"cheoliarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"cheoliarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"chest",animations:{idle_down:{length:1,row:0}},offsetX:0,offsetY:0},{id:"christmasarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"clam",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"pickle",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"clotharmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ghost",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"cobra",width:28,height:28,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:6,row:8}},offsetX:-6,offsetY:-10},{id:"cockroachsuit",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"coder",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-7},{id:"cokearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"combatuniform",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"comb",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"conferencecall",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"crab",width:32,height:32,idleSpeed:300,animations:{death:{length:8,row:0},atk_right:{length:7,row:1},walk_right:{length:6,row:2},idle_right:{length:4,row:3},atk_up:{length:8,row:4},idle_up:{length:4,row:5},walk_up:{length:6,row:6},atk_down:{length:8,row:7},walk_down:{length:6,row:8},idle_down:{length:7,row:9}},offsetX:-8,offsetY:-8},{id:"icecrab",width:32,height:32,idleSpeed:300,animations:{death:{length:8,row:0},atk_right:{length:7,row:1},walk_right:{length:6,row:2},idle_right:{length:4,row:3},atk_up:{length:8,row:4},idle_up:{length:4,row:5},walk_up:{length:6,row:6},atk_down:{length:8,row:7},walk_down:{length:6,row:8},idle_down:{length:7,row:9}},offsetX:-8,offsetY:-8},{id:"effect-critical",width:48,height:48,animations:{effect:{length:10,row:0}},offsetX:-17,offsetY:-21},{id:"crystalarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"crystalarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"crystalbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"crystalscolpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"cursedhahoemask",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-21,offsetY:-49},{id:"cursedjangseung",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"damboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"darkogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"darkregionillusion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"darkregion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"darkscolpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"darkskeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-22},{id:"daywalker",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"deathbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"death",width:24,height:24,animations:{death:{length:6,row:0}},offsetX:-4,offsetY:-4},{id:"deathknight",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-13,offsetY:-17},{id:"desertnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"desertscorpion",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-24,offsetY:-32},{id:"devilkazyaarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"devilkazya",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"devilkazyasword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"dinosaurarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"doctor",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"dovakinarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"dovakinarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"dragonarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"earthworm",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-22},{id:"elfnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"eliminator",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"enelarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"enel",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"eneltrident",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"evilarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"eye",width:40,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:14,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:14,row:5},atk_down:{length:8,row:6},walk_down:{length:4,row:7},idle_down:{length:14,row:8}},offsetX:-12,offsetY:-18},{id:"fairynpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"fallenarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"fallenarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"firebenef",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:0},idle_right:{length:5,row:0},atk_up:{length:5,row:0},walk_up:{length:5,row:0},idle_up:{length:5,row:0},atk_down:{length:5,row:0},walk_down:{length:5,row:0},idle_down:{length:5,row:0}},offsetX:-17,offsetY:-21},{id:"firefox",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:8,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"fireplay",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"fireshot",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"firespider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"firesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"firstsonangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"fisherman",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"effect-flaredance",width:48,height:48,animations:{effect:{length:4,row:0}},offsetX:-17,offsetY:-21},{id:"flaredeathknight",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-13,offsetY:-17},{id:"fluffy",width:28,height:32,animations:{death:{length:1,row:8},atk_right:{length:4,row:7},walk_right:{length:6,row:3},idle_right:{length:1,row:3},atk_up:{length:4,row:6},idle_up:{length:1,row:2},walk_up:{length:6,row:2},atk_down:{length:4,row:4},walk_down:{length:6,row:0},idle_down:{length:1,row:0}},offsetX:-8,offsetY:-8},{id:"forestbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"forestdragon",width:64,height:72,animations:{atk_right:{length:7,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:7,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:7,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-30,offsetY:-30},{id:"forestguardiansword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"forestnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"frankensteinarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"friedpotatoarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"frogarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"frog",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-13},{id:"frostarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"frostqueen",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-16,offsetY:-22},{id:"gayarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"gayarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"gaybow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"gbwingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"gbwingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ghostrider",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"goblin",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-9},{id:"goldenarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"goldenarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"platinumarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"goldenbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"goldensword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"platinumsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"goldgolem",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-24},{id:"goldmedal",width:12,height:12},{id:"pointer",width:32,height:32},{id:"golem",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-17},{id:"greenarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"greendamboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenfish",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"greenlightbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"greenlightsaber",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"greenpirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-15},{id:"greenwingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenwingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"guardarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"guardarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"guardmace",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"guardsword",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"guard",width:25,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-5,offsetY:-8},{id:"guard2",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-8,offsetY:-12},{id:"royalguard",width:25,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-5,offsetY:-8},{id:"halberd",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"halloweenjkarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"hammer",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"hand",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"effect-heal2",width:32,height:32,animations:{effect:{length:10,row:0}},offsetX:-8,offsetY:-10},{id:"hellspider",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-33},{id:"hermitcrab",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-10},{id:"hobgoblin",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"hongcheolarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-15},{id:"hongcheol",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-15},{id:"huniarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"hunterbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"iamverycoldnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"iceelfnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"icegolem",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-12},{id:"iceknight",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-13,offsetY:-17},{id:"icerose",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"icevulture",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"infectedguard",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"ironbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"ironknightarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ironogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"item-adhererarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-logs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-palmlogs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icelogs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icepalmlogs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bloodwoodlogs",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pickle",width:8,height:16,animations:{idle:{length:12,row:0}},offsetX:0,offsetY:0},{id:"item-adhererrobe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-adminarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-archerarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-archerschooluniform",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-axe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rustedaxe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bamboospear",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bastardsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bearseonbiarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-beautifullife",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-beearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-beetlearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-blackpotion",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-blackspiderarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bloodbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluedamboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-piratearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenpiratearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-purplepiratearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redpiratearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluescimitar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluewingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluewingarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-book",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-breaker",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bridalmask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-burgerarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-burger",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-butcherknife",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cactusaxe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cake",width:24,height:24,animations:{idle:{length:3,row:0}},offsetX:-4,offsetY:-6},{id:"item-candybar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-captainbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-catarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cd",animations:{idle:{length:4,row:0}},offsetX:0,offsetY:0},{id:"item-cheoliarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cheoliarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-christmasarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-clotharmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cockroachsuit",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-cokearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-combatuniform",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-comb",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-conferencecall",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-crystalarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-crystalarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-crystalbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-damboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-daywalker",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-deathbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-devilkazyaarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-devilkazyasword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-diamondring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dinosaurarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dolring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dovakinarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dovakinarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-dragonarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-emeraldring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-enelarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-eneltrident",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-essentialrage",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-evilarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fallenarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fallenarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fireplay",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-firepotion",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-fireshot",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-firesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-manaflask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bigflask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gold",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mountseadragon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mountforestdragon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mountwhitetiger",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-forestbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"lightningguardian",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"item-forestguardiansword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-frankensteinarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-friedpotatoarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-frogarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-frostarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gayarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gayarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gaybow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gbwingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-gbwingarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ghostrider",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldenarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldenarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldenbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldensword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-goldring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greendamboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenlightbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenlightsaber",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenpendant",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenwingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenwingarmor",width:18,height:18,animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-guardarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-guardarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-halberd",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-halloweenjkarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-hammer",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-hongcheolarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-huniarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-hunterbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icerose",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ironbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ironknightarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-justicebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-justicehammer",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-leatherarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-leatherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-legolasarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-loveactring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-machete",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-magicspear",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mailarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mailarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-marblependant",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-marinebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-memme",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-mermaidbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-miniseadragonarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-morningstar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ninjaarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-paewoldo",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-paladinarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pearlpendant",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pearlring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pendant1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pinkcockroacharmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pinksword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-piratearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-blackpiratearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-greenpiratearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-purplepiratearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redpiratearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-pirateking",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-plasticbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-platearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-platearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-plunger",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-portalarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-powerarmour",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-powersword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-purplecloudkallege",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rabbitarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-radisharmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rainbowapro",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rainbowsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ratarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ratarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-bluearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-reddamboarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redenelbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redguardarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redguardarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redlightbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redlightsaber",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redmetalbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redmetalsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redsicklebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redsickle",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redsword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redwingarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-redwingarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-regionarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-ring1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-robocoparmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rosebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rose",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-royalazalea",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rubyring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-rudolfarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sapphirering",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-schooluniform",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-scimitar",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-seadragonarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-seahorsebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-searage",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shadowregionarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sicklebow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sickle",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sidesword",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-skylightbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-skylightsaber",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowfoxarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowfoxarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowmanarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-snowpotion",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-spear",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-spiritring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sproutring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-squeakyhammer",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-squidarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sword1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-sword2",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-taekwondo",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-tamagotchiring",width:22,height:16,animations:{idle:{length:5,row:0}},offsetX:0,offsetY:0},{id:"item-thiefarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-tigerarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-topazring",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-trident",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-typhoon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-violetbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-watermelonbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-staff",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-lightningstaff",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-naturestaff",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-firestaff",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-icestaff",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-whip",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-whitearcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-whitearmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-wizardrobe",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-wolfarcherarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-wolfarmor",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-woodenbow",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"jirisanmoonbear",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-26},{id:"justicebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"justicehammer",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"kaonashi",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"king",width:32,height:32,animations:{idle_down:{length:2,row:0}},offsetX:-8,offsetY:-12},{id:"lavanpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"leatherarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"leatherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"legolasarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"windguardian",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"livingarmor",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13},{id:"loot",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"machete",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"magicspear",width:52,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-19,offsetY:-21},{id:"mailarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"mailarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"item-flask",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt1",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt2",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt3",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt4",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-shardt5",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-orange",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-watermelon",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-apple",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"item-banana",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"mantis",width:42,height:42,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"marinebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"memme",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"mermaidbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"mermaid",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"mermaidnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"mimic",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:1,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:1,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:1,row:8}},offsetX:-8,offsetY:-11},{id:"minidragon",width:32,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-22},{id:"miniemperor",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"miniiceknight",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniknight",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"miniseadragonarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"miniseadragon",width:32,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-8,offsetY:-22},{id:"mojojojonpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"moleking",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"momangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"morningstar",width:38,height:38,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-11,offsetY:-15},{id:"nightmareregion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"ninjaarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"nyan",width:49,height:24,animations:{idle_down:{length:6,row:0}},offsetX:-22,offsetY:-6},{id:"octocat",width:32,height:32,animations:{idle_down:{length:4,row:0}},offsetX:-8,offsetY:-12},{id:"octopus",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"oddeyecat",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"ogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-24},{id:"ogrelord",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"oldogre",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"orc",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"paewoldo",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"pain",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"paladinarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"penguin",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"pierrot",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"pinkcockroacharmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"pinkelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"pinksword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"piratearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"blackpiratearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"greenpiratearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"purplepiratearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redpiratearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"piratecaptain",width:64,height:64,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"pirategirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"pirateking",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"pirateskeleton",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-5,offsetY:-13},{id:"plasticbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"platearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"platearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"plunger",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"poisonspider",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"portalarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"powerarmour",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"powersword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"preta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"priest",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"effect-provocation",width:32,height:64,animations:{effect:{length:10,row:0}},offsetX:-8,offsetY:-42},{id:"purplecloudkallege",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"purplepreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"queenant",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"queenspider",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"rabbitarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"radisharmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-17},{id:"rainbowapro",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"rainbowsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"ratarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"ratarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"rat",width:48,height:48,idleSpeed:250,animations:{death:{length:4,row:0},atk_right:{length:6,row:1},walk_right:{length:3,row:2},idle_right:{length:2,row:3},atk_up:{length:4,row:4},walk_up:{length:4,row:5},idle_up:{length:4,row:6},atk_down:{length:4,row:7},walk_down:{length:4,row:8},idle_down:{length:4,row:9}}},{id:"icerat",width:48,height:48,idleSpeed:200,animations:{death:{length:4,row:0},atk_right:{length:6,row:1},walk_right:{length:3,row:2},idle_right:{length:2,row:3},atk_up:{length:4,row:4},walk_up:{length:4,row:5},idle_up:{length:4,row:6},atk_down:{length:4,row:7},walk_down:{length:4,row:8},idle_down:{length:4,row:9}}},{id:"redarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"bluearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redbikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"redbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redcockroach",width:42,height:42,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:3,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:3,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"reddamboarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redenelbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redfish",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"redguardarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redguardarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redguard",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"redlightbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redlightsaber",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redmetalbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redmetalsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"redpirateskeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-23},{id:"redsicklebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redsickle",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"redstoremannpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"redsword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"icesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"redwingarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"redwingarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"regionarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"regionhenchman",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:5,row:7},idle_down:{length:2,row:8}},offsetX:-24,offsetY:-39},{id:"rhaphidophoridae",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"rick",width:32,height:32,animations:{idle_down:{length:4,row:0}},offsetX:-8,offsetY:-12},{id:"robocoparmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"rosebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"rose",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"rudolfarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-16},{id:"rudolf",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"santaelf",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"santa",width:64,height:72,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-24,offsetY:-55},{id:"schooluniform",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"scientist",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"scimitar",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"seadragonarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"seadragon",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-39},{id:"seahorsebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"searage",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"secondsonangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"shadow16",width:16,height:16},{id:"shadowregionarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"shadowregion",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"shepherdboy",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"shieldbenef",width:32,height:30,animations:{atk_right:{length:8,row:0},walk_right:{length:8,row:0},idle_right:{length:8,row:0},atk_up:{length:8,row:0},walk_up:{length:8,row:0},idle_up:{length:8,row:0},atk_down:{length:8,row:0},walk_down:{length:8,row:0},idle_down:{length:8,row:0}},offsetX:-6,offsetY:-10},{id:"sicklebow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"sickle",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"sidesword",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"silvermedal",width:12,height:12},{id:"skeleton2",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-20},{id:"skeleton",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-16,offsetY:-20},{id:"skeletonking",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:3,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-36},{id:"skydinosaur",width:64,height:72,animations:{atk_right:{length:6,row:0},walk_right:{length:5,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-49},{id:"skyelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"skylightbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"skylightsaber",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"slime",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-6,offsetY:-12},{id:"smalldevil",width:42,height:42,animations:{atk_right:{length:4,row:0},walk_right:{length:2,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:2,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:2,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-16},{id:"snek",width:28,height:28,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:4,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:6,row:8}},offsetX:-6,offsetY:-10},{id:"snowelf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowfoxarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowfoxarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowlady",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"snowmanarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"snowman",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-5,offsetY:-13},{id:"snowrabbit",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"snowshepherdboy",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"snowwolf",width:42,height:42,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-14,offsetY:-21},{id:"soldierant",width:48,height:48,animations:{atk_right:{length:4,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:4,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-27},{id:"soldier",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"sorcerer",width:26,height:26,animations:{idle_down:{length:6,row:0}},offsetX:-5,offsetY:-9},{id:"soybeanbug",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"sparks",animations:{idle:{length:6,row:0}},offsetX:0,offsetY:0},{id:"spear",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"spectre",width:34,height:34,animations:{atk_right:{length:8,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:8,row:4},idle_up:{length:8,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-9,offsetY:-13},{id:"spider",width:35,height:35,animations:{death:{length:1,row:8},atk_right:{length:2,row:7},walk_right:{length:5,row:3},idle_right:{length:1,row:3},atk_up:{length:2,row:6},idle_up:{length:1,row:2},walk_up:{length:5,row:2},atk_down:{length:2,row:4},walk_down:{length:5,row:0},idle_down:{length:1,row:0}},offsetX:-8,offsetY:-8},{id:"sponge",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"squeakyhammer",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"squidarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"squid",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"effect-stun",width:48,height:48,animations:{effect:{length:6,row:0}},offsetX:-15,offsetY:-38},{id:"suicideghost",width:48,height:48,animations:{atk_right:{length:6,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:6,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:6,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-30},{id:"effect-supercat",width:32,height:64,animations:{effect:{length:10,row:0}},offsetX:-8,offsetY:-42},{id:"superiorangelnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"sword1",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"sword2",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-20},{id:"sword",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"taekwondo",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"talk",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"axe_cursor",width:14,height:14,animations:{idle_down:{length:1,row:0}}},{id:"target",animations:{move:{length:4,row:0},atk:{length:4,row:1}}},{id:"thiefarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"tigerarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"trident",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"typhoon",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"vampire",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"vendingmachine",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villagegirl",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"villager",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"violetbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"vulture",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:5,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-25},{id:"watermelonbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"staff",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"lightningstaff",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"naturestaff",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"firestaff",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"icestaff",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"whip",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"whitearcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"whitearmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"whitebear",width:48,height:48,animations:{atk_right:{length:3,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:6,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:6,row:7},idle_down:{length:2,row:8}},offsetX:-16,offsetY:-22},{id:"whitemouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"whitetiger",width:64,height:72,animations:{atk_right:{length:5,row:0},walk_right:{length:6,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:6,row:4},idle_up:{length:4,row:5},atk_down:{length:5,row:6},walk_down:{length:6,row:7},idle_down:{length:4,row:8},"Group 5":{length:3,row:9}},offsetX:-24,offsetY:-54},{id:"wizard",width:26,height:26,animations:{death:{length:3,row:0},atk_right:{length:4,row:1},atk_up:{length:4,row:2},atk_down:{length:4,row:3},walk_right:{length:4,row:4},walk_up:{length:4,row:5},walk_down:{length:4,row:6},idle_right:{length:6,row:7},idle_up:{length:6,row:8},idle_down:{length:6,row:9}},offsetX:-5,offsetY:-9},{id:"wizardrobe",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"wolfarcherarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"wolfarmor",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-12},{id:"wolf",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:3,row:2},atk_up:{length:4,row:3},walk_up:{length:4,row:4},idle_up:{length:3,row:5},atk_down:{length:4,row:6},walk_down:{length:4,row:7},idle_down:{length:3,row:8}},offsetX:-8,offsetY:-13},{id:"woodenbow",width:48,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-17,offsetY:-21},{id:"yellowbat",width:32,height:48,animations:{atk_right:{length:5,row:0},walk_right:{length:5,row:1},idle_right:{length:5,row:2},atk_up:{length:5,row:3},walk_up:{length:5,row:4},idle_up:{length:5,row:5},atk_down:{length:5,row:6},walk_down:{length:5,row:7},idle_down:{length:5,row:8}},offsetX:-8,offsetY:-24},{id:"yellowfish",width:32,height:32,animations:{atk_right:{length:5,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-13},{id:"yellowmouse",width:26,height:26,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-5,offsetY:-8},{id:"yellowpreta",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:4,row:3},walk_up:{length:3,row:4},idle_up:{length:4,row:5},atk_down:{length:4,row:6},walk_down:{length:3,row:7},idle_down:{length:4,row:8}},offsetX:-5,offsetY:-13},{id:"zombiegf",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"zombie",width:32,height:32,animations:{atk_right:{length:4,row:0},walk_right:{length:4,row:1},idle_right:{length:2,row:2},atk_up:{length:5,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:5,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-8,offsetY:-13},{id:"redbikinigirlnpc",width:24,height:24,animations:{idle_down:{length:2,row:0}},offsetX:-4,offsetY:-8},{id:"item-armorbinding",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armorcommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armorpatches",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armorrare",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-armoruncommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-branch",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-cloth",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-element",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-leaf",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-mineral",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-rock",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-seed",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponblade",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponcommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponhilt",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponrare",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-weaponuncommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowcommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowlimb",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowrare",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowstring",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-bowuncommon",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"item-wood",animations:{idle:{length:1,row:0}},offsetX:0,offsetY:0},{id:"projectile-fireball",idleSpeed:75,width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24,offsetAngle:180},{id:"projectile-fireball2",idleSpeed:75,width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24,offsetAngle:180},{id:"projectile-iceball",idleSpeed:75,width:48,height:48,animations:{travel:{length:8,row:0}},offsetX:-24,offsetY:-24,offsetAngle:180},{id:"projectile-bluelightning",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-redlightning",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-greenbolt",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-purplebolt",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-yellowlightning",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-poisonball",width:50,height:50,animations:{travel:{length:8,row:0}},offsetX:-18,offsetY:-17},{id:"projectile-boulder",idleSpeed:75,width:32,height:32,animations:{travel:{length:8,row:0}},offsetX:-16,offsetY:-16,offsetAngle:-45},{id:"projectile-pinearrow",idleSpeed:75,width:24,height:24,animations:{travel:{length:1,row:0}},offsetX:-12,offsetY:-12,offsetAngle:180},{id:"projectile-none",idleSpeed:75,width:64,height:64,animations:{travel:{length:1,row:0}},offsetX:-32,offsetY:-32,offsetAngle:0},{id:"projectile-tornado",idleSpeed:75,width:48,height:64,animations:{travel:{length:8,row:0}},offsetX:-29,offsetY:-37,offsetAngle:0},{id:"projectile-terror",idleSpeed:75,width:64,height:64,animations:{travel:{length:8,row:0}},offsetX:-32,offsetY:-32,offsetAngle:180},{id:"projectile-gift",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24,offsetAngle:0},{id:"projectile-gift2",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24,offsetAngle:0},{id:"projectile-gift3",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24,offsetAngle:0},{id:"projectile-gift4",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24,offsetAngle:0},{id:"projectile-gift5",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24,offsetAngle:0},{id:"projectile-gift6",idleSpeed:75,width:32,height:32,animations:{travel:{length:4,row:0}},offsetX:-16,offsetY:-24,offsetAngle:0},{id:"effect-fireball",width:48,height:48,animations:{effect:{length:8,row:0}},offsetX:-17,offsetY:-16},{id:"effect-poisonball",width:40,height:40,animations:{effect:{length:10,row:0}},offsetX:-13,offsetY:-14},{id:"effect-burn",width:16,height:16,animations:{effect:{length:4,row:0}},offsetX:0,offsetY:0},{id:"effect-freeze",width:16,height:16,animations:{effect:{length:4,row:0}},offsetX:0,offsetY:0},{id:"effect-lavaball",width:48,height:48,animations:{effect:{length:8,row:0}},offsetX:-16,offsetY:-24},{id:"effect-heal",width:48,height:48,animations:{effect:{length:8,row:0}},offsetX:-16,offsetY:-16},{id:"effect-iceball",width:48,height:48,animations:{effect:{length:9,row:0}},offsetX:-18,offsetY:-15},{id:"effect-boulder",width:32,height:32,animations:{effect:{length:7,row:0}},offsetX:-9,offsetY:-12},{id:"spell",animations:{idle_down:{length:1,row:0}}},{id:"bow",animations:{idle_down:{length:1,row:0}}},{id:"effect-terror",width:64,height:64,animations:{effect:{length:8,row:0}},offsetX:-24,offsetY:-32},{id:"icegoblin",width:32,height:32,animations:{atk_right:{length:3,row:0},walk_right:{length:3,row:1},idle_right:{length:2,row:2},atk_up:{length:3,row:3},walk_up:{length:4,row:4},idle_up:{length:2,row:5},atk_down:{length:3,row:6},walk_down:{length:4,row:7},idle_down:{length:2,row:8}},offsetX:-7,offsetY:-13}];class Vg{constructor(e){t(this,"id",void 0),t(this,"name",void 0),t(this,"type",void 0),t(this,"loaded",!1),t(this,"loadHurt",!1),t(this,"offsetX",0),t(this,"offsetY",0),t(this,"hurtSprite",{loaded:!1}),t(this,"image",void 0),t(this,"filepath",void 0),t(this,"animationData",void 0),t(this,"width",void 0),t(this,"height",void 0),t(this,"idleSpeed",void 0),t(this,"hasDeathAnimation",void 0),this.sprite=e,this.id=e.id}load(){this.image=new Image;let{image:t,filepath:e}=this;t.crossOrigin="Anonymous",t.src=e,t.addEventListener("load",(()=>{let{loadHurt:t}=this;this.loaded=!0,t&&this.createHurtSprite(),this.loadCallback?.()}))}loadSprite(){let{sprite:t,id:e}=this,i=`/img/sprites/${e}.png`;this.filepath=i,this.animationData=t.animations,this.width=t.width??J.tileSize,this.height=t.height??J.tileSize,this.offsetX=t.offsetX??-J.tileSize,this.offsetY=t.offsetY??-J.tileSize,this.idleSpeed=t.idleSpeed||450}createAnimations(){let{animationData:t,width:e,height:i}=this,n={};for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;"death"===r&&(this.hasDeathAnimation=!0);let{length:o,row:a}=t[r];n[r]=new Kc(r,o,a,e,i)}return n}createHurtSprite(){if(this.loaded||this.load(),this.hurtSprite.loaded)return;let t,e=document.createElement("canvas"),i=e.getContext("2d");e.width=this.image.width,e.height=this.image.height;try{i.drawImage(this.image,0,0,this.image.width,this.image.height),t=i.getImageData(0,0,this.image.width,this.image.height);for(let e=0;e<t.data.length;e+=4)t.data[e]=255,t.data[e+1]=t.data[e+2]=75;i.putImageData(t,0,0),this.hurtSprite={image:e,name:"hurt",loaded:!0,offsetX:this.offsetX,offsetY:this.offsetY,width:this.width,height:this.height,type:"hurt"}}catch(n){r.error("Could not load hurt sprite.",n)}}onLoad(t){this.loadCallback=t}}class Gg{constructor(){t(this,"sprites",{}),t(this,"sparksAnimation",new Kc("idle_down",6,0,16,16)),this.sparksAnimation.setSpeed(120),this.load()}load(){for(let t of $g){let e=new Vg(t);e.loadSprite(),this.sprites[t.id]=e}r.debug("Finished loading sprite data..."),this.preloadSprites()}preloadSprites(){this.get("death").load()}get(t){return this.sprites[t]}getDeath(){return this.get("death")}}class Zg{constructor(){t(this,"direction",void 0)}reset(){this.direction=null}setUp(){this.direction=j.Up}setDown(){this.direction=j.Down}setRight(){this.direction=j.Right}setLeft(){this.direction=j.Left}getDirection(){return this.direction}}class Kg{constructor(e,i){t(this,"lastStepX",-1),t(this,"lastStepY",-1),t(this,"map",void 0),t(this,"camera",void 0),t(this,"input",void 0),t(this,"entities",void 0),t(this,"socket",void 0),t(this,"renderer",void 0),this.game=e,this.player=i,this.map=e.map,this.camera=e.camera,this.input=e.input,this.entities=e.entities,this.socket=e.socket,this.renderer=e.renderer,this.load()}load(){let{player:t,game:e,map:i,camera:n,input:r,entities:o,socket:a,renderer:s,lastStepX:l,lastStepY:h}=this;t.onRequestPath(((n,r)=>{if(t.dead||t.frozen)return null;let o=i.isObject(n,r),s=[];return i.isColliding(n,r)||o||a.send(V.Movement,{opcode:u.Request,requestX:n,requestY:r,playerX:t.gridX,playerY:t.gridY,targetInstance:t.target?.instance,following:t.following}),o&&s.push({hasPath:()=>!1,gridX:n,gridY:r}),e.findPath(t,n,r,s)})),t.onStartPathing((e=>{let i=e.length-1;t.moving=!0,[r.selectedX,r.selectedY]=e[i],r.selectedCellVisible=!0,a.send(V.Movement,{opcode:u.Started,requestX:r.selectedX,requestY:r.selectedY,playerX:t.gridX,playerY:t.gridY,movementSpeed:t.movementSpeed,targetInstance:t.target?.instance})})),t.onStopPathing(((i,s)=>{o.registerPosition(t),r.selectedCellVisible=!1,n.clip();let l=t.target?.instance||e.getEntityAt(i,s)?.instance;a.send(V.Movement,{opcode:u.Stop,playerX:i,playerY:s,targetInstance:l,orientation:t.orientation}),a.send(V.Target,[this.getTargetType(),t.target?t.target.instance:""]),t.target&&(t.lookAt(t.target),t.target.isObject()&&t.removeTarget(),t.disableAction=!0),r.setPassiveTarget(),e.storage.setOrientation(t.orientation),t.hasKeyboardMovement()||e.renderer.resetAnimatedTiles(),t.moving=!1})),t.onBeforeStep((()=>o.unregisterPosition(t))),t.onStep((()=>{t.hasNextStep()&&o.registerPosition(t),(!n.isCentered()||n.lockX||n.lockY)&&this.checkBounds(),l===t.gridX&&h===t.gridY||(a.send(V.Movement,{opcode:u.Step,playerX:t.gridX,playerY:t.gridY}),l=t.gridX,h=t.gridY,t.canAttackTarget()&&t.stop(!0))})),t.onSecondStep((()=>s.updateAnimatedTiles())),t.onMove((()=>{n.isCentered()&&n.centreOn(t)}))}isAttackable(){let{target:t}=this.player;return!!t&&(t.isMob()||t.isPlayer()&&this.game.pvp)}checkBounds(){let{player:t,camera:e,game:i,socket:n,renderer:r}=this,{zoning:o}=i;if(!o)return;let a=t.gridX-e.gridX,s=t.gridY-e.gridY;if(0===a?o.setLeft():0===s?o.setUp():a===e.gridWidth-2?o.setRight():s===e.gridHeight-2&&o.setDown(),null!==o.direction){let t=o.getDirection();e.zone(t),n.send(V.Movement,{opcode:u.Zone,direction:t}),r.updateAnimatedTiles(),o.reset()}}getTargetType(){let{target:t}=this.player;return t?this.isAttackable()?c.Attack:t.isNPC()||t.isChest()?c.Talk:t.isObject()?c.Object:c.None:c.None}}const Qg=960,Jg=672,tp=16,ep=[5,18,19,20,132,133,134,135,136,137,138,139,185,186,187,193,196,197,198,199,200,201,202,203,321,646,647,648,653,654,655,656,709,710,711,712,713,717,718,719,720,739,740,772,773,774,775,776,777,778,781,782,783,784,802,803,804,805,845,848,865,866,867,868,869,870,897,898,928,929,930,931,932,933,934,935,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,961,962,1036,1037,1100,1101,1109,1110,1111,1173,1174,1175,1217,1218,1219,1281,1282,1283,1434,1435,1437,1438,1439,1446,1447,1448,1510,1511,1512,1537,1538,1665,1793,1901,1914,1915,1916,1921,1922,1923,1938,1939,1941,1942,1943,1985,1986,1987,2001,2002,2003,2004,2005,2006,2007,2021,2022,2023,2065,2066,2067,2068,2069,2070,2071,2085,2086,2087,2089,2133,2158,2160,2217,2221,2222,2223,2224,2225,2241,2242,2243,2244,2285,2286,2287,2288,2289,2290,2291,2305,2306,2307,2308,2349,2350,2351,2352,2353,2354,2355,2369,2370,2371,2372,2385,2386,2387,2389,2390,2391,2429,2430,2431,2432,2453,2454,2455,2493,2494,2495,2496,2497,2498,2499,2500,2511,2549,2550,2551,2552,2557,2558,2559,2560,2561,2562,2564,2574,2575,2576,2613,2614,2615,2616,2638,2639,2640,2671,2673,2677,2678,2679,2680,2709,2710,2711,2712,2734,2735,2736,2737,2738,2741,2744,2773,2774,2775,2776,2793,2794,2796,2797,2798,2799,2800,2801,2802,2821,2822,2823,2837,2838,2839,2840,2857,2858,2860,2861,2862,2863,2864,2865,2866,2924,2925,2926,2927,2928,2929,2930,2931,2932,2933,2979,2988,2989,2990,2991,2992,2993,2994,2995,2996,2997,3042,3043,3044,3106,3107,3108,3113,3114,3115,3177,3178,3179,3289,3290,3291,3433,3434,3561,3562,3710,3711,3712,3774,3775,3776,3996,5199,5200,5262,5263,5264,5265,5271,5272,5275,5276,5325,5326,5327,5328,5329,5330,5335,5336,5388,5389,5390,5391,5392,5393,5394,5395,5569,5570,5571,5633,5634,5635,5697,5698,5699,5906,5907,5908,5970,5971,5972,6401,6402,6403,6465,6466,6467,6481,6482,6483,6529,6530,6531,6593,7110,7111,7112,7126,7127,7128,7129,7134,7135,7136,7137,7138,7139,7140,7141,7144,7173,7174,7175,7176,7190,7191,7192,7193,7198,7199,7200,7201,7202,7203,7204,7205,7237,7238,7239,7240,7241,7242,7243,7244,7369,7370,7371,7372,7433,7434,7435,7436,7497,7498,7499,7500,7621,7685,7693,7749,7757,9613,9614,9615,9616,9617,9618,9619,9677,9678,9679,9680,9681,9682,9683,13819,13884,13929,13930,13931,13932,13933,13934,13935,13936,13937,13938,13939,13940,13948,13993,13994,13995,13996,13997,13998,13999,14e3,14001,14002,14004,14005,14012,14070,14076,14134,14140,14198,14204,14268,14326,14332,14390,14396,14454,14521,14523,14585,14586,14587,16425,16426,16427,16428,16429,16451,16452,16489,16490,16491,16492,16493,16513,16514,16515,16516,16517,16518,16553,16554,16555,16556,16557,16577,16578,16579,16580,16581,16582,16617,16618,16619,16620,16621,16641,16642,16643,16644,16645,16705,16706,16707,16708,16709,17039,17040,17094,17224,17225,17226,17227,17228,17229,17230,17231,17288,17289,17290,17291,17292,17293,17294,17295,17352,17353,17354,17355,17356,17416,17417,17418,17419,17494,17495,17557,17558,17559,17560,17561,17562,17563,17564,17621,17622,17623,17624,17625,17626,17627,17628,17630,17631,17632,17634,17635,17636,17637,17665,17666,17667,17668,17669,17670,17671,17685,17686,17687,17688,17689,17690,17691,17692,17693,17694,17695,17696,17697,17698,17699,17700,17701,17702,17729,17730,17731,17732,17733,17734,17735,17757,17758,17759,17760,17761,17762,17763,17764,17765,17766,17793,17794,17795,17796,17797,17798,17799,17821,17825,17826,17827,17828,17829,18017,18018,18019,18020,18021,18022,18081,18082,18083,18084,18085,18145,18146,18147,18148,18209,18212,18305,18306,18307,18369,18370,18371,18390,18391,18394,18395,18398,18454,18455,18457,18458,18459,18460,18461,18462,18463,18517,18518,18519,18520,18521,18522,18523,18524,18525,18526,18527,18528,18563,18564,18565,18566,18567,18568,18569,18581,18582,18583,18584,18585,18586,18587,18588,18589,18590,18591,18592,18627,18628,18629,18630,18631,18632,18633,18634,18645,18646,18647,18648,18649,18650,18651,18652,18653,18654,18655,18656,18753,18754,18762,18763,18765,18766,18915,18916,18917,19021,19022,19023,19024,19025,19026,19027,19028,19085,19086,19087,19088,19089,19090,19091,19092,19101,19102,19103,19104,19105,19165,19166,19167,19168,19169,19213,19216,19217,19220,19302,19303,19304,19405,19406,19407,19842,19843,19906,19907,19916,19917,19918,19969,19970,19971,19972,19973,19974,19975,19976,19978,19979,19980,19981,19982,19983,20033,20034,20035,20036,20037,20038,20039,20040,20042,20043,20044,20045,20046,20047,20106,20107,20108,20109,20110,20743,20744,20745,20806,20807,20808,20809,20810,20869,20870,20871,20872,20873,20874,20875,20933,20934,20935,20936,20937,20938,20939],ip={0:0,1:4096,2:8192,3:12288,4:16384,5:20740},np={1:[{duration:150,tileId:0},{duration:150,tileId:1},{duration:150,tileId:2}],37:[{duration:200,tileId:36},{duration:200,tileId:37},{duration:200,tileId:38},{duration:200,tileId:39}],95:[{duration:200,tileId:94},{duration:200,tileId:95},{duration:200,tileId:96},{duration:200,tileId:97},{duration:200,tileId:98},{duration:200,tileId:99}],101:[{duration:200,tileId:100},{duration:200,tileId:101},{duration:200,tileId:102},{duration:200,tileId:103}],159:[{duration:200,tileId:158},{duration:200,tileId:159},{duration:200,tileId:160},{duration:200,tileId:161},{duration:200,tileId:162},{duration:200,tileId:163}],223:[{duration:200,tileId:222},{duration:200,tileId:223},{duration:200,tileId:224},{duration:200,tileId:225}],287:[{duration:200,tileId:286},{duration:200,tileId:287},{duration:200,tileId:288},{duration:200,tileId:289}],351:[{duration:200,tileId:350},{duration:200,tileId:351},{duration:200,tileId:352},{duration:200,tileId:353}],570:[{duration:150,tileId:569},{duration:150,tileId:570},{duration:150,tileId:571},{duration:150,tileId:572},{duration:150,tileId:573},{duration:150,tileId:574}],597:[{duration:200,tileId:596},{duration:200,tileId:597},{duration:200,tileId:598},{duration:200,tileId:599},{duration:200,tileId:600},{duration:200,tileId:601},{duration:200,tileId:602},{duration:200,tileId:603},{duration:200,tileId:604},{duration:200,tileId:605},{duration:200,tileId:606},{duration:200,tileId:607},{duration:200,tileId:608},{duration:200,tileId:609},{duration:200,tileId:610},{duration:200,tileId:611},{duration:200,tileId:612}],634:[{duration:150,tileId:633},{duration:150,tileId:634},{duration:150,tileId:635},{duration:150,tileId:636},{duration:150,tileId:637},{duration:150,tileId:638}],661:[{duration:200,tileId:660},{duration:200,tileId:661},{duration:200,tileId:662},{duration:200,tileId:663},{duration:200,tileId:664},{duration:200,tileId:665},{duration:200,tileId:666},{duration:200,tileId:667},{duration:200,tileId:668},{duration:200,tileId:669},{duration:200,tileId:670},{duration:200,tileId:671},{duration:200,tileId:672},{duration:200,tileId:673},{duration:200,tileId:674}],762:[{duration:150,tileId:761},{duration:150,tileId:762},{duration:150,tileId:763},{duration:150,tileId:764},{duration:150,tileId:765},{duration:150,tileId:766}],769:[{duration:150,tileId:768},{duration:150,tileId:769},{duration:150,tileId:770}],826:[{duration:150,tileId:825},{duration:150,tileId:826},{duration:150,tileId:827},{duration:150,tileId:828},{duration:150,tileId:829},{duration:150,tileId:830}],917:[{duration:200,tileId:916},{duration:200,tileId:917},{duration:200,tileId:918}],954:[{duration:150,tileId:953},{duration:150,tileId:954},{duration:150,tileId:955},{duration:150,tileId:956},{duration:150,tileId:957},{duration:150,tileId:958}],981:[{duration:200,tileId:980},{duration:200,tileId:981},{duration:200,tileId:982}],1018:[{duration:150,tileId:1017},{duration:150,tileId:1018},{duration:150,tileId:1019},{duration:150,tileId:1020},{duration:150,tileId:1021},{duration:150,tileId:1022}],1178:[{duration:200,tileId:1177},{duration:200,tileId:1178},{duration:200,tileId:1179},{duration:200,tileId:1180},{duration:200,tileId:1181},{duration:200,tileId:1182}],1210:[{duration:150,tileId:1209},{duration:150,tileId:1210},{duration:150,tileId:1211},{duration:150,tileId:1212},{duration:150,tileId:1213},{duration:150,tileId:1214}],1274:[{duration:150,tileId:1273},{duration:150,tileId:1274},{duration:150,tileId:1275},{duration:150,tileId:1276},{duration:150,tileId:1277},{duration:150,tileId:1278}],1621:[{duration:200,tileId:1620},{duration:200,tileId:1621},{duration:200,tileId:1622}],1685:[{duration:200,tileId:1684},{duration:200,tileId:1685},{duration:200,tileId:1686}],1691:[{duration:200,tileId:1690},{duration:200,tileId:1691},{duration:200,tileId:1692}],1813:[{duration:100,tileId:1812},{duration:100,tileId:1813},{duration:100,tileId:1814},{duration:100,tileId:1815},{duration:100,tileId:1816},{duration:100,tileId:1817},{duration:100,tileId:1818},{duration:100,tileId:1819},{duration:100,tileId:1820},{duration:100,tileId:1821},{duration:100,tileId:1822},{duration:100,tileId:1823},{duration:100,tileId:1824},{duration:100,tileId:1825},{duration:100,tileId:1826},{duration:100,tileId:1827},{duration:100,tileId:1828},{duration:100,tileId:1829},{duration:100,tileId:1830}],1877:[{duration:100,tileId:1876},{duration:100,tileId:1877},{duration:100,tileId:1878},{duration:100,tileId:1879},{duration:100,tileId:1880},{duration:100,tileId:1881},{duration:100,tileId:1882},{duration:100,tileId:1883},{duration:100,tileId:1884},{duration:100,tileId:1885},{duration:100,tileId:1886},{duration:100,tileId:1887},{duration:100,tileId:1888},{duration:100,tileId:1889},{duration:100,tileId:1890},{duration:100,tileId:1891},{duration:100,tileId:1892},{duration:100,tileId:1893},{duration:100,tileId:1894}],1897:[{duration:200,tileId:1896},{duration:200,tileId:1897},{duration:200,tileId:1898}],1926:[{duration:400,tileId:1925},{duration:400,tileId:1926},{duration:400,tileId:1927}],1990:[{duration:400,tileId:1989},{duration:400,tileId:1990}],2054:[{duration:400,tileId:2053},{duration:400,tileId:2054}],2246:[{duration:200,tileId:2245},{duration:200,tileId:2246},{duration:200,tileId:2247},{duration:200,tileId:2248}],2310:[{duration:200,tileId:2309},{duration:200,tileId:2310},{duration:200,tileId:2311},{duration:200,tileId:2312}],2376:[{duration:300,tileId:2375},{duration:300,tileId:2376}],2394:[{duration:400,tileId:2393},{duration:400,tileId:2394},{duration:400,tileId:2395}],2458:[{duration:400,tileId:2457},{duration:400,tileId:2458}],2522:[{duration:400,tileId:2521},{duration:400,tileId:2522}],2665:[{duration:200,tileId:2664},{duration:200,tileId:2665},{duration:200,tileId:2666}],2714:[{duration:150,tileId:2713},{duration:150,tileId:2714},{duration:150,tileId:2715},{duration:150,tileId:2716}],2778:[{duration:200,tileId:2777},{duration:200,tileId:2778},{duration:200,tileId:2779},{duration:200,tileId:2780}],2844:[{duration:300,tileId:2843},{duration:300,tileId:2844}],3201:[{duration:200,tileId:3200},{duration:200,tileId:3201},{duration:200,tileId:3202},{duration:200,tileId:3203}],3265:[{duration:200,tileId:3264},{duration:200,tileId:3265},{duration:200,tileId:3266},{duration:200,tileId:3267}],3329:[{duration:200,tileId:3328},{duration:200,tileId:3329},{duration:200,tileId:3330},{duration:200,tileId:3331}],3393:[{duration:200,tileId:3392},{duration:200,tileId:3393},{duration:200,tileId:3394},{duration:200,tileId:3395}],3669:[{duration:150,tileId:3668},{duration:150,tileId:3669},{duration:150,tileId:3670},{duration:150,tileId:3671}],3733:[{duration:150,tileId:3732},{duration:150,tileId:3733},{duration:150,tileId:3734},{duration:150,tileId:3735}],3797:[{duration:150,tileId:3796},{duration:150,tileId:3797},{duration:150,tileId:3798},{duration:150,tileId:3799}],3861:[{duration:150,tileId:3860},{duration:150,tileId:3861},{duration:150,tileId:3862},{duration:150,tileId:3863}],3922:[{duration:200,tileId:3921},{duration:200,tileId:3922},{duration:200,tileId:3923}],3947:[{duration:200,tileId:3946},{duration:200,tileId:3947},{duration:200,tileId:3948},{duration:200,tileId:3949},{duration:200,tileId:3950},{duration:200,tileId:3951}],3954:[{duration:200,tileId:3953},{duration:200,tileId:3954},{duration:200,tileId:3955},{duration:200,tileId:3956},{duration:200,tileId:3957},{duration:200,tileId:3958}],4011:[{duration:200,tileId:4010},{duration:200,tileId:4011},{duration:200,tileId:4012},{duration:200,tileId:4013},{duration:200,tileId:4014},{duration:200,tileId:4015}],4018:[{duration:200,tileId:4017},{duration:200,tileId:4018},{duration:200,tileId:4019},{duration:200,tileId:4020},{duration:200,tileId:4021},{duration:200,tileId:4022}],4555:[{duration:400,tileId:4554},{duration:400,tileId:4555},{duration:400,tileId:4556},{duration:400,tileId:4557},{duration:400,tileId:4558}],4561:[{duration:200,tileId:4560},{duration:200,tileId:4561},{duration:200,tileId:4562},{duration:200,tileId:4563}],4619:[{duration:400,tileId:4618},{duration:400,tileId:4619},{duration:400,tileId:4620},{duration:400,tileId:4621},{duration:400,tileId:4622},{duration:400,tileId:4623}],4683:[{duration:400,tileId:4682},{duration:400,tileId:4683},{duration:400,tileId:4684},{duration:400,tileId:4685}],4747:[{duration:400,tileId:4746},{duration:400,tileId:4747},{duration:400,tileId:4748},{duration:400,tileId:4749}],4811:[{duration:400,tileId:4810},{duration:400,tileId:4811},{duration:400,tileId:4812},{duration:400,tileId:4813}],5057:[{duration:200,tileId:5056},{duration:200,tileId:5057},{duration:200,tileId:5058},{duration:200,tileId:5059},{duration:200,tileId:5060},{duration:200,tileId:5061},{duration:200,tileId:5062},{duration:200,tileId:5063},{duration:200,tileId:5064},{duration:200,tileId:5065},{duration:200,tileId:5066},{duration:200,tileId:5067},{duration:200,tileId:5068},{duration:200,tileId:5069},{duration:200,tileId:5070},{duration:200,tileId:5071},{duration:200,tileId:5072}],5121:[{duration:200,tileId:5120},{duration:200,tileId:5121},{duration:200,tileId:5122},{duration:200,tileId:5123},{duration:200,tileId:5124},{duration:200,tileId:5125},{duration:200,tileId:5126},{duration:200,tileId:5127},{duration:200,tileId:5128},{duration:200,tileId:5129},{duration:200,tileId:5130},{duration:200,tileId:5131},{duration:200,tileId:5132},{duration:200,tileId:5133},{duration:200,tileId:5134}],5377:[{duration:200,tileId:5376},{duration:200,tileId:5377},{duration:200,tileId:5378}],5441:[{duration:200,tileId:5440},{duration:200,tileId:5441},{duration:200,tileId:5442}],5638:[{duration:200,tileId:5637},{duration:200,tileId:5638},{duration:200,tileId:5639},{duration:200,tileId:5640},{duration:200,tileId:5641},{duration:200,tileId:5642}],6081:[{duration:200,tileId:6080},{duration:200,tileId:6081},{duration:200,tileId:6082}],6145:[{duration:200,tileId:6144},{duration:200,tileId:6145},{duration:200,tileId:6146}],6151:[{duration:200,tileId:6150},{duration:200,tileId:6151},{duration:200,tileId:6152}],6273:[{duration:200,tileId:6272},{duration:200,tileId:6273},{duration:200,tileId:6274},{duration:200,tileId:6275},{duration:200,tileId:6276},{duration:200,tileId:6277},{duration:200,tileId:6278},{duration:200,tileId:6279},{duration:200,tileId:6280},{duration:200,tileId:6281},{duration:200,tileId:6282},{duration:200,tileId:6283},{duration:200,tileId:6284},{duration:200,tileId:6285},{duration:200,tileId:6286},{duration:200,tileId:6287},{duration:200,tileId:6288},{duration:200,tileId:6289},{duration:200,tileId:6290}],6337:[{duration:200,tileId:6336},{duration:200,tileId:6337},{duration:200,tileId:6338},{duration:200,tileId:6339},{duration:200,tileId:6340},{duration:200,tileId:6341},{duration:200,tileId:6342},{duration:200,tileId:6343},{duration:200,tileId:6344},{duration:200,tileId:6345},{duration:200,tileId:6346},{duration:200,tileId:6347},{duration:200,tileId:6348},{duration:200,tileId:6349},{duration:200,tileId:6350},{duration:200,tileId:6351},{duration:200,tileId:6352},{duration:200,tileId:6353},{duration:200,tileId:6354}],7621:[{duration:200,tileId:7620},{duration:200,tileId:7621},{duration:200,tileId:7622},{duration:200,tileId:7623}],7685:[{duration:200,tileId:7684},{duration:200,tileId:7685},{duration:200,tileId:7686},{duration:200,tileId:7687}],7693:[{duration:200,tileId:7692},{duration:200,tileId:7693},{duration:200,tileId:7694},{duration:200,tileId:7695},{duration:200,tileId:7696},{duration:200,tileId:7697},{duration:200,tileId:7698},{duration:200,tileId:7699}],7749:[{duration:200,tileId:7748},{duration:200,tileId:7749},{duration:200,tileId:7750},{duration:200,tileId:7751}],7757:[{duration:200,tileId:7756},{duration:200,tileId:7757},{duration:200,tileId:7758},{duration:200,tileId:7759},{duration:200,tileId:7760},{duration:200,tileId:7761},{duration:200,tileId:7762},{duration:200,tileId:7763}],7813:[{duration:200,tileId:7812},{duration:200,tileId:7813},{duration:200,tileId:7814},{duration:200,tileId:7815}]};class rp{constructor(e){t(this,"width",Qg),t(this,"height",Jg),t(this,"tileSize",tp),t(this,"data",[]),t(this,"grid",[]),t(this,"high",ep),t(this,"objects",[]),t(this,"lights",[]),t(this,"rawTilesets",ip),t(this,"tilesets",{}),t(this,"cursorTiles",{}),t(this,"animatedTiles",np),t(this,"mapLoaded",!1),t(this,"regionsLoaded",0),t(this,"tilesetsLoaded",!1),this.game=e,this.load()}ready(){this.mapLoaded&&this.tilesetsLoaded?this.readyCallback?.():window.setTimeout((()=>this.ready()),100)}load(){r.debug("Parsing map with Web Workers..."),J.tileSize=this.tileSize,J.sideLength=this.width/$.MAP_DIVISION_SIZE;let t=new Worker(new URL("/assets/mapworker-2e757b79.js",self.location),{type:"classic"});t.postMessage([this.width,this.height]),t.addEventListener("message",(t=>{t.data.data&&(this.data=t.data.data),t.data.grid&&(this.grid=t.data.grid),this.loadRegionData(),this.mapLoaded=!0})),this.loadTilesets(),this.ready()}loadRegions(t){ve.each(t,((t,e)=>this.loadRegion(t,parseInt(e)))),this.saveMapData()}loadRegion(t,e){for(let i of t){let t=this.coordToIndex(i.x,i.y),e=this.objects.indexOf(t);this.data[t]=i.data,i.c&&!this.isColliding(i.x,i.y)&&(this.grid[i.y][i.x]=1),!i.c&&this.isColliding(i.x,i.y)&&(this.grid[i.y][i.x]=0),i.cur&&(this.cursorTiles[t]=i.cur),!i.cur&&t in this.cursorTiles&&(this.cursorTiles[t]=""),i.o&&e<0&&this.objects.push(t),!i.o&&e>-1&&this.objects.splice(e,1)}this.game.storage.setRegionData(t,e)}loadTilesets(){ve.each(this.rawTilesets,((t,e)=>{this.loadTileset(t,parseInt(e),(t=>{this.tilesets[e]=t,ve.size(this.tilesets)===ve.size(this.rawTilesets)&&(this.tilesetsLoaded=!0)}))}))}loadTileset(t,e,i){let n=new Image,r=`/img/tilesets/tilesheet-${e+1}.png`;n.crossOrigin="Anonymous",n.path=r,n.src=r,n.firstGID=t,n.loaded=!0,n.addEventListener("load",(()=>{if(n.width%this.tileSize>0)throw new Error(`The tile size is malformed in the tile set: ${n.path}`);n.lastGID=t+n.width*n.height/this.tileSize**2,i(n)})),n.addEventListener("error",(()=>{throw new Error(`Could not find tile set: ${n.path}`)}))}loadRegionData(){this.game.storage.getRegionData((t=>{let e=Object.keys(t.regionData);if(e.length>0){try{this.loadRegions(t.regionData)}catch{this.game.storage.clear()}this.objects=t.objects,this.cursorTiles=t.cursorTiles,this.regionsLoaded=e.length,r.info(`Preloaded map data with ${e.length} regions.`)}}))}saveMapData(){this.game.storage.setMapData(this.objects,this.cursorTiles)}coordToIndex(t,e){return e*this.width+t}indexToCoord(t){return{x:t%this.width,y:Math.floor(t/this.width)}}isColliding(t,e){return!!this.isOutOfBounds(t,e)||(this.data[this.coordToIndex(t,e)]<1||1===this.grid[e][t])}isObject(t,e){let i=this.coordToIndex(t,e);return this.objects.includes(i)}getTileCursor(t,e){let i=this.coordToIndex(t,e);return this.cursorTiles[i]}isHighTile(t){return this.high.includes(t)}isLightTile(t){return this.lights.includes(t)}isAnimatedTile(t){return t in this.animatedTiles}hasCachedDate(){return this.regionsLoaded>0}isOutOfBounds(t,e){return Q(t)&&Q(e)&&(t<0||t>=this.width||e<0||e>=this.height)}getTileAnimation(t){return this.animatedTiles[t]}getTilesetFromId(t){for(let e in this.tilesets)if(t<this.tilesets[e].lastGID)return this.tilesets[e]}onReady(t){this.readyCallback=t}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function op(t){let e=t.length;for(;--e>=0;)t[e]=0}const ap=256,sp=286,lp=30,hp=15,dp=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),up=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),cp=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),gp=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pp=new Array(576);op(pp);const fp=new Array(60);op(fp);const wp=new Array(512);op(wp);const mp=new Array(256);op(mp);const _p=new Array(29);op(_p);const kp=new Array(lp);function bp(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}let vp,yp,xp;function Sp(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}op(kp);const Cp=t=>t<256?wp[t]:wp[256+(t>>>7)],Ep=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},Ip=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,Ep(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},Ap=(t,e,i)=>{Ip(t,i[2*e],i[2*e+1])},Yp=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},Xp=(t,e,i)=>{const n=new Array(16);let r,o,a=0;for(r=1;r<=hp;r++)a=a+i[r-1]<<1,n[r]=a;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=Yp(n[e]++,e))}},Tp=t=>{let e;for(e=0;e<sp;e++)t.dyn_ltree[2*e]=0;for(e=0;e<lp;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Lp=t=>{t.bi_valid>8?Ep(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},jp=(t,e,i,n)=>{const r=2*e,o=2*i;return t[r]<t[o]||t[r]===t[o]&&n[e]<=n[i]},Rp=(t,e,i)=>{const n=t.heap[i];let r=i<<1;for(;r<=t.heap_len&&(r<t.heap_len&&jp(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!jp(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n},zp=(t,e,i)=>{let n,r,o,a,s=0;if(0!==t.sym_next)do{n=255&t.pending_buf[t.sym_buf+s++],n+=(255&t.pending_buf[t.sym_buf+s++])<<8,r=t.pending_buf[t.sym_buf+s++],0===n?Ap(t,r,e):(o=mp[r],Ap(t,o+ap+1,e),a=dp[o],0!==a&&(r-=_p[o],Ip(t,r,a)),n--,o=Cp(n),Ap(t,o,i),a=up[o],0!==a&&(n-=kp[o],Ip(t,n,a)))}while(s<t.sym_next);Ap(t,256,e)},Pp=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.elems;let a,s,l,h=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<o;a++)0!==i[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,i[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=n[2*l+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)Rp(t,i,a);l=o;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Rp(t,i,1),s=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=s,i[2*l]=i[2*a]+i[2*s],t.depth[l]=(t.depth[a]>=t.depth[s]?t.depth[a]:t.depth[s])+1,i[2*a+1]=i[2*s+1]=l,t.heap[1]=l++,Rp(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const i=e.dyn_tree,n=e.max_code,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,u,c,g,p,f=0;for(c=0;c<=hp;c++)t.bl_count[c]=0;for(i[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],c=i[2*i[2*d+1]+1]+1,c>l&&(c=l,f++),i[2*d+1]=c,d>n||(t.bl_count[c]++,g=0,d>=s&&(g=a[d-s]),p=i[2*d],t.opt_len+=p*(c+g),o&&(t.static_len+=p*(r[2*d+1]+g)));if(0!==f){do{for(c=l-1;0===t.bl_count[c];)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[l]--,f-=2}while(f>0);for(c=l;0!==c;c--)for(d=t.bl_count[c];0!==d;)u=t.heap[--h],u>n||(i[2*u+1]!==c&&(t.opt_len+=(c-i[2*u+1])*i[2*u],i[2*u+1]=c),d--)}})(t,e),Xp(i,h,t.bl_count)},Op=(t,e,i)=>{let n,r,o=-1,a=e[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=a,a=e[2*(n+1)+1],++s<l&&r===a||(s<h?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=r,0===a?(l=138,h=3):r===a?(l=6,h=3):(l=7,h=4))},qp=(t,e,i)=>{let n,r,o=-1,a=e[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),n=0;n<=i;n++)if(r=a,a=e[2*(n+1)+1],!(++s<l&&r===a)){if(s<h)do{Ap(t,r,t.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(Ap(t,r,t.bl_tree),s--),Ap(t,16,t.bl_tree),Ip(t,s-3,2)):s<=10?(Ap(t,17,t.bl_tree),Ip(t,s-3,3)):(Ap(t,18,t.bl_tree),Ip(t,s-11,7));s=0,o=r,0===a?(l=138,h=3):r===a?(l=6,h=3):(l=7,h=4)}};let Mp=!1;const Dp=(t,e,i,n)=>{Ip(t,0+(n?1:0),3),Lp(t),Ep(t,i),Ep(t,~i),i&&t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i};var Np=t=>{Mp||((()=>{let t,e,i,n,r;const o=new Array(16);for(i=0,n=0;n<28;n++)for(_p[n]=i,t=0;t<1<<dp[n];t++)mp[i++]=n;for(mp[i-1]=n,r=0,n=0;n<16;n++)for(kp[n]=r,t=0;t<1<<up[n];t++)wp[r++]=n;for(r>>=7;n<lp;n++)for(kp[n]=r<<7,t=0;t<1<<up[n]-7;t++)wp[256+r++]=n;for(e=0;e<=hp;e++)o[e]=0;for(t=0;t<=143;)pp[2*t+1]=8,t++,o[8]++;for(;t<=255;)pp[2*t+1]=9,t++,o[9]++;for(;t<=279;)pp[2*t+1]=7,t++,o[7]++;for(;t<=287;)pp[2*t+1]=8,t++,o[8]++;for(Xp(pp,287,o),t=0;t<lp;t++)fp[2*t+1]=5,fp[2*t]=Yp(t,5);vp=new bp(pp,dp,257,sp,hp),yp=new bp(fp,up,0,lp,hp),xp=new bp(new Array(0),cp,0,19,7)})(),Mp=!0),t.l_desc=new Sp(t.dyn_ltree,vp),t.d_desc=new Sp(t.dyn_dtree,yp),t.bl_desc=new Sp(t.bl_tree,xp),t.bi_buf=0,t.bi_valid=0,Tp(t)},Bp=(t,e,i,n)=>{let r,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<ap;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),Pp(t,t.l_desc),Pp(t,t.d_desc),a=(t=>{let e;for(Op(t,t.dyn_ltree,t.l_desc.max_code),Op(t,t.dyn_dtree,t.d_desc.max_code),Pp(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*gp[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!==e?Dp(t,e,i,n):4===t.strategy||o===r?(Ip(t,2+(n?1:0),3),zp(t,pp,fp)):(Ip(t,4+(n?1:0),3),((t,e,i,n)=>{let r;for(Ip(t,e-257,5),Ip(t,i-1,5),Ip(t,n-4,4),r=0;r<n;r++)Ip(t,t.bl_tree[2*gp[r]+1],3);qp(t,t.dyn_ltree,e-1),qp(t,t.dyn_dtree,i-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),zp(t,t.dyn_ltree,t.dyn_dtree)),Tp(t),n&&Lp(t)},Fp={_tr_init:Np,_tr_stored_block:Dp,_tr_flush_block:Bp,_tr_tally:(t,e,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(mp[i]+ap+1)]++,t.dyn_dtree[2*Cp(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{Ip(t,2,3),Ap(t,256,pp),(t=>{16===t.bi_valid?(Ep(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var Wp=(t,e,i,n)=>{let r=65535&t|0,o=t>>>16&65535|0,a=0;for(;0!==i;){a=i>2e3?2e3:i,i-=a;do{r=r+e[n++]|0,o=o+r|0}while(--a);r%=65521,o%=65521}return r|o<<16|0};const Hp=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());var Up=(t,e,i,n)=>{const r=Hp,o=n+i;t^=-1;for(let a=n;a<o;a++)t=t>>>8^r[255&(t^e[a])];return-1^t},$p={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Gp,_tr_stored_block:Zp,_tr_flush_block:Kp,_tr_tally:Qp,_tr_align:Jp}=Fp,{Z_NO_FLUSH:tf,Z_PARTIAL_FLUSH:ef,Z_FULL_FLUSH:nf,Z_FINISH:rf,Z_BLOCK:of,Z_OK:af,Z_STREAM_END:sf,Z_STREAM_ERROR:lf,Z_DATA_ERROR:hf,Z_BUF_ERROR:df,Z_DEFAULT_COMPRESSION:uf,Z_FILTERED:cf,Z_HUFFMAN_ONLY:gf,Z_RLE:pf,Z_FIXED:ff,Z_DEFAULT_STRATEGY:wf,Z_UNKNOWN:mf,Z_DEFLATED:_f}=Vp,kf=258,bf=262,vf=42,yf=113,xf=666,Sf=(t,e)=>(t.msg=$p[e],e),Cf=t=>2*t-(t>4?9:0),Ef=t=>{let e=t.length;for(;--e>=0;)t[e]=0},If=t=>{let e,i,n,r=t.w_size;e=t.hash_size,n=e;do{i=t.head[--n],t.head[n]=i>=r?i-r:0}while(--e);e=r,n=e;do{i=t.prev[--n],t.prev[n]=i>=r?i-r:0}while(--e)};let Af=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const Yf=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},Xf=(t,e)=>{Kp(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Yf(t.strm)},Tf=(t,e)=>{t.pending_buf[t.pending++]=e},Lf=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},jf=(t,e,i,n)=>{let r=t.avail_in;return r>n&&(r=n),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),i),1===t.state.wrap?t.adler=Wp(t.adler,e,r,i):2===t.state.wrap&&(t.adler=Up(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)},Rf=(t,e)=>{let i,n,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match;const l=t.strstart>t.w_size-bf?t.strstart-(t.w_size-bf):0,h=t.window,d=t.w_mask,u=t.prev,c=t.strstart+kf;let g=h[o+a-1],p=h[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(i=e,h[i+a]===p&&h[i+a-1]===g&&h[i]===h[o]&&h[++i]===h[o+1]){o+=2,i++;do{}while(h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&h[++o]===h[++i]&&o<c);if(n=kf-(c-o),o=c-kf,n>a){if(t.match_start=e,a=n,n>=s)break;g=h[o+a-1],p=h[o+a]}}}while((e=u[e&d])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead},zf=t=>{const e=t.w_size;let i,n,r;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-bf)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),If(t),n+=e),0===t.strm.avail_in)break;if(i=jf(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=i,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=Af(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=Af(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<bf&&0!==t.strm.avail_in)},Pf=(t,e)=>{let i,n,r,o=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,s=t.strm.avail_in;do{if(i=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r)break;if(r=t.strm.avail_out-r,n=t.strstart-t.block_start,i>n+t.strm.avail_in&&(i=n+t.strm.avail_in),i>r&&(i=r),i<o&&(0===i&&e!==rf||e===tf||i!==n+t.strm.avail_in))break;a=e===rf&&i===n+t.strm.avail_in?1:0,Zp(t,0,0,a),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,Yf(t.strm),n&&(n>i&&(n=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+n),t.strm.next_out),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n,t.block_start+=n,i-=n),i&&(jf(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(0===a);return s-=t.strm.avail_in,s&&(s>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=s&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-s,t.strm.next_in),t.strstart),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==tf&&e!==rf&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(jf(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r,o=r>t.w_size?t.w_size:r,n=t.strstart-t.block_start,(n>=o||(n||e===rf)&&e!==tf&&0===t.strm.avail_in&&n<=r)&&(i=n>r?r:n,a=e===rf&&0===t.strm.avail_in&&i===n?1:0,Zp(t,t.block_start,i,a),t.block_start+=i,Yf(t.strm)),a?3:1)},Of=(t,e)=>{let i,n;for(;;){if(t.lookahead<bf){if(zf(t),t.lookahead<bf&&e===tf)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Af(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-bf&&(t.match_length=Rf(t,i)),t.match_length>=3)if(n=Qp(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Af(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Af(t,t.ins_h,t.window[t.strstart+1]);else n=Qp(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Xf(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===rf?(Xf(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Xf(t,!1),0===t.strm.avail_out)?1:2},qf=(t,e)=>{let i,n,r;for(;;){if(t.lookahead<bf){if(zf(t),t.lookahead<bf&&e===tf)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Af(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-bf&&(t.match_length=Rf(t,i),t.match_length<=5&&(t.strategy===cf||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=Qp(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=Af(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Xf(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=Qp(t,0,t.window[t.strstart-1]),n&&Xf(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Qp(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===rf?(Xf(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Xf(t,!1),0===t.strm.avail_out)?1:2};function Mf(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}const Df=[new Mf(0,0,0,0,Pf),new Mf(4,4,8,4,Of),new Mf(4,5,16,8,Of),new Mf(4,6,32,32,Of),new Mf(4,4,16,16,qf),new Mf(8,16,32,32,qf),new Mf(8,16,128,128,qf),new Mf(8,32,128,256,qf),new Mf(32,128,258,1024,qf),new Mf(32,258,258,4096,qf)];function Nf(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_f,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ef(this.dyn_ltree),Ef(this.dyn_dtree),Ef(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ef(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ef(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Bf=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==vf&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==yf&&e.status!==xf?1:0},Ff=t=>{if(Bf(t))return Sf(t,lf);t.total_in=t.total_out=0,t.data_type=mf;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?vf:yf,t.adler=2===e.wrap?0:1,e.last_flush=-2,Gp(e),af},Wf=t=>{const e=Ff(t);var i;return e===af&&((i=t.state).window_size=2*i.w_size,Ef(i.head),i.max_lazy_match=Df[i.level].max_lazy,i.good_match=Df[i.level].good_length,i.nice_match=Df[i.level].nice_length,i.max_chain_length=Df[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),e},Hf=(t,e,i,n,r,o)=>{if(!t)return lf;let a=1;if(e===uf&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),r<1||r>9||i!==_f||n<8||n>15||e<0||e>9||o<0||o>ff||8===n&&1!==a)return Sf(t,lf);8===n&&(n=9);const s=new Nf;return t.state=s,s.strm=t,s.status=vf,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=e,s.strategy=o,s.method=i,Wf(t)};var Uf=(t,e)=>Bf(t)||2!==t.state.wrap?lf:(t.state.gzhead=e,af),$f=(t,e)=>{if(Bf(t)||e>of||e<0)return t?Sf(t,lf):lf;const i=t.state;if(!t.output||0!==t.avail_in&&!t.input||i.status===xf&&e!==rf)return Sf(t,0===t.avail_out?df:lf);const n=i.last_flush;if(i.last_flush=e,0!==i.pending){if(Yf(t),0===t.avail_out)return i.last_flush=-1,af}else if(0===t.avail_in&&Cf(e)<=Cf(n)&&e!==rf)return Sf(t,df);if(i.status===xf&&0!==t.avail_in)return Sf(t,df);if(i.status===vf&&0===i.wrap&&(i.status=yf),i.status===vf){let e=_f+(i.w_bits-8<<4)<<8,n=-1;if(n=i.strategy>=gf||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=n<<6,0!==i.strstart&&(e|=32),e+=31-e%31,Lf(i,e),0!==i.strstart&&(Lf(i,t.adler>>>16),Lf(i,65535&t.adler)),t.adler=1,i.status=yf,Yf(t),0!==i.pending)return i.last_flush=-1,af}if(57===i.status)if(t.adler=0,Tf(i,31),Tf(i,139),Tf(i,8),i.gzhead)Tf(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Tf(i,255&i.gzhead.time),Tf(i,i.gzhead.time>>8&255),Tf(i,i.gzhead.time>>16&255),Tf(i,i.gzhead.time>>24&255),Tf(i,9===i.level?2:i.strategy>=gf||i.level<2?4:0),Tf(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Tf(i,255&i.gzhead.extra.length),Tf(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=Up(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Tf(i,0),Tf(i,0),Tf(i,0),Tf(i,0),Tf(i,0),Tf(i,9===i.level?2:i.strategy>=gf||i.level<2?4:0),Tf(i,3),i.status=yf,Yf(t),0!==i.pending)return i.last_flush=-1,af;if(69===i.status){if(i.gzhead.extra){let e=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let r=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>e&&(t.adler=Up(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex+=r,Yf(t),0!==i.pending)return i.last_flush=-1,af;e=0,n-=r}let r=new Uint8Array(i.gzhead.extra);i.pending_buf.set(r.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>e&&(t.adler=Up(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=Up(t.adler,i.pending_buf,i.pending-n,n)),Yf(t),0!==i.pending)return i.last_flush=-1,af;n=0}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Tf(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=Up(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=Up(t.adler,i.pending_buf,i.pending-n,n)),Yf(t),0!==i.pending)return i.last_flush=-1,af;n=0}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Tf(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=Up(t.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(Yf(t),0!==i.pending))return i.last_flush=-1,af;Tf(i,255&t.adler),Tf(i,t.adler>>8&255),t.adler=0}if(i.status=yf,Yf(t),0!==i.pending)return i.last_flush=-1,af}if(0!==t.avail_in||0!==i.lookahead||e!==tf&&i.status!==xf){let n=0===i.level?Pf(i,e):i.strategy===gf?((t,e)=>{let i;for(;;){if(0===t.lookahead&&(zf(t),0===t.lookahead)){if(e===tf)return 1;break}if(t.match_length=0,i=Qp(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Xf(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===rf?(Xf(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Xf(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===pf?((t,e)=>{let i,n,r,o;const a=t.window;for(;;){if(t.lookahead<=kf){if(zf(t),t.lookahead<=kf&&e===tf)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,n=a[r],n===a[++r]&&n===a[++r]&&n===a[++r])){o=t.strstart+kf;do{}while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<o);t.match_length=kf-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=Qp(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=Qp(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Xf(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===rf?(Xf(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Xf(t,!1),0===t.strm.avail_out)?1:2})(i,e):Df[i.level].func(i,e);if(3!==n&&4!==n||(i.status=xf),1===n||3===n)return 0===t.avail_out&&(i.last_flush=-1),af;if(2===n&&(e===ef?Jp(i):e!==of&&(Zp(i,0,0,!1),e===nf&&(Ef(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Yf(t),0===t.avail_out))return i.last_flush=-1,af}return e!==rf?af:i.wrap<=0?sf:(2===i.wrap?(Tf(i,255&t.adler),Tf(i,t.adler>>8&255),Tf(i,t.adler>>16&255),Tf(i,t.adler>>24&255),Tf(i,255&t.total_in),Tf(i,t.total_in>>8&255),Tf(i,t.total_in>>16&255),Tf(i,t.total_in>>24&255)):(Lf(i,t.adler>>>16),Lf(i,65535&t.adler)),Yf(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?af:sf)},Vf=(t,e)=>{let i=e.length;if(Bf(t))return lf;const n=t.state,r=n.wrap;if(2===r||1===r&&n.status!==vf||n.lookahead)return lf;if(1===r&&(t.adler=Wp(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===r&&(Ef(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const o=t.avail_in,a=t.next_in,s=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,zf(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=Af(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,zf(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=a,t.input=s,t.avail_in=o,n.wrap=r,af},Gf={deflateInit:(t,e)=>Hf(t,e,_f,15,8,wf),deflateInit2:Hf,deflateReset:Wf,deflateResetKeep:Ff,deflateSetHeader:Uf,deflate:$f,deflateEnd:t=>{if(Bf(t))return lf;const e=t.state.status;return t.state=null,e===yf?Sf(t,hf):af},deflateSetDictionary:Vf,deflateInfo:"pako deflate (from Nodeca project)"};const Zf=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Kf=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const e in i)Zf(i,e)&&(t[e]=i[e])}}return t},Qf=t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const i=new Uint8Array(e);for(let n=0,r=0,o=t.length;n<o;n++){let e=t[n];i.set(e,r),r+=e.length}return i};let Jf=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Yk){Jf=!1}const tw=new Uint8Array(256);for(let t=0;t<256;t++)tw[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;tw[254]=tw[254]=1;var ew=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,i,n,r,o,a=t.length,s=0;for(r=0;r<a;r++)i=t.charCodeAt(r),55296==(64512&i)&&r+1<a&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),s+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(s),o=0,r=0;o<s;r++)i=t.charCodeAt(r),55296==(64512&i)&&r+1<a&&(n=t.charCodeAt(r+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?e[o++]=i:i<2048?(e[o++]=192|i>>>6,e[o++]=128|63&i):i<65536?(e[o++]=224|i>>>12,e[o++]=128|i>>>6&63,e[o++]=128|63&i):(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63,e[o++]=128|i>>>6&63,e[o++]=128|63&i);return e},iw=(t,e)=>{const i=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,r;const o=new Array(2*i);for(r=0,n=0;n<i;){let e=t[n++];if(e<128){o[r++]=e;continue}let a=tw[e];if(a>4)o[r++]=65533,n+=a-1;else{for(e&=2===a?31:3===a?15:7;a>1&&n<i;)e=e<<6|63&t[n++],a--;a>1?o[r++]=65533:e<65536?o[r++]=e:(e-=65536,o[r++]=55296|e>>10&1023,o[r++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Jf)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i})(o,r)},nw=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+tw[t[i]]>e?i:e};var rw=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ow=Object.prototype.toString,{Z_NO_FLUSH:aw,Z_SYNC_FLUSH:sw,Z_FULL_FLUSH:lw,Z_FINISH:hw,Z_OK:dw,Z_STREAM_END:uw,Z_DEFAULT_COMPRESSION:cw,Z_DEFAULT_STRATEGY:gw,Z_DEFLATED:pw}=Vp;function fw(t){this.options=Kf({level:cw,method:pw,chunkSize:16384,windowBits:15,memLevel:8,strategy:gw},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rw,this.strm.avail_out=0;let i=Gf.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==dw)throw new Error($p[i]);if(e.header&&Gf.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?ew(e.dictionary):"[object ArrayBuffer]"===ow.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,i=Gf.deflateSetDictionary(this.strm,t),i!==dw)throw new Error($p[i]);this._dict_set=!0}}fw.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=e===~~e?e:!0===e?hw:aw,"string"==typeof t?i.input=ew(t):"[object ArrayBuffer]"===ow.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(o===sw||o===lw)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(r=Gf.deflate(i,o),r===uw)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=Gf.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===dw;if(0!==i.avail_out){if(o>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},fw.prototype.onData=function(t){this.chunks.push(t)},fw.prototype.onEnd=function(t){t===dw&&(this.result=Qf(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const ww=16209;var mw=function(t,e){let i,n,r,o,a,s,l,h,d,u,c,g,p,f,w,m,_,k,b,v,y,x,S,C;const E=t.state;i=t.next_in,S=t.input,n=i+(t.avail_in-5),r=t.next_out,C=t.output,o=r-(e-t.avail_out),a=r+(t.avail_out-257),s=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,u=E.window,c=E.hold,g=E.bits,p=E.lencode,f=E.distcode,w=(1<<E.lenbits)-1,m=(1<<E.distbits)-1;t:do{g<15&&(c+=S[i++]<<g,g+=8,c+=S[i++]<<g,g+=8),_=p[c&w];e:for(;;){if(k=_>>>24,c>>>=k,g-=k,k=_>>>16&255,0===k)C[r++]=65535&_;else{if(!(16&k)){if(0==(64&k)){_=p[(65535&_)+(c&(1<<k)-1)];continue e}if(32&k){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=ww;break t}b=65535&_,k&=15,k&&(g<k&&(c+=S[i++]<<g,g+=8),b+=c&(1<<k)-1,c>>>=k,g-=k),g<15&&(c+=S[i++]<<g,g+=8,c+=S[i++]<<g,g+=8),_=f[c&m];i:for(;;){if(k=_>>>24,c>>>=k,g-=k,k=_>>>16&255,!(16&k)){if(0==(64&k)){_=f[(65535&_)+(c&(1<<k)-1)];continue i}t.msg="invalid distance code",E.mode=ww;break t}if(v=65535&_,k&=15,g<k&&(c+=S[i++]<<g,g+=8,g<k&&(c+=S[i++]<<g,g+=8)),v+=c&(1<<k)-1,v>s){t.msg="invalid distance too far back",E.mode=ww;break t}if(c>>>=k,g-=k,k=r-o,v>k){if(k=v-k,k>h&&E.sane){t.msg="invalid distance too far back",E.mode=ww;break t}if(y=0,x=u,0===d){if(y+=l-k,k<b){b-=k;do{C[r++]=u[y++]}while(--k);y=r-v,x=C}}else if(d<k){if(y+=l+d-k,k-=d,k<b){b-=k;do{C[r++]=u[y++]}while(--k);if(y=0,d<b){k=d,b-=k;do{C[r++]=u[y++]}while(--k);y=r-v,x=C}}}else if(y+=d-k,k<b){b-=k;do{C[r++]=u[y++]}while(--k);y=r-v,x=C}for(;b>2;)C[r++]=x[y++],C[r++]=x[y++],C[r++]=x[y++],b-=3;b&&(C[r++]=x[y++],b>1&&(C[r++]=x[y++]))}else{y=r-v;do{C[r++]=C[y++],C[r++]=C[y++],C[r++]=C[y++],b-=3}while(b>2);b&&(C[r++]=C[y++],b>1&&(C[r++]=C[y++]))}break}}break}}while(i<n&&r<a);b=g>>3,i-=b,g-=b<<3,c&=(1<<g)-1,t.next_in=i,t.next_out=r,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=r<a?a-r+257:257-(r-a),E.hold=c,E.bits=g};const _w=15,kw=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),bw=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vw=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yw=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var xw=(t,e,i,n,r,o,a,s)=>{const l=s.bits;let h,d,u,c,g,p,f=0,w=0,m=0,_=0,k=0,b=0,v=0,y=0,x=0,S=0,C=null;const E=new Uint16Array(16),I=new Uint16Array(16);let A,Y,X,T=null;for(f=0;f<=_w;f++)E[f]=0;for(w=0;w<n;w++)E[e[i+w]]++;for(k=l,_=_w;_>=1&&0===E[_];_--);if(k>_&&(k=_),0===_)return r[o++]=20971520,r[o++]=20971520,s.bits=1,0;for(m=1;m<_&&0===E[m];m++);for(k<m&&(k=m),y=1,f=1;f<=_w;f++)if(y<<=1,y-=E[f],y<0)return-1;if(y>0&&(0===t||1!==_))return-1;for(I[1]=0,f=1;f<_w;f++)I[f+1]=I[f]+E[f];for(w=0;w<n;w++)0!==e[i+w]&&(a[I[e[i+w]]++]=w);if(0===t?(C=T=a,p=20):1===t?(C=kw,T=bw,p=257):(C=vw,T=yw,p=0),S=0,w=0,f=m,g=o,b=k,v=0,u=-1,x=1<<k,c=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){A=f-v,a[w]+1<p?(Y=0,X=a[w]):a[w]>=p?(Y=T[a[w]-p],X=C[a[w]-p]):(Y=96,X=0),h=1<<f-v,d=1<<b,m=d;do{d-=h,r[g+(S>>v)+d]=A<<24|Y<<16|X|0}while(0!==d);for(h=1<<f-1;S&h;)h>>=1;if(0!==h?(S&=h-1,S+=h):S=0,w++,0==--E[f]){if(f===_)break;f=e[i+a[w]]}if(f>k&&(S&c)!==u){for(0===v&&(v=k),g+=m,b=f-v,y=1<<b;b+v<_&&(y-=E[b+v],!(y<=0));)b++,y<<=1;if(x+=1<<b,1===t&&x>852||2===t&&x>592)return 1;u=S&c,r[u]=k<<24|b<<16|g-o|0}}return 0!==S&&(r[g+S]=f-v<<24|64<<16|0),s.bits=k,0};const{Z_FINISH:Sw,Z_BLOCK:Cw,Z_TREES:Ew,Z_OK:Iw,Z_STREAM_END:Aw,Z_NEED_DICT:Yw,Z_STREAM_ERROR:Xw,Z_DATA_ERROR:Tw,Z_MEM_ERROR:Lw,Z_BUF_ERROR:jw,Z_DEFLATED:Rw}=Vp,zw=16180,Pw=16190,Ow=16191,qw=16192,Mw=16194,Dw=16199,Nw=16200,Bw=16206,Fw=16209,Ww=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Hw(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Uw=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<zw||e.mode>16211?1:0},$w=t=>{if(Uw(t))return Xw;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=zw,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Iw},Vw=t=>{if(Uw(t))return Xw;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,$w(t)},Gw=(t,e)=>{let i;if(Uw(t))return Xw;const n=t.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Xw:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,Vw(t))},Zw=(t,e)=>{if(!t)return Xw;const i=new Hw;t.state=i,i.strm=t,i.window=null,i.mode=zw;const n=Gw(t,e);return n!==Iw&&(t.state=null),n};let Kw,Qw,Jw=!0;const tm=t=>{if(Jw){Kw=new Int32Array(512),Qw=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(xw(1,t.lens,0,288,Kw,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;xw(2,t.lens,0,32,Qw,0,t.work,{bits:5}),Jw=!1}t.lencode=Kw,t.lenbits=9,t.distcode=Qw,t.distbits=5},em=(t,e,i,n)=>{let r;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(i-o.wsize,i),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>n&&(r=n),o.window.set(e.subarray(i-n,i-n+r),o.wnext),(n-=r)?(o.window.set(e.subarray(i-n,i),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var im=(t,e)=>{let i,n,r,o,a,s,l,h,d,u,c,g,p,f,w,m,_,k,b,v,y,x,S=0;const C=new Uint8Array(4);let E,I;const A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Uw(t)||!t.output||!t.input&&0!==t.avail_in)return Xw;i=t.state,i.mode===Ow&&(i.mode=qw),a=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,h=i.hold,d=i.bits,u=s,c=l,x=Iw;t:for(;;)switch(i.mode){case zw:if(0===i.wrap){i.mode=qw;break}for(;d<16;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(2&i.wrap&&35615===h){0===i.wbits&&(i.wbits=15),i.check=0,C[0]=255&h,C[1]=h>>>8&255,i.check=Up(i.check,C,2,0),h=0,d=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",i.mode=Fw;break}if((15&h)!==Rw){t.msg="unknown compression method",i.mode=Fw;break}if(h>>>=4,d-=4,y=8+(15&h),0===i.wbits&&(i.wbits=y),y>15||y>i.wbits){t.msg="invalid window size",i.mode=Fw;break}i.dmax=1<<i.wbits,i.flags=0,t.adler=i.check=1,i.mode=512&h?16189:Ow,h=0,d=0;break;case 16181:for(;d<16;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(i.flags=h,(255&i.flags)!==Rw){t.msg="unknown compression method",i.mode=Fw;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=Fw;break}i.head&&(i.head.text=h>>8&1),512&i.flags&&4&i.wrap&&(C[0]=255&h,C[1]=h>>>8&255,i.check=Up(i.check,C,2,0)),h=0,d=0,i.mode=16182;case 16182:for(;d<32;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}i.head&&(i.head.time=h),512&i.flags&&4&i.wrap&&(C[0]=255&h,C[1]=h>>>8&255,C[2]=h>>>16&255,C[3]=h>>>24&255,i.check=Up(i.check,C,4,0)),h=0,d=0,i.mode=16183;case 16183:for(;d<16;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}i.head&&(i.head.xflags=255&h,i.head.os=h>>8),512&i.flags&&4&i.wrap&&(C[0]=255&h,C[1]=h>>>8&255,i.check=Up(i.check,C,2,0)),h=0,d=0,i.mode=16184;case 16184:if(1024&i.flags){for(;d<16;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}i.length=h,i.head&&(i.head.extra_len=h),512&i.flags&&4&i.wrap&&(C[0]=255&h,C[1]=h>>>8&255,i.check=Up(i.check,C,2,0)),h=0,d=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(g=i.length,g>s&&(g=s),g&&(i.head&&(y=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(o,o+g),y)),512&i.flags&&4&i.wrap&&(i.check=Up(i.check,n,g,o)),s-=g,o+=g,i.length-=g),i.length))break t;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===s)break t;g=0;do{y=n[o+g++],i.head&&y&&i.length<65536&&(i.head.name+=String.fromCharCode(y))}while(y&&g<s);if(512&i.flags&&4&i.wrap&&(i.check=Up(i.check,n,g,o)),s-=g,o+=g,y)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===s)break t;g=0;do{y=n[o+g++],i.head&&y&&i.length<65536&&(i.head.comment+=String.fromCharCode(y))}while(y&&g<s);if(512&i.flags&&4&i.wrap&&(i.check=Up(i.check,n,g,o)),s-=g,o+=g,y)break t}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;d<16;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(4&i.wrap&&h!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Fw;break}h=0,d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=Ow;break;case 16189:for(;d<32;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}t.adler=i.check=Ww(h),h=0,d=0,i.mode=Pw;case Pw:if(0===i.havedict)return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,i.hold=h,i.bits=d,Yw;t.adler=i.check=1,i.mode=Ow;case Ow:if(e===Cw||e===Ew)break t;case qw:if(i.last){h>>>=7&d,d-=7&d,i.mode=Bw;break}for(;d<3;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}switch(i.last=1&h,h>>>=1,d-=1,3&h){case 0:i.mode=16193;break;case 1:if(tm(i),i.mode=Dw,e===Ew){h>>>=2,d-=2;break t}break;case 2:i.mode=16196;break;case 3:t.msg="invalid block type",i.mode=Fw}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Fw;break}if(i.length=65535&h,h=0,d=0,i.mode=Mw,e===Ew)break t;case Mw:i.mode=16195;case 16195:if(g=i.length,g){if(g>s&&(g=s),g>l&&(g=l),0===g)break t;r.set(n.subarray(o,o+g),a),s-=g,o+=g,l-=g,a+=g,i.length-=g;break}i.mode=Ow;break;case 16196:for(;d<14;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(i.nlen=257+(31&h),h>>>=5,d-=5,i.ndist=1+(31&h),h>>>=5,d-=5,i.ncode=4+(15&h),h>>>=4,d-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Fw;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;d<3;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}i.lens[A[i.have++]]=7&h,h>>>=3,d-=3}for(;i.have<19;)i.lens[A[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,E={bits:i.lenbits},x=xw(0,i.lens,0,19,i.lencode,0,i.work,E),i.lenbits=E.bits,x){t.msg="invalid code lengths set",i.mode=Fw;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;S=i.lencode[h&(1<<i.lenbits)-1],w=S>>>24,m=S>>>16&255,_=65535&S,!(w<=d);){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(_<16)h>>>=w,d-=w,i.lens[i.have++]=_;else{if(16===_){for(I=w+2;d<I;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(h>>>=w,d-=w,0===i.have){t.msg="invalid bit length repeat",i.mode=Fw;break}y=i.lens[i.have-1],g=3+(3&h),h>>>=2,d-=2}else if(17===_){for(I=w+3;d<I;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}h>>>=w,d-=w,y=0,g=3+(7&h),h>>>=3,d-=3}else{for(I=w+7;d<I;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}h>>>=w,d-=w,y=0,g=11+(127&h),h>>>=7,d-=7}if(i.have+g>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Fw;break}for(;g--;)i.lens[i.have++]=y}}if(i.mode===Fw)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=Fw;break}if(i.lenbits=9,E={bits:i.lenbits},x=xw(1,i.lens,0,i.nlen,i.lencode,0,i.work,E),i.lenbits=E.bits,x){t.msg="invalid literal/lengths set",i.mode=Fw;break}if(i.distbits=6,i.distcode=i.distdyn,E={bits:i.distbits},x=xw(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,E),i.distbits=E.bits,x){t.msg="invalid distances set",i.mode=Fw;break}if(i.mode=Dw,e===Ew)break t;case Dw:i.mode=Nw;case Nw:if(s>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,i.hold=h,i.bits=d,mw(t,c),a=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,n=t.input,s=t.avail_in,h=i.hold,d=i.bits,i.mode===Ow&&(i.back=-1);break}for(i.back=0;S=i.lencode[h&(1<<i.lenbits)-1],w=S>>>24,m=S>>>16&255,_=65535&S,!(w<=d);){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(m&&0==(240&m)){for(k=w,b=m,v=_;S=i.lencode[v+((h&(1<<k+b)-1)>>k)],w=S>>>24,m=S>>>16&255,_=65535&S,!(k+w<=d);){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}h>>>=k,d-=k,i.back+=k}if(h>>>=w,d-=w,i.back+=w,i.length=_,0===m){i.mode=16205;break}if(32&m){i.back=-1,i.mode=Ow;break}if(64&m){t.msg="invalid literal/length code",i.mode=Fw;break}i.extra=15&m,i.mode=16201;case 16201:if(i.extra){for(I=i.extra;d<I;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}i.length+=h&(1<<i.extra)-1,h>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;S=i.distcode[h&(1<<i.distbits)-1],w=S>>>24,m=S>>>16&255,_=65535&S,!(w<=d);){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(0==(240&m)){for(k=w,b=m,v=_;S=i.distcode[v+((h&(1<<k+b)-1)>>k)],w=S>>>24,m=S>>>16&255,_=65535&S,!(k+w<=d);){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}h>>>=k,d-=k,i.back+=k}if(h>>>=w,d-=w,i.back+=w,64&m){t.msg="invalid distance code",i.mode=Fw;break}i.offset=_,i.extra=15&m,i.mode=16203;case 16203:if(i.extra){for(I=i.extra;d<I;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}i.offset+=h&(1<<i.extra)-1,h>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Fw;break}i.mode=16204;case 16204:if(0===l)break t;if(g=c-l,i.offset>g){if(g=i.offset-g,g>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Fw;break}g>i.wnext?(g-=i.wnext,p=i.wsize-g):p=i.wnext-g,g>i.length&&(g=i.length),f=i.window}else f=r,p=a-i.offset,g=i.length;g>l&&(g=l),l-=g,i.length-=g;do{r[a++]=f[p++]}while(--g);0===i.length&&(i.mode=Nw);break;case 16205:if(0===l)break t;r[a++]=i.length,l--,i.mode=Nw;break;case Bw:if(i.wrap){for(;d<32;){if(0===s)break t;s--,h|=n[o++]<<d,d+=8}if(c-=l,t.total_out+=c,i.total+=c,4&i.wrap&&c&&(t.adler=i.check=i.flags?Up(i.check,r,c,a-c):Wp(i.check,r,c,a-c)),c=l,4&i.wrap&&(i.flags?h:Ww(h))!==i.check){t.msg="incorrect data check",i.mode=Fw;break}h=0,d=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;d<32;){if(0===s)break t;s--,h+=n[o++]<<d,d+=8}if(4&i.wrap&&h!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Fw;break}h=0,d=0}i.mode=16208;case 16208:x=Aw;break t;case Fw:x=Tw;break t;case 16210:return Lw;default:return Xw}return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,i.hold=h,i.bits=d,(i.wsize||c!==t.avail_out&&i.mode<Fw&&(i.mode<Bw||e!==Sw))&&em(t,t.output,t.next_out,c-t.avail_out),u-=t.avail_in,c-=t.avail_out,t.total_in+=u,t.total_out+=c,i.total+=c,4&i.wrap&&c&&(t.adler=i.check=i.flags?Up(i.check,r,c,t.next_out-c):Wp(i.check,r,c,t.next_out-c)),t.data_type=i.bits+(i.last?64:0)+(i.mode===Ow?128:0)+(i.mode===Dw||i.mode===Mw?256:0),(0===u&&0===c||e===Sw)&&x===Iw&&(x=jw),x},nm=(t,e)=>{if(Uw(t))return Xw;const i=t.state;return 0==(2&i.wrap)?Xw:(i.head=e,e.done=!1,Iw)},rm={inflateReset:Vw,inflateReset2:Gw,inflateResetKeep:$w,inflateInit:t=>Zw(t,15),inflateInit2:Zw,inflate:im,inflateEnd:t=>{if(Uw(t))return Xw;let e=t.state;return e.window&&(e.window=null),t.state=null,Iw},inflateGetHeader:nm,inflateSetDictionary:(t,e)=>{const i=e.length;let n,r,o;return Uw(t)?Xw:(n=t.state,0!==n.wrap&&n.mode!==Pw?Xw:n.mode===Pw&&(r=1,r=Wp(r,e,i,0),r!==n.check)?Tw:(o=em(t,e,i,i),o?(n.mode=16210,Lw):(n.havedict=1,Iw)))},inflateInfo:"pako inflate (from Nodeca project)"};var om=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const am=Object.prototype.toString,{Z_NO_FLUSH:sm,Z_FINISH:lm,Z_OK:hm,Z_STREAM_END:dm,Z_NEED_DICT:um,Z_STREAM_ERROR:cm,Z_DATA_ERROR:gm,Z_MEM_ERROR:pm}=Vp;function fm(t){this.options=Kf({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rw,this.strm.avail_out=0;let i=rm.inflateInit2(this.strm,e.windowBits);if(i!==hm)throw new Error($p[i]);if(this.header=new om,rm.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ew(e.dictionary):"[object ArrayBuffer]"===am.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=rm.inflateSetDictionary(this.strm,e.dictionary),i!==hm)))throw new Error($p[i])}function wm(t,e){const i=new fm(e);if(i.push(t),i.err)throw i.msg||$p[i.err];return i.result}fm.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=e===~~e?e:!0===e?lm:sm,"[object ArrayBuffer]"===am.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),o=rm.inflate(i,a),o===um&&r&&(o=rm.inflateSetDictionary(i,r),o===hm?o=rm.inflate(i,a):o===gm&&(o=um));i.avail_in>0&&o===dm&&i.state.wrap>0&&0!==t[i.next_in];)rm.inflateReset(i),o=rm.inflate(i,a);switch(o){case cm:case gm:case um:case pm:return this.onEnd(o),this.ended=!0,!1}if(s=i.avail_out,i.next_out&&(0===i.avail_out||o===dm))if("string"===this.options.to){let t=nw(i.output,i.next_out),e=i.next_out-t,r=iw(i.output,t);i.next_out=e,i.avail_out=n-e,e&&i.output.set(i.output.subarray(t,t+e),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(o!==hm||0!==s){if(o===dm)return o=rm.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},fm.prototype.onData=function(t){this.chunks.push(t)},fm.prototype.onEnd=function(t){t===hm&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Qf(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var mm={Inflate:fm,inflate:wm,inflateRaw:function(t,e){return(e=e||{}).raw=!0,wm(t,e)},ungzip:wm,constants:Vp};const{Inflate:_m,inflate:km,inflateRaw:bm,ungzip:vm}=mm;var ym=km;class xm{constructor(e){t(this,"app",void 0),t(this,"overlays",void 0),t(this,"info",void 0),t(this,"map",void 0),t(this,"camera",void 0),t(this,"renderer",void 0),t(this,"input",void 0),t(this,"socket",void 0),t(this,"pointer",void 0),t(this,"audio",void 0),t(this,"entities",void 0),t(this,"bubble",void 0),t(this,"menu",void 0),t(this,"sprites",void 0),t(this,"messages",void 0),t(this,"lastEntityListRequest",Date.now()),this.game=e,this.app=e.app,this.overlays=e.overlays,this.info=e.info,this.map=e.map,this.camera=e.camera,this.renderer=e.renderer,this.input=e.input,this.socket=e.socket,this.pointer=e.pointer,this.audio=e.audio,this.entities=e.entities,this.bubble=e.bubble,this.menu=e.menu,this.sprites=e.sprites,this.messages=this.socket.messages,this.app.onFocus((()=>this.socket.send(V.Focus))),this.messages.onHandshake(this.handleHandshake.bind(this)),this.messages.onWelcome(this.handleWelcome.bind(this)),this.messages.onMap(this.handleMap.bind(this)),this.messages.onEquipment(this.handleEquipment.bind(this)),this.messages.onSpawn(this.entities.create.bind(this.entities)),this.messages.onEntityList(this.handleEntityList.bind(this)),this.messages.onSync(this.handleSync.bind(this)),this.messages.onMovement(this.handleMovement.bind(this)),this.messages.onTeleport(this.handleTeleport.bind(this)),this.messages.onDespawn(this.handleDespawn.bind(this)),this.messages.onCombat(this.handleCombat.bind(this)),this.messages.onAnimation(this.handleAnimation.bind(this)),this.messages.onPoints(this.handlePoints.bind(this)),this.messages.onNetwork(this.handleNetwork.bind(this)),this.messages.onChat(this.handleChat.bind(this)),this.messages.onCommand(this.handleCommand.bind(this)),this.messages.onContainer(this.handleContainer.bind(this)),this.messages.onAbility(this.handleAbility.bind(this)),this.messages.onQuest(this.handleQuest.bind(this)),this.messages.onAchievement(this.handleAchievement.bind(this)),this.messages.onNotification(this.handleNotification.bind(this)),this.messages.onBlink(this.handleBlink.bind(this)),this.messages.onHeal(this.handleHeal.bind(this)),this.messages.onExperience(this.handleExperience.bind(this)),this.messages.onDeath(this.handleDeath.bind(this)),this.messages.onMusic(this.handleMusic.bind(this)),this.messages.onNPC(this.handleNPC.bind(this)),this.messages.onRespawn(this.handleRespawn.bind(this)),this.messages.onEnchant(this.handleEnchant.bind(this)),this.messages.onGuild(this.handleGuild.bind(this)),this.messages.onPointer(this.handlePointer.bind(this)),this.messages.onPVP(this.handlePVP.bind(this)),this.messages.onPoison(this.handlePoison.bind(this)),this.messages.onStore(this.handleStore.bind(this)),this.messages.onOverlay(this.handleOverlay.bind(this)),this.messages.onCamera(this.handleCamera.bind(this)),this.messages.onBubble(this.handleBubble.bind(this)),this.messages.onSkill(this.handleSkill.bind(this)),this.messages.onUpdate(this.handleUpdate.bind(this)),this.messages.onMinigame(this.handleMinigame.bind(this)),this.messages.onEffect(this.handleEffect.bind(this)),this.messages.onFriends(this.handleFriends.bind(this))}handleHandshake(){if(this.app.updateLoader("Connecting to server"),this.app.isGuest())return this.socket.send(V.Login,{opcode:l.Guest});let t=this.app.getUsername(),e=this.app.getPassword(),i=this.app.getEmail();if(this.app.isRegistering())return this.socket.send(V.Login,{opcode:l.Register,username:t,password:e,email:i});this.socket.send(V.Login,{opcode:l.Login,username:t,password:e})}handleWelcome(t){this.game.player.load(t),this.game.start(),this.game.postLoad()}handleMap(t){let e=window.atob(t).split("").map((t=>t.charCodeAt(0))),i=ym(new Uint8Array(e),{to:"string"}),n=JSON.parse(i);this.map.loadRegions(n),this.renderer.forceRendering=!0,this.renderer.updateAnimatedTiles(),this.map.hasCachedDate()||this.app.fadeMenu()}handleEquipment(t,e){switch(t){case d.Batch:ve.each(e.data.equipments,(t=>this.game.player.equip(t)));break;case d.Equip:this.game.player.equip(e.data);break;case d.Unequip:this.game.player.unequip(e.type)}this.game.player.sync()}handleEntityList(t,e){switch(t){case h.Spawns:{let t=ve.map(this.entities.getAll(),"instance"),i=ve.intersection(t,e.entities),n=ve.difference(e.entities,i);this.entities.decrepit=ve.reject(this.entities.getAll(),(t=>ve.includes(i,t.instance)||t.instance===this.game.player.instance)),this.entities.clean(),this.socket.send(V.Who,n);break}case h.Positions:ve.each(e.positions,((t,e)=>{let i=this.entities.get(e);!i||i.moving||i.hasPath()||i.gridX===t.x&&i.gridY===t.y||this.game.teleport(i,t.x,t.y)}))}}handleSync(t){let e=this.entities.get(t.instance);e&&!e.teleporting&&!e.dead&&e.ready&&(e.load(t,!0),e.setSprite(this.game.sprites.get(e.getSpriteName())))}handleMovement(t,e){let i,n=this.entities.get(e.instance);if(!n){if(!this.canRequestEntityList())return;return this.lastEntityListRequest=Date.now(),this.socket.send(V.List)}switch(t){case u.Move:e.forced&&n.stop(!0),n.go(e.x,e.y,!1,e.instance!==this.game.player.instance);break;case u.Follow:if(i=this.entities.get(e.target),i){if(n.instance===this.game.player.instance&&!this.game.player.hasTarget()&&!e.forced)return;n.follow(i)}break;case u.Stop:e.forced&&n.stop(!0)}}handleTeleport(t){let e=this.entities.get(t.instance);if(!e)return;this.input.selectedCellVisible=!1;let i=e.instance===this.game.player.instance;if(e.stop(!0),e.frozen=!0,e.disableAction=!0,i?this.bubble.clean():this.bubble.clear(e.instance),!t.withAnimation)return this.game.teleport(e,t.x,t.y);let n=e.sprite;e.teleporting=!0,e.setSprite(this.sprites.getDeath()),e.animateDeath((()=>{this.game.teleport(e,t.x,t.y),e.animation=null,e.setSprite(n),e.idle()}),160)}handleDespawn(t){let e=this.entities.get(t.instance);if(e&&(!t.regions||t.regions.includes(e.region))){if(e.isItem())return this.entities.removeItem(e);if(e.isChest())return this.entities.removeChest(e);if(e.isNPC())return this.entities.removeNPC(e);e.despawn(),this.bubble.clear(e.instance),this.game.player.hasTarget(e)&&this.game.player.removeTarget(),this.audio.playKillSound(e),e.sprite.hasDeathAnimation||e.setSprite(this.sprites.getDeath()),e.animateDeath((()=>this.entities.removeEntity(e)))}}handleCombat(t,e){let i=this.entities.get(e.instance),n=this.entities.get(e.target);if(!i||!n)return;if(t!==g.Hit)return;let r=n.instance===this.game.player.instance,o=i.instance===this.game.player.instance;e.hit.terror&&n.setEffect(B.Terror),e.hit.poison&&n.setEffect(B.Poisonball),e.hit.type===q.Critical&&n.setEffect(B.Critical),e.hit.aoe||e.hit.poison||(i.lookAt(n),i.performAction(i.orientation,P.Attack)),o&&e.hit.damage>0&&this.audio.playHitSound(n),r&&e.hit.damage>0&&this.audio.playSound("hurt"),this.info.create(e.hit.type,e.hit.damage,n.x,n.y,r),n.hurtSprite&&n.toggleHurt(),i.triggerHealthBar(),n.triggerHealthBar()}handleAnimation(t){let e=this.entities.get(t.instance);e&&e.performAction(e.orientation,t.action)}handlePoints(t){let e=this.entities.get(t.instance);e&&!e.dead&&(t.mana&&e.setMana(t.mana,t.maxMana),t.hitPoints&&(e.setHitPoints(t.hitPoints,t.maxHitPoints),this.input.hud.updateCallback?.(t.instance,t.hitPoints)))}handleNetwork(){this.socket.send(V.Network,[p.Pong])}handleChat(t){if(t.source)return this.input.chatHandler.add(t.source,t.message,t.colour,!0);let e=this.entities.get(t.instance);if(!e)return;let{name:i,x:n,y:r}=e;e.isModerator()&&(i=`[Moderator] ${i}`),e.isAdmin()&&(i=`[Admin] ${i}`),this.input.chatHandler.add(i,t.message,t.colour),t.withBubble&&(this.bubble.create(t.instance,t.message),this.bubble.setTo(t.instance,n,r),this.audio.playSound("npctalk",e))}handleCommand(t){if(t.command.includes("toggle")&&this.game.player.hasEffect())return this.game.player.removeEffect();switch(t.command){case"debug":return void(this.renderer.debugging=!this.renderer.debugging);case"toggleheal":this.game.player.setEffect(B.Healing);break;case"toggleterror":this.game.player.setEffect(B.Terror);break;case"togglefireball":this.game.player.setEffect(B.Fireball);break;case"toggleiceball":this.game.player.setEffect(B.Iceball);break;case"togglefire":this.game.player.setEffect(B.Burning);break;case"togglefreeze":this.game.player.setEffect(B.Freezing);break;case"togglestun":this.game.player.setEffect(B.Stun);break;case"togglepoison":this.game.player.setEffect(B.Poisonball);break;case"toggleboulder":this.game.player.setEffect(B.Boulder)}}handleContainer(t,e){let i=e.type===L.Inventory?this.menu.getInventory():this.menu.getBank();switch(t){case f.Batch:return i.batch(e.data.slots);case f.Add:i.add(e.slot);break;case f.Remove:i.remove(e.slot)}this.menu.synchronize()}handleAbility(t,e){switch(t){case w.Batch:this.game.player.loadAbilities(e.abilities);break;case w.Add:case w.Update:this.game.player.setAbility(e.key,e.level,e.type,e.quickSlot)}this.menu.synchronize("profile")}handleQuest(t,e){switch(t){case m.Batch:this.game.player.loadQuests(e.quests);break;case m.Progress:this.game.player.setQuest(e.key,e.stage,e.subStage)}this.menu.getQuests().handle(t,e.key)}handleAchievement(t,e){switch(t){case _.Batch:this.game.player.loadAchievements(e.achievements);break;case _.Progress:this.game.player.setAchievement(e.key,e.stage,e.name,e.description)}this.menu.getAchievements().handle(t,e.key)}handleNotification(t,e){switch(t){case k.Text:return this.input.chatHandler.add("WORLD",e.message,e.colour,!0);case k.Popup:return this.menu.getNotification().show(e.title,e.message,e.colour)}}handleBlink(t){this.entities.get(t)?.blink()}handleHeal(t){let e=this.entities.get(t.instance);if(e){switch(t.type){case"hitpoints":this.info.create(q.Heal,t.amount,e.x,e.y),e.setEffect(B.Healing);break;case"mana":this.info.create(q.Mana,t.amount,e.x,e.y)}e.triggerHealthBar()}}handleExperience(t,e){let i=this.entities.get(e.instance);if(!i)return;let n=i.instance===this.game.player.instance;switch(t){case b.Sync:i.level=e.level;break;case b.Skill:n&&this.info.create(q.Profession,e.amount,i.x,i.y,!1,e.skill,!0)}}handleDeath(){this.game.minigame.reset(),this.game.player.teleporting=!0,this.game.player.setSprite(this.sprites.getDeath()),this.game.player.setHitPoints(0),this.game.player.setMana(0),this.audio.stopMusic(),this.game.player.animateDeath((()=>{this.game.entities.unregisterPosition(this.game.player),this.game.player.despawn(),this.app.body.classList.add("death")}))}handleMusic(t){this.audio.playMusic(t)}handleNPC(t,e){let i,n;switch(t){case v.Talk:if(i=this.entities.get(e.instance),!i)return;if(n=e.text?"npc":"npc-end",this.audio.playSound(n,i),this.game.player.disableAction=!0,!e.text)return this.bubble.clear(i.instance);this.bubble.create(i.instance,e.text),this.bubble.setTo(i.instance,i.x,i.y);break;case v.Bank:return this.menu.getBank().show(e.slots);case v.Enchant:}}handleRespawn(t){this.game.player.setGridPosition(t.x,t.y),this.camera.centreOn(this.game.player),this.game.player.animation=null,this.game.player.setSprite(this.game.sprites.get(this.game.player.getSpriteName())),this.game.player.idle(),this.entities.addEntity(this.game.player),this.game.player.dead=!1,this.game.player.teleporting=!1}handleEnchant(t,e){switch(t){case y.Select:case y.Remove:}}handleGuild(t){r.debug(`Guild Opcode: ${t}`)}handlePointer(t,e){let i;switch(t){case x.Entity:if(i=this.entities.get(e.instance),!i)return;this.pointer.create(i.instance,t),this.pointer.setToEntity(i);break;case x.Location:this.pointer.create(e.instance,t),this.pointer.setToPosition(e.instance,e.x*this.map.tileSize,e.y*this.map.tileSize);break;case x.Relative:this.pointer.create(e.instance,t),this.pointer.setRelative(e.instance,e.x,e.y);break;case x.Remove:this.pointer.clean();break;case x.Button:this.pointer.create(e.instance,t,e.button)}}handlePVP(t){this.game.pvp=t.state}handlePoison(t){this.game.player.setPoison(-1!==t)}handleStore(t,e){switch(t){case S.Open:return this.menu.getStore().show(e);case S.Update:return this.menu.getStore().update(e);case S.Select:return this.menu.getStore().move(e)}}handleOverlay(t,e){switch(t){case E.Set:this.overlays.update(e.image),this.renderer.updateDarkMask(e.colour);break;case E.Remove:this.renderer.removeAllLights(),this.overlays.update();break;case E.Lamp:return this.renderer.addLight(e.light)}}handleCamera(t){}handleBubble(t,e){if(!e.text)return this.bubble.clear(e.instance);let i=this.entities.get(e.instance);if(t===Y.Entity&&!i)return;let n=i?void 0:{x:e.x*this.map.tileSize,y:e.y*this.map.tileSize};this.bubble.create(e.instance,e.text,e.duration,n),this.bubble.setTo(e.instance,n?n.x:i.x,n?n.y:i.y)}handleSkill(t,e){switch(t){case A.Batch:this.game.player.loadSkills(e.skills);break;case A.Update:this.game.player.setSkill(e)}this.game.menu.synchronize("profile")}handleUpdate(t){this.entities.cleanDisplayInfo(),ve.each(t,(t=>{let e=this.entities.get(t.instance);e&&(t.colour&&(e.nameColour=t.colour),t.scale&&(e.customScale=t.scale))}))}handleMinigame(t,e){let{minigame:i,player:n}=this.game;switch(i.type=t,i.started=!!e.started,e.countdown&&(i.countdown=e.countdown),e.action){case C.Score:return isNaN(e.redTeamKills)||isNaN(e.blueTeamKills)||i.setScore(e.redTeamKills,e.blueTeamKills),i.setStatus("ingame");case C.End:case C.Lobby:return n.nameColour="",i.setStatus("lobby");case C.Exit:return i.reset()}}handleEffect(t,e){let i=e.instance===this.game.player.instance?this.game.player:this.entities.get(e.instance);if(i)switch(t){case X.Speed:i.movementSpeed=e.movementSpeed;break;case X.Stun:i.stunned=!!e.state;break;case X.Freeze:i.setEffect(B.Freezing);break;case X.Burn:i.setEffect(B.Burning)}}handleFriends(t,e){switch(t){case T.List:this.game.player.loadFriends(e.list);break;case T.Add:this.game.player.addFriend(e.username,e.status);break;case T.Status:this.game.player.setFriendStatus(e.username,e.status)}this.menu.getFriends().handle(t,e.username,e.status)}canRequestEntityList(){return Date.now()-this.lastEntityListRequest>5e3}}const Sm=Object.create(null);Sm.open="0",Sm.close="1",Sm.ping="2",Sm.pong="3",Sm.message="4",Sm.upgrade="5",Sm.noop="6";const Cm=Object.create(null);Object.keys(Sm).forEach((t=>{Cm[Sm[t]]=t}));const Em={type:"error",data:"parser error"},Im="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Am="function"==typeof ArrayBuffer,Ym=({type:t,data:e},i,n)=>{return Im&&e instanceof Blob?i?n(e):Xm(e,n):Am&&(e instanceof ArrayBuffer||(r=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?i?n(e):Xm(new Blob([e]),n):n(Sm[t]+(e||""));var r},Xm=(t,e)=>{const i=new FileReader;return i.onload=function(){const t=i.result.split(",")[1];e("b"+t)},i.readAsDataURL(t)};for(var Tm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lm="undefined"==typeof Uint8Array?[]:new Uint8Array(256),jm=0;jm<Tm.length;jm++)Lm[Tm.charCodeAt(jm)]=jm;const Rm="function"==typeof ArrayBuffer,zm=(t,e)=>{if("string"!=typeof t)return{type:"message",data:Om(t,e)};const i=t.charAt(0);if("b"===i)return{type:"message",data:Pm(t.substring(1),e)};return Cm[i]?t.length>1?{type:Cm[i],data:t.substring(1)}:{type:Cm[i]}:Em},Pm=(t,e)=>{if(Rm){const i=function(t){var e,i,n,r,o,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),d=new Uint8Array(h);for(e=0;e<s;e+=4)i=Lm[t.charCodeAt(e)],n=Lm[t.charCodeAt(e+1)],r=Lm[t.charCodeAt(e+2)],o=Lm[t.charCodeAt(e+3)],d[l++]=i<<2|n>>4,d[l++]=(15&n)<<4|r>>2,d[l++]=(3&r)<<6|63&o;return h}(t);return Om(i,e)}return{base64:!0,data:t}},Om=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t,qm=String.fromCharCode(30);function Mm(t){if(t)return function(t){for(var e in Mm.prototype)t[e]=Mm.prototype[e];return t}(t)}Mm.prototype.on=Mm.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Mm.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},Mm.prototype.off=Mm.prototype.removeListener=Mm.prototype.removeAllListeners=Mm.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<n.length;r++)if((i=n[r])===e||i.fn===e){n.splice(r,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},Mm.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var r=(i=i.slice(0)).length;n<r;++n)i[n].apply(this,e)}return this},Mm.prototype.emitReserved=Mm.prototype.emit,Mm.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Mm.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Dm="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Nm(t,...e){return e.reduce(((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e)),{})}const Bm=setTimeout,Fm=clearTimeout;function Wm(t,e){e.useNativeTimers?(t.setTimeoutFn=Bm.bind(Dm),t.clearTimeoutFn=Fm.bind(Dm)):(t.setTimeoutFn=setTimeout.bind(Dm),t.clearTimeoutFn=clearTimeout.bind(Dm))}class Hm extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class Um extends Mm{constructor(t){super(),this.writable=!1,Wm(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new Hm(t,e,i)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=zm(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const $m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Vm={};let Gm,Zm=0,Km=0;function Qm(t){let e="";do{e=$m[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function Jm(){const t=Qm(+new Date);return t!==Gm?(Zm=0,Gm=t):t+"."+Qm(Zm++)}for(;Km<64;Km++)Vm[$m[Km]]=Km;function t_(t){let e="";for(let i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}let e_=!1;try{e_="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Sf){}const i_=e_;function n_(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||i_))return new XMLHttpRequest}catch(F_){}if(!e)try{return new(Dm[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(F_){}}function r_(){}const o_=null!=new n_({xdomain:!1}).responseType;class a_ extends Mm{constructor(t,e){super(),Wm(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=Nm(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new n_(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(F_){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(F_){}try{e.setRequestHeader("Accept","*/*")}catch(F_){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},e.send(this.data)}catch(F_){return void this.setTimeoutFn((()=>{this.onError(F_)}),0)}"undefined"!=typeof document&&(this.index=a_.requestsCount++,a_.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=r_,t)try{this.xhr.abort()}catch(F_){}"undefined"!=typeof document&&delete a_.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(a_.requestsCount=0,a_.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",s_);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Dm?"pagehide":"unload",s_,!1)}function s_(){for(let t in a_.requests)a_.requests.hasOwnProperty(t)&&a_.requests[t].abort()}const l_="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),h_=Dm.WebSocket||Dm.MozWebSocket,d_="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const u_={websocket:class extends Um{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,i=d_?{}:Nm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=d_?new h_(t,e,i):e?new h_(t,e):new h_(t)}catch(Sf){return this.emitReserved("error",Sf)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const i=t[e],n=e===t.length-1;Ym(i,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(F_){}n&&l_((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let i="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Jm()),this.supportsBinary||(t.b64=1);const n=t_(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}check(){return!!h_}},polling:class extends Um{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let i=location.port;i||(i=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=o_&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{const i=t.split(qm),n=[];for(let r=0;r<i.length;r++){const t=zm(i[r],e);if(n.push(t),"error"===t.type)break}return n})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const i=t.length,n=new Array(i);let r=0;t.forEach(((t,o)=>{Ym(t,!1,(t=>{n[o]=t,++r===i&&e(n.join(qm))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let i="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Jm()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(i=":"+this.opts.port);const n=t_(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new a_(this.uri(),t)}doWrite(t,e){const i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},c_=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,g_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function p_(t){const e=t,i=t.indexOf("["),n=t.indexOf("]");-1!=i&&-1!=n&&(t=t.substring(0,i)+t.substring(i,n).replace(/:/g,";")+t.substring(n,t.length));let r=c_.exec(t||""),o={},a=14;for(;a--;)o[g_[a]]=r[a]||"";return-1!=i&&-1!=n&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(t,e){const i=/\/{2,9}/g,n=e.replace(i,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||n.splice(0,1);"/"==e.substr(e.length-1,1)&&n.splice(n.length-1,1);return n}(0,o.path),o.queryKey=function(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(i[e]=n)})),i}(0,o.query),o}let f_=class extends Mm{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=p_(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=p_(e.host).host),Wm(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},i=t.split("&");for(let n=0,r=i.length;n<r;n++){let t=i[n].split("=");e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new u_[t](i)}open(){let t;if(this.opts.rememberUpgrade&&f_.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(F_){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(t){let e=this.createTransport(t),i=!1;f_.priorWebsocketSuccess=!1;const n=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",(t=>{if(!i)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;f_.priorWebsocketSuccess="websocket"===e.name,this.transport.pause((()=>{i||"closed"!==this.readyState&&(h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}})))};function r(){i||(i=!0,h(),e.close(),e=null)}const o=t=>{const i=new Error("probe error: "+t);i.transport=e.name,r(),this.emitReserved("upgradeError",i)};function a(){o("transport closed")}function s(){o("socket closed")}function l(t){e&&t.name!==e.name&&r()}const h=()=>{e.removeListener("open",n),e.removeListener("error",o),e.removeListener("close",a),this.off("close",s),this.off("upgrading",l)};e.once("open",n),e.once("error",o),e.once("close",a),this.once("close",s),this.once("upgrading",l),e.open()}onOpen(){if(this.readyState="open",f_.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(t+="string"==typeof(e=n)?function(t){let e=0,i=0;for(let n=0,r=t.length;n<r;n++)e=t.charCodeAt(n),e<128?i+=1:e<2048?i+=2:e<55296||e>=57344?i+=3:(n++,i+=4);return i}(e):Math.ceil(1.33*(e.byteLength||e.size))),i>0&&t>this.maxPayload)return this.writeBuffer.slice(0,i);t+=2}var e;return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof i&&(n=i,i=null),"closing"===this.readyState||"closed"===this.readyState)return;(i=i||{}).compress=!1!==i.compress;const r={type:t,data:e,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?i():t()})):this.upgrading?i():t()),this}onError(t){f_.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let i=0;const n=t.length;for(;i<n;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};f_.protocol=4;const w_="function"==typeof ArrayBuffer,m_=Object.prototype.toString,__="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===m_.call(Blob),k_="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===m_.call(File);function b_(t){return w_&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||__&&t instanceof Blob||k_&&t instanceof File}function v_(t,e){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++)if(v_(t[e]))return!0;return!1}if(b_(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return v_(t.toJSON(),!0);for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&v_(t[i]))return!0;return!1}function y_(t){const e=[],i=t.data,n=t;return n.data=x_(i,e),n.attachments=e.length,{packet:n,buffers:e}}function x_(t,e){if(!t)return t;if(b_(t)){const i={_placeholder:!0,num:e.length};return e.push(t),i}if(Array.isArray(t)){const i=new Array(t.length);for(let n=0;n<t.length;n++)i[n]=x_(t[n],e);return i}if("object"==typeof t&&!(t instanceof Date)){const i={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=x_(t[n],e));return i}return t}function S_(t,e){return t.data=C_(t.data,e),t.attachments=void 0,t}function C_(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=C_(t[i],e);else if("object"==typeof t)for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=C_(t[i],e));return t}var E_;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(E_||(E_={}));class I_ extends Mm{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t),e.type===E_.BINARY_EVENT||e.type===E_.BINARY_ACK?(this.reconstructor=new A_(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!b_(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const i={type:Number(t.charAt(0))};if(void 0===E_[i.type])throw new Error("unknown packet type "+i.type);if(i.type===E_.BINARY_EVENT||i.type===E_.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const r=t.substring(n,e);if(r!=Number(r)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(r)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}i.nsp=t.substring(n,e)}else i.nsp="/";const n=t.charAt(e+1);if(""!==n&&Number(n)==n){const n=e+1;for(;++e;){const i=t.charAt(e);if(null==i||Number(i)!=i){--e;break}if(e===t.length)break}i.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=this.tryParse(t.substr(e));if(!I_.isPayloadValid(i.type,n))throw new Error("invalid payload");i.data=n}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(F_){return!1}}static isPayloadValid(t,e){switch(t){case E_.CONNECT:return"object"==typeof e;case E_.DISCONNECT:return void 0===e;case E_.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case E_.EVENT:case E_.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case E_.ACK:case E_.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class A_{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=S_(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Y_=Object.freeze(Object.defineProperty({__proto__:null,protocol:5,get PacketType(){return E_},Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==E_.EVENT&&t.type!==E_.ACK||!v_(t)?[this.encodeAsString(t)]:(t.type=t.type===E_.EVENT?E_.BINARY_EVENT:E_.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==E_.BINARY_EVENT&&t.type!==E_.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=y_(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}},Decoder:I_},Symbol.toStringTag,{value:"Module"}));function X_(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const T_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let L_=class extends Mm{constructor(t,e,i){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[X_(t,"open",this.onopen.bind(this)),X_(t,"packet",this.onpacket.bind(this)),X_(t,"error",this.onerror.bind(this)),X_(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(T_.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const i={type:E_.EVENT,data:e,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,n=e.pop();this._registerAckCallback(t,n),i.id=t}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){const i=this.flags.timeout;if(void 0===i)return void(this.acks[t]=e);const n=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),i);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this.packet({type:E_.CONNECT,data:t})})):this.packet({type:E_.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case E_.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case E_.EVENT:case E_.BINARY_EVENT:this.onevent(t);break;case E_.ACK:case E_.BINARY_ACK:this.onack(t);break;case E_.DISCONNECT:this.ondisconnect();break;case E_.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let i=!1;return function(...n){i||(i=!0,e.packet({type:E_.ACK,id:t,data:n}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:E_.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const i of e)i.apply(this,t.data)}}};function j_(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}j_.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},j_.prototype.reset=function(){this.attempts=0},j_.prototype.setMin=function(t){this.ms=t},j_.prototype.setMax=function(t){this.max=t},j_.prototype.setJitter=function(t){this.jitter=t};class R_ extends Mm{constructor(t,e){var i;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,Wm(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=e.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new j_({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||Y_;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new f_(this.uri,this.opts);const e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=X_(e,"open",(function(){i.onopen(),t&&t()})),r=X_(e,"error",(e=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",e),t?t(e):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;0===t&&n();const i=this.setTimeoutFn((()=>{n(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}return this.subs.push(n),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(X_(t,"ping",this.onping.bind(this)),X_(t,"data",this.ondata.bind(this)),X_(t,"error",this.onerror.bind(this)),X_(t,"close",this.onclose.bind(this)),X_(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new L_(this,t,e),this.nsps[t]=i),i}_destroy(t){const e=Object.keys(this.nsps);for(const i of e){if(this.nsps[i].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()})))}),e);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const z_={};function P_(t,e){"object"==typeof t&&(e=t,t=void 0);const i=function(t,e="",i){let n=t;i=i||"undefined"!=typeof location&&location,null==t&&(t=i.protocol+"//"+i.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==i?i.protocol+"//"+t:"https://"+t),n=p_(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(i&&i.port===n.port?"":":"+n.port),n}(t,(e=e||{}).path||"/socket.io"),n=i.source,r=i.id,o=i.path,a=z_[r]&&o in z_[r].nsps;let s;return e.forceNew||e["force new connection"]||!1===e.multiplex||a?s=new R_(n,e):(z_[r]||(z_[r]=new R_(n,e)),s=z_[r]),i.query&&!e.query&&(e.query=i.queryKey),s.socket(i.path,e)}Object.assign(P_,{Manager:R_,Socket:L_,io:P_,connect:P_});class O_{constructor(e){t(this,"messages",[]),t(this,"handshakeCallback",void 0),t(this,"welcomeCallback",void 0),t(this,"mapCallback",void 0),t(this,"spawnCallback",void 0),t(this,"equipmentCallback",void 0),t(this,"entityListCallback",void 0),t(this,"syncCallback",void 0),t(this,"movementCallback",void 0),t(this,"teleportCallback",void 0),t(this,"despawnCallback",void 0),t(this,"combatCallback",void 0),t(this,"animationCallback",void 0),t(this,"pointsCallback",void 0),t(this,"networkCallback",void 0),t(this,"chatCallback",void 0),t(this,"commandCallback",void 0),t(this,"containerCallback",void 0),t(this,"abilityCallback",void 0),t(this,"questCallback",void 0),t(this,"achievementCallback",void 0),t(this,"notificationCallback",void 0),t(this,"blinkCallback",void 0),t(this,"healCallback",void 0),t(this,"experienceCallback",void 0),t(this,"deathCallback",void 0),t(this,"musicCallback",void 0),t(this,"npcCallback",void 0),t(this,"respawnCallback",void 0),t(this,"enchantCallback",void 0),t(this,"guildCallback",void 0),t(this,"pointerCallback",void 0),t(this,"pvpCallback",void 0),t(this,"poisonCallback",void 0),t(this,"storeCallback",void 0),t(this,"overlayCallback",void 0),t(this,"cameraCallback",void 0),t(this,"bubbleCallback",void 0),t(this,"skillCallback",void 0),t(this,"updateCallback",void 0),t(this,"minigameCallback",void 0),t(this,"effectCallback",void 0),t(this,"friendsCallback",void 0),this.app=e,this.messages[V.Handshake]=()=>this.handshakeCallback,this.messages[V.Welcome]=()=>this.welcomeCallback,this.messages[V.Spawn]=()=>this.spawnCallback,this.messages[V.Equipment]=()=>this.equipmentCallback,this.messages[V.List]=()=>this.entityListCallback,this.messages[V.Sync]=()=>this.syncCallback,this.messages[V.Movement]=()=>this.movementCallback,this.messages[V.Teleport]=()=>this.teleportCallback,this.messages[V.Despawn]=()=>this.despawnCallback,this.messages[V.Combat]=()=>this.combatCallback,this.messages[V.Animation]=()=>this.animationCallback,this.messages[V.Points]=()=>this.pointsCallback,this.messages[V.Network]=()=>this.networkCallback,this.messages[V.Chat]=()=>this.chatCallback,this.messages[V.Command]=()=>this.commandCallback,this.messages[V.Container]=()=>this.containerCallback,this.messages[V.Ability]=()=>this.abilityCallback,this.messages[V.Quest]=()=>this.questCallback,this.messages[V.Achievement]=()=>this.achievementCallback,this.messages[V.Notification]=()=>this.notificationCallback,this.messages[V.Blink]=()=>this.blinkCallback,this.messages[V.Heal]=()=>this.healCallback,this.messages[V.Experience]=()=>this.experienceCallback,this.messages[V.Death]=()=>this.deathCallback,this.messages[V.Music]=()=>this.musicCallback,this.messages[V.NPC]=()=>this.npcCallback,this.messages[V.Respawn]=()=>this.respawnCallback,this.messages[V.Enchant]=()=>this.enchantCallback,this.messages[V.Guild]=()=>this.guildCallback,this.messages[V.Pointer]=()=>this.pointerCallback,this.messages[V.PVP]=()=>this.pvpCallback,this.messages[V.Poison]=()=>this.poisonCallback,this.messages[V.Store]=()=>this.storeCallback,this.messages[V.Map]=()=>this.mapCallback,this.messages[V.Overlay]=()=>this.overlayCallback,this.messages[V.Camera]=()=>this.cameraCallback,this.messages[V.Bubble]=()=>this.bubbleCallback,this.messages[V.Skill]=()=>this.skillCallback,this.messages[V.Update]=()=>this.updateCallback,this.messages[V.Minigame]=()=>this.minigameCallback,this.messages[V.Effect]=()=>this.effectCallback,this.messages[V.Friends]=()=>this.friendsCallback}handleData(t){let e=t.shift(),i=this.messages[e]();i&&ve.isFunction(i)&&i.call(this,...t)}handleBulkData(t){ve.each(t,this.handleData.bind(this))}handleUTF8(t){switch(this.app.toggleLogin(!1),t){case"full":this.app.sendError("The servers are currently full!");break;case"error":this.app.sendError("The server has responded with an error!");break;case"development":this.app.sendError("The game is currently in development mode.");break;case"disallowed":this.app.sendError("The server is currently not accepting connections!");break;case"maintenance":this.app.sendError("Kaetram is currently under maintenance.");break;case"userexists":this.app.sendError("The username you have entered already exists.");break;case"emailexists":this.app.sendError("The email you have entered is not available.");break;case"invalidinput":this.app.sendError("The input you have provided is invalid.");break;case"loggedin":this.app.sendError("The player is already logged in!");break;case"invalidlogin":this.app.sendError("You have entered the wrong username or password.");break;case"toofast":this.app.sendError("You are trying to log in too fast from the same connection.");break;case"timeout":this.app.sendError("You have been disconnected for being inactive for too long.");break;case"updated":this.app.sendError("The game has been updated. Please clear your browser cache.");break;case"cheating":this.app.sendError("You have been disconnected for no-clipping or hacking.");break;default:this.app.sendError("An unknown error has occurred, please submit a bug report.")}}onHandshake(t){this.handshakeCallback=t}onWelcome(t){this.welcomeCallback=t}onSpawn(t){this.spawnCallback=t}onEquipment(t){this.equipmentCallback=t}onEntityList(t){this.entityListCallback=t}onSync(t){this.syncCallback=t}onMovement(t){this.movementCallback=t}onTeleport(t){this.teleportCallback=t}onDespawn(t){this.despawnCallback=t}onCombat(t){this.combatCallback=t}onAnimation(t){this.animationCallback=t}onPoints(t){this.pointsCallback=t}onNetwork(t){this.networkCallback=t}onChat(t){this.chatCallback=t}onCommand(t){this.commandCallback=t}onContainer(t){this.containerCallback=t}onAbility(t){this.abilityCallback=t}onQuest(t){this.questCallback=t}onAchievement(t){this.achievementCallback=t}onNotification(t){this.notificationCallback=t}onBlink(t){this.blinkCallback=t}onHeal(t){this.healCallback=t}onExperience(t){this.experienceCallback=t}onDeath(t){this.deathCallback=t}onMusic(t){this.musicCallback=t}onNPC(t){this.npcCallback=t}onRespawn(t){this.respawnCallback=t}onEnchant(t){this.enchantCallback=t}onGuild(t){this.guildCallback=t}onPointer(t){this.pointerCallback=t}onPVP(t){this.pvpCallback=t}onPoison(t){this.poisonCallback=t}onStore(t){this.storeCallback=t}onMap(t){this.mapCallback=t}onOverlay(t){this.overlayCallback=t}onCamera(t){this.cameraCallback=t}onBubble(t){this.bubbleCallback=t}onSkill(t){this.skillCallback=t}onUpdate(t){this.updateCallback=t}onMinigame(t){this.minigameCallback=t}onEffect(t){this.effectCallback=t}onFriends(t){this.friendsCallback=t}}class q_{constructor(e){t(this,"messages",void 0),t(this,"config",void 0),t(this,"connection",void 0),t(this,"listening",!1),this.game=e,this.config=e.app.config,this.messages=new O_(e.app)}async getServer(){if(this.config.hub)try{let t=await fetch(`${this.config.hub}/server`);return await t.json()}catch{return}}async connect(t){let{host:e,port:i}=t||await this.getServer()||this.config,n=this.config.ssl?`wss://${e}`:`ws://${e}:${i}`;this.connection=P_(n,{transports:["websocket"],forceNew:!0,reconnection:!1}),this.connection.on("connect",this.handleConnection.bind(this)),this.connection.on("connect_error",(t=>{console.error(`connect_error due to ${t.message}`),this.handleConnectionError(e,i)})),this.connection.on("message",(t=>this.receive(t.message||t))),this.connection.on("disconnect",(()=>this.game.handleDisconnection())),this.game.audio.createContext()}receive(t){if(this.listening)if(t.startsWith("[")){let e=JSON.parse(t);e.length>1?this.messages.handleBulkData(e):this.messages.handleData(e.shift())}else this.messages.handleUTF8(t)}send(t,e){let i=JSON.stringify([t,e]);this.connection?.connected&&this.connection.send(i)}handleConnection(){this.listening=!0,r.info("Connection established..."),this.game.app.updateLoader("Preparing handshake"),this.connection.emit("client",{gVer:this.config.version,cType:"HTML5"})}handleConnectionError(t,e){r.info(`Failed to connect to: ${t}`),this.listening=!1,this.game.app.toggleLogin(!1),this.game.app.sendError("Could not connect to the game server.")}}class M_{constructor(e,i,n){t(this,"border",$c("#border")),t(this,"x",0),t(this,"y",0),t(this,"gridX",0),t(this,"gridY",0),t(this,"gridWidth",0),t(this,"gridHeight",0),t(this,"borderX",0),t(this,"borderY",0),t(this,"zoomFactor",3),t(this,"centered",!0),t(this,"lockX",!1),t(this,"lockY",!1),this.width=e,this.height=i,this.tileSize=n,this.update()}update(){let t=this.border.width(),e=this.border.height();this.gridWidth=Math.ceil(t/this.tileSize/this.zoomFactor),this.gridHeight=Math.ceil(e/this.tileSize/this.zoomFactor),this.clamp(),this.borderX=(this.width-this.gridWidth)*this.tileSize,this.borderY=(this.height-this.gridHeight)*this.tileSize}clamp(){this.gridWidth>52&&(this.gridWidth=52),this.gridHeight>28&&(this.gridHeight=28)}setGridPosition(t,e){this.gridX=t,this.gridY=e,this.x=t*this.tileSize,this.y=e*this.tileSize}clip(){this.setGridPosition(Math.round(this.x/this.tileSize),Math.round(this.y/this.tileSize))}center(){this.centered=!0}decenter(){this.centered=!1,this.clip()}centreOn(t){let e=Math.floor(this.gridWidth/2),i=Math.floor(this.gridHeight/2),n=t.x-e*this.tileSize,r=t.y-i*this.tileSize;n>=0&&n<=this.borderX&&!this.lockX?(this.x=n,this.gridX=Math.round(t.x/this.tileSize)-e):this.offsetX(n),r>=0&&r<=this.borderY&&!this.lockY?(this.y=r,this.gridY=Math.round(t.y/this.tileSize)-i):this.offsetY(r)}offsetX(t){t<=this.tileSize?(this.x=0,this.gridX=0):t>=this.borderX&&(this.x=this.borderX,this.gridX=Math.round(this.borderX/this.tileSize))}offsetY(t){t<=this.tileSize?(this.y=0,this.gridY=0):t>=this.borderY&&(this.y=this.borderY,this.gridY=Math.round(this.borderY/this.tileSize))}zone(t){switch(t){case j.Up:this.setGridPosition(this.gridX,this.gridY-this.gridHeight+3);break;case j.Down:this.setGridPosition(this.gridX,this.gridY+this.gridHeight-3);break;case j.Right:this.setGridPosition(this.gridX+this.gridWidth-3,this.gridY);break;case j.Left:this.setGridPosition(this.gridX-this.gridWidth+3,this.gridY)}this.zoneClip()}zoneClip(){this.gridX<0&&this.setGridPosition(0,this.gridY),this.gridX>this.width&&this.setGridPosition(this.width,this.gridY),this.gridY<0&&this.setGridPosition(this.gridX,0),this.gridY>this.height&&this.setGridPosition(this.gridX,this.height)}zoom(t){this.zoomFactor+=t,this.zoomFactor>6&&(this.zoomFactor=6),this.zoomFactor<2.8&&(this.zoomFactor=2.8),this.zoomFactor=parseFloat(this.zoomFactor.toFixed(1))}isCentered(){return this.centered}isVisible(t,e,i,n){return t>this.gridX-i&&t<this.gridX+this.gridWidth&&e>this.gridY-i&&e<this.gridY+this.gridHeight+n}forEachVisiblePosition(t,e=1){for(let i=this.gridY-e,n=i+this.gridHeight+2*e;i<n;i++)for(let r=this.gridX-e,o=r+this.gridWidth+2*e;r<o;r++)t(r,i)}}class D_{constructor(e=-1,i="exit",n=180){t(this,"redTeamScore",0),t(this,"blueTeamScore",0),t(this,"started",!1),this.type=e,this.status=i,this.countdown=n}reset(){this.type=-1,this.status="exit",this.started=!1}setStatus(t){this.status=t}setScore(t,e){this.redTeamScore=t,this.blueTeamScore=e}exists(){return this.type>-1}}class N_{constructor(){t(this,"currentOverlay",""),t(this,"overlays",{fog:this.load("fog")})}load(t){let e=new Image,i=`/img/overlays/${t}.png`;return e.crossOrigin="Anonymous",e.src=i,e.addEventListener("load",(()=>r.debug(`Loaded ${t}`))),e}hasOverlay(){return""!==this.currentOverlay}get(){return this.overlays[this.currentOverlay]}update(t=""){this.currentOverlay=t}}class B_{constructor(t=0,e=0){this.x=t,this.y=e}copy(){return new B_(this.x,this.y)}dot(t){return t.x*this.x+t.y*this.y}sub(t){return new B_(this.x-t.x,this.y-t.y)}add(t){return new B_(this.x+t.x,this.y+t.y)}mul(t){return new B_(this.x*t,this.y*t)}inv(){return this.mul(-1)}dist2(t){return(this.x-t.x)**2+(this.y-t.y)**2}normalize(){var t=Math.sqrt(this.length2());return new B_(this.x/t||0,this.y/t||0)}length2(){return this.x**2+this.y**2}toString(){return`${this.x},${this.y}`}inBound(t,e){return t.x<this.x&&this.x<e.x&&t.y<this.y&&this.y<e.y}}function F_(t,e,i){var n=`illuminated-${t}`,r=document.querySelector(`#${n}`);r||((r=document.createElement("canvas")).id=n,r.width=e,r.height=i,r.style.display="none",document.body.append(r));var o=r.getContext("2d");return o.clearRect(0,0,r.width,r.height),r.width=e,r.height=i,{canvas:r,ctx:o,w:e,h:i}}var W_=(()=>{var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return(t,i=1)=>{e.clearRect(0,0,1,1),e.fillStyle=t,e.fillRect(0,0,1,1);var[n,r,o]=e.getImageData(0,0,1,1).data;return`rgba(${[n,r,o,i]})`}})();(()=>{var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");function i(t){var e=t.toString(16);return 1===e.length&&`0${e}`,e}})();var H_,U_=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},$_=(t,e,i)=>(U_(t,e,"read from private field"),i?i.call(t):e.get(t));class V_{constructor(t={}){((t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,void 0)})(this,H_);var{lights:e,color:i}=t;this.lights=null!=e?e:[],this.color=null!=i?i:"rgba(0,0,0,0.9)"}compute(t,e){var i,n;$_(this,H_)&&$_(this,H_).w===t&&$_(this,H_).h===e||(this,i=H_,n=F_("dm",t,e),U_(this,i,"write to private field"),i.set(this,n));var{ctx:r}=$_(this,H_);for(var o of(r.save(),r.clearRect(0,0,t,e),r.fillStyle=this.color,r.fillRect(0,0,t,e),r.globalCompositeOperation="destination-out",this.lights))o.mask(r);r.restore()}render(t){t.drawImage($_(this,H_).canvas,0,0)}getCanvas(){return $_(this,H_).canvas}}H_=new WeakMap;var G_,Z_,K_=Math.PI*(3-Math.sqrt(5)),Q_=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},J_=(t,e,i)=>(Q_(t,e,"read from private field"),i?i.call(t):e.get(t)),tk=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},ek=(t,e,i,n)=>(Q_(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i);class ik{constructor(t={}){tk(this,G_,void 0),tk(this,Z_,void 0);var{position:e,distance:i,diffuse:n}=t;this.position=null!=e?e:new B_,this.distance=null!=i?i:100,this.diffuse=null!=n?n:.8}render(t){}mask(t){var e=this.getVisibleMaskCache(),{x:i,y:n}=this.position;t.drawImage(e.canvas,Math.round(i-e.w/2),Math.round(n-e.h/2))}bounds(){var{position:t,distance:e}=this,{x:i,y:n}=t;return{topLeft:new B_(i-e,n-e),bottomRight:new B_(i+e,n+e)}}center(){var{distance:t}=this;return new B_(t,t)}forEachSample(t){t(this.position)}getVisibleMaskCache(){var t=Math.floor(1.4*this.distance),e=`${t}`;if(J_(this,G_)!==e){ek(this,G_,e),ek(this,Z_,F_(`vm${this.id}`,2*t,2*t));var{ctx:i,w:n,h:r}=J_(this,Z_),o=i.createRadialGradient(t,t,0,t,t,t);o.addColorStop(0,"rgba(0,0,0,1)"),o.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=o,i.fillRect(0,0,n,r)}return J_(this,Z_)}getHashCache(){return[this.distance,this.diffuse].toString()}}G_=new WeakMap,Z_=new WeakMap;var nk,rk,ok,ak=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},sk=(t,e,i)=>(ak(t,e,"read from private field"),i?i.call(t):e.get(t)),lk=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},hk=(t,e,i,n)=>(ak(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i);class dk extends ik{constructor(t={}){super(t),lk(this,nk,0),lk(this,rk,void 0),lk(this,ok,void 0);var e,i,{id:n,color:r,radius:o,samples:a,angle:s,roughness:l}=t;this.id=null!=n?n:0,this.color=null!=r?r:"rgba(250,220,150,0.8)",this.radius=null!=o?o:0,this.samples=null!=a?a:1,this.angle=null!=s?s:0,this.roughness=null!=l?l:0,0===this.id&&(this.id=++(e=this,i=nk,{set _(t){hk(e,i,t,undefined)},get _(){return sk(e,i,undefined)}})._)}getHashCache(){return[this.color,this.distance,this.diffuse,this.angle,this.roughness,this.samples,this.radius].toString()}center(){var{angle:t,roughness:e,distance:i}=this;return new B_((1-Math.cos(t)*e)*i,(1+Math.sin(t)*e)*i)}bounds(){var{angle:t,roughness:e,distance:i,position:n}=this,{x:r,y:o}=new B_(Math.cos(t),-Math.sin(t)).mul(e*i);return{topLeft:new B_(n.x+r-i,n.y+o-i),bottomRight:new B_(n.x+r+i,n.y+o+i)}}mask(t){var{angle:e,roughness:i,distance:n,position:r}=this,{canvas:o,w:a,h:s}=this.getVisibleMaskCache(),{x:l,y:h}=new B_(Math.cos(e),-Math.sin(e)).mul(i*n);t.drawImage(o,Math.round(r.x+l-a/2),Math.round(r.y+h-s/2))}getGradientCache(t){var e=this.getHashCache();if(sk(this,rk)===e)return sk(this,ok);hk(this,rk,e);var{distance:i,id:n,radius:r,color:o}=this,a=Math.round(i),s=2*a,l=F_(`gc${n}`,s,s),{ctx:h,w:d,h:u}=l,c=h.createRadialGradient(t.x,t.y,0,a,a,a);return c.addColorStop(Math.min(1,r/i),o),c.addColorStop(1,W_(o,0)),h.fillStyle=c,h.fillRect(0,0,d,u),hk(this,ok,l),l}render(t){var{x:e,y:i}=this.position,n=this.center(),{canvas:r}=this.getGradientCache(n);t.drawImage(r,Math.round(e-n.x),Math.round(i-n.y))}forEachSample(t){for(var{samples:e,radius:i,position:n}=this,r=0,o=e;r<o;++r){var a=r*K_,s=Math.sqrt(r/e)*i,l=new B_(Math.cos(a)*s,Math.sin(a)*s);t(n.add(l))}}}nk=new WeakMap,rk=new WeakMap,ok=new WeakMap;var uk,ck,gk=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},pk=(t,e,i)=>(gk(t,e,"read from private field"),i?i.call(t):e.get(t)),fk=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},wk=(t,e,i,n)=>(gk(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i);class mk{constructor(t={}){fk(this,uk,void 0),fk(this,ck,void 0);var{light:e,objects:i}=t;this.light=null!=e?e:new ik,this.objects=null!=i?i:[]}createCache(t,e){wk(this,uk,F_("lc",t,e)),wk(this,ck,F_("lcc",t,e))}compute(t,e){pk(this,uk)&&pk(this,uk).w===t&&pk(this,uk).h===e||this.createCache(t,e);var{ctx:i}=pk(this,uk);i.save(),i.clearRect(0,0,i.canvas.width,i.canvas.height),this.light.render(i),i.globalCompositeOperation="destination-out",this.cast(i),i.restore()}cast(t){var{ctx:e,w:i,h:n,canvas:r}=pk(this,ck),{light:o}=this,a=o.samples;e.clearRect(0,0,i,n),e.fillStyle=`rgba(0,0,0,${Math.round(100/a)/100})`;var s=o.bounds(),{topLeft:l,bottomRight:h}=s,{objects:d}=this;for(var u of(o.forEachSample((t=>{for(var i=0,n=d.length;i<n;++i)if(d[i].contains(t))return void e.fillRect(l.x,l.y,h.x-l.x,h.y-l.y);for(var r of d)r.cast(e,t,s)})),d)){var{diffuse:c}=u;c*=o.diffuse,e.fillStyle=`rgba(0,0,0,${1-c})`,e.beginPath(),u.path(e),e.fill()}t.drawImage(r,0,0)}render(t){t.drawImage(pk(this,uk).canvas,0,0)}getCanvas(){return pk(this,uk).canvas}}uk=new WeakMap,ck=new WeakMap;class _k{constructor(e,i,n,r=!1){t(this,"animationIndex",0),t(this,"lastTime",0),this.id=e,this.index=i,this.animationInfo=n,this.isFlipped=r}animate(t){t-this.lastTime>this.animationInfo[this.animationIndex].duration&&(this.id=this.animationInfo[this.animationIndex].tileId,this.lastTime=t,this.animationIndex>=Object.keys(this.animationInfo).length-1?this.animationIndex=0:this.animationIndex++)}}class kk{constructor(e){t(this,"background",document.querySelector("#background")),t(this,"foreground",document.querySelector("#foreground")),t(this,"overlay",document.querySelector("#overlay")),t(this,"textCanvas",document.querySelector("#text-canvas")),t(this,"entitiesCanvas",document.querySelector("#entities")),t(this,"cursor",document.querySelector("#cursor")),t(this,"entitiesContext",void 0),t(this,"backContext",void 0),t(this,"foreContext",void 0),t(this,"overlayContext",void 0),t(this,"textContext",void 0),t(this,"cursorContext",void 0),t(this,"canvases",[this.background,this.entitiesCanvas,this.foreground,this.overlay,this.textCanvas,this.cursor]),t(this,"allContexts",void 0),t(this,"contexts",void 0),t(this,"drawingContexts",void 0),t(this,"lightings",[]),t(this,"map",void 0),t(this,"camera",void 0),t(this,"tileSize",16),t(this,"actualTileSize",48),t(this,"fontSize",10),t(this,"screenWidth",0),t(this,"screenHeight",0),t(this,"canvasHeight",0),t(this,"canvasWidth",0),t(this,"time",Date.now()),t(this,"fps",0),t(this,"frameCount",0),t(this,"renderedFrame",[0,0]),t(this,"animatedTiles",{}),t(this,"stopRendering",!1),t(this,"animateTiles",!0),t(this,"debugging",!1),t(this,"drawNames",!0),t(this,"drawLevels",!0),t(this,"mobile",s()),t(this,"tablet",function(){let t=a.includes("ipad"),e=a.includes("android");return(t||e)&&window.innerWidth>=640}()),t(this,"forceRendering",!1),t(this,"tiles",{}),t(this,"cells",{}),t(this,"darkMask",new V_({lights:[],color:"rgba(0, 0, 0, 0.84)"})),t(this,"shadowSprite",void 0),t(this,"sparksSprite",void 0),t(this,"silverMedal",void 0),t(this,"goldMedal",void 0),this.game=e,this.map=e.map,this.camera=e.camera,this.tileSize=e.map.tileSize,this.actualTileSize=this.tileSize*this.camera.zoomFactor,this.entitiesContext=this.entitiesCanvas.getContext("2d"),this.backContext=this.background.getContext("2d"),this.foreContext=this.foreground.getContext("2d"),this.overlayContext=this.overlay.getContext("2d"),this.textContext=this.textCanvas.getContext("2d"),this.cursorContext=this.cursor.getContext("2d"),this.allContexts=[this.entitiesContext,this.backContext,this.foreContext,this.overlayContext,this.textContext,this.cursorContext],this.contexts=[this.entitiesContext,this.textContext,this.overlayContext],this.drawingContexts=[this.backContext,this.foreContext],this.darkMask.compute(this.canvasWidth,this.canvasHeight),this.loadSizes(),this.loadStaticSprites()}loadSizes(){this.actualTileSize=this.tileSize*this.camera.zoomFactor,this.screenWidth=this.camera.gridWidth*this.tileSize,this.screenHeight=this.camera.gridHeight*this.tileSize,this.canvasWidth=this.screenWidth*this.camera.zoomFactor,this.canvasHeight=this.screenHeight*this.camera.zoomFactor,this.darkMask.compute(this.canvasWidth,this.canvasHeight),this.forEachCanvas((t=>{t.width=this.canvasWidth,t.height=this.canvasHeight}))}loadStaticSprites(){this.shadowSprite=this.game.sprites.get("shadow16"),this.shadowSprite.loaded||this.shadowSprite.load(),this.sparksSprite=this.game.sprites.get("sparks"),this.sparksSprite.loaded||this.sparksSprite.load(),this.silverMedal=this.game.sprites.get("silvermedal"),this.silverMedal.loaded||this.silverMedal.load(),this.goldMedal=this.game.sprites.get("goldmedal"),this.goldMedal.loaded||this.goldMedal.load()}resize(){this.cells={},this.mobile=s(),this.camera.update(),this.loadSizes(),this.updateAnimatedTiles(),this.clearScreen(this.cursorContext),this.camera.centreOn(this.game.player),this.forceRendering=!0}stop(){this.stopRendering=!0,this.forEachContext((t=>{t.fillStyle="rgba(18, 16, 13, 1)",t.fillRect(0,0,t.canvas.width,t.canvas.height)}))}removeSmoothing(){this.forAllContexts((t=>{t.imageSmoothingQuality="low",t.imageSmoothingEnabled=!1}))}render(){this.stopRendering||(this.clear(),this.save(),this.removeSmoothing(),this.draw(),this.drawDebugging(),this.drawOverlays(),this.drawHoveringCell(),this.drawSelectedCell(),this.drawEntities(),this.drawInfos(),this.drawCursor(),this.drawMinigameGUI(),this.restore())}draw(){this.hasRenderedFrame()||(this.clearDrawing(),this.saveDrawing(),this.updateDrawingView(),this.forEachVisibleTile(((t,e)=>{let i=this.getFlipped(t);i.length>0&&(t=t.tileId);let n=this.map.isHighTile(t)?this.foreContext:this.backContext;if(this.game.overlays.hasOverlay()){n=this.map.isLightTile(t)?this.overlayContext:n}if(e in this.animatedTiles&&this.animateTiles){if(this.animatedTiles[e].animate(this.game.time),0===i.length&&this.animatedTiles[e].isFlipped)return;this.drawTile(n,this.animatedTiles[e].id,this.animatedTiles[e].index,i)}this.map.isAnimatedTile(t)&&this.animateTiles||this.drawTile(n,t-1,e,i)})),this.saveFrame(),this.restoreDrawing())}drawDebugging(){this.debugging&&(this.drawFPS(),this.drawPathing(),this.mobile||(this.drawPosition(),this.drawCollisions()))}drawOverlays(){if(!this.game.overlays.hasOverlay())return;let t=this.game.overlays.get();t&&this.overlayContext.drawImage(t,0,0,this.canvasWidth,this.canvasHeight),this.overlayContext.globalCompositeOperation="lighter",this.forEachLighting((t=>{this.inRadius(t)&&this.drawLighting(t)})),this.overlayContext.globalCompositeOperation="source-over",this.darkMask.render(this.overlayContext)}drawHoveringCell(){if(this.mobile)return;let{input:t}=this.game,e=t.getCoords();if(this.isSelectedCell(e.x,e.y))return;let i=this.map.isColliding(e.x,e.y);this.drawCellHighlight(e.x,e.y,i?"rgba(230, 0, 0, 0.7)":t.targetColour)}drawSelectedCell(){if(!this.game.input.selectedCellVisible||this.game.input.keyMovement)return;let t=this.game.input.getTargetData();t&&(this.entitiesContext.save(),this.setCameraView(this.entitiesContext),this.entitiesContext.drawImage(t.sprite.image,t.x,t.y,t.width,t.height,t.dx,t.dy,t.dw,t.dh),this.entitiesContext.restore())}drawEntities(){this.game.player.dead||(this.setCameraView(this.entitiesContext),this.forEachVisibleEntity((t=>{t.spriteLoaded&&t.sprite&&t.animation&&t.isVisible()&&this.drawEntity(t)})))}drawInfos(){this.game.info.isEmpty()||this.game.info.forEachInfo((t=>{this.textContext.save(),this.setCameraView(this.textContext),this.textContext.globalAlpha=t.opacity,this.drawText(`${t.getText()}`,Math.floor(t.x+8),Math.floor(t.y),!0,t.fill,t.stroke,26),this.textContext.restore()}))}drawCursor(){if(this.tablet||this.mobile||this.game.input.isMouseRendered())return;let{cursor:t,mouse:e}=this.game.input;t&&e&&(this.clearScreen(this.cursorContext),this.cursorContext.save(),t.loaded?this.cursorContext.drawImage(t.image,0,0,this.tileSize,this.tileSize,e.x,e.y,this.actualTileSize,this.actualTileSize):t.load(),this.cursorContext.restore(),this.game.input.saveMouse())}drawFPS(){this.calculateFPS(),this.drawText(`FPS: ${this.fps}`,10,61,!1,"white")}calculateFPS(){let t=Date.now();t-this.time>=1e3&&(this.fps=this.frameCount,this.frameCount=0,this.time=t),this.frameCount++}drawPosition(){let{player:t,input:e}=this.game;this.drawText(`x: ${t.gridX} y: ${t.gridY} tileIndex: ${this.map.coordToIndex(t.gridX,t.gridY)} movementSpeed: ${t.movementSpeed}`,10,81,!1,"white"),e.hovering&&e.entity&&(this.drawText(`x: ${e.entity.gridX} y: ${e.entity.gridY} instance: ${e.entity.instance}`,10,101,!1,"white"),e.entity.attackRange&&this.drawText(`att range: ${e.entity.attackRange}`,10,121,!1,"white"))}drawCollisions(){this.camera.forEachVisiblePosition(((t,e)=>{this.map.isOutOfBounds(t,e)||0!==this.map.grid[e][t]&&this.drawCellHighlight(t,e,"rgba(50, 50, 255, 0.5)")}))}drawPathing(){this.game.player.hasPath()&&ve.each(this.game.player.path,(t=>this.drawCellHighlight(t[0],t[1],"rgba(50, 255, 50, 0.5)")))}drawEntity(t){let e=t.animation?.frame,i=t.x*this.camera.zoomFactor,n=t.y*this.camera.zoomFactor,r=i+this.actualTileSize,o=n+t.sprite.height;this.entitiesContext.save(),t.angled&&!t.isProjectile()&&(t.angle*=Math.PI/180),t.fading&&(this.entitiesContext.globalAlpha=t.fadingAlpha),t.spriteFlipX?(this.entitiesContext.translate(r,n),this.entitiesContext.scale(-1,1)):t.spriteFlipY?(this.entitiesContext.translate(i,o),this.entitiesContext.scale(1,-1)):this.entitiesContext.translate(i,n),this.entitiesContext.scale(this.camera.zoomFactor,this.camera.zoomFactor),t.customScale&&this.entitiesContext.scale(t.customScale,t.customScale),t.angled&&this.entitiesContext.rotate(t.getAngle()),t.hasShadow()&&(this.entitiesContext.globalCompositeOperation="source-over",this.entitiesContext.drawImage(this.shadowSprite.image,0,0,this.shadowSprite.width,this.shadowSprite.height,0,t.shadowOffsetY,this.shadowSprite.width,this.shadowSprite.height)),this.entitiesContext.drawImage(t.sprite.image,e.x,e.y,t.sprite.width,t.sprite.height,t.sprite.offsetX,t.sprite.offsetY,t.sprite.width,t.sprite.height),this.drawEntityFore(t),this.entitiesContext.restore(),this.drawHealth(t),this.game.overlays.hasOverlay()||this.drawName(t)}drawEntityFore(t){if(t.isItem())return this.drawSparks();t instanceof tg&&(t.isPlayer()&&this.drawWeapon(t),t.hasEffect()&&this.drawEffect(t))}drawWeapon(t){if(!t.hasWeapon()||t.dead||t.teleporting)return;let e=this.game.sprites.get(t.getWeapon().key);if(!e)return;e.loaded||e.load();let i=t.animation,n=e.animationData[i.name];if(!n)return;let{frame:r,row:o}=i,a=r.index<n.length?r.index:r.index%n.length,s=e.width*a,l=e.height*o,h=e.width,d=e.height;this.entitiesContext.drawImage(e.image,s,l,h,d,e.offsetX,e.offsetY,h,d)}drawEffect(t){let e=this.game.sprites.get(t.getActiveEffect());if(!e)return;e.loaded||e.load();let i=t.getEffectAnimation(),{index:n}=i.frame,r=e.width*n,o=e.height*i.row;this.entitiesContext.drawImage(e.image,r,o,e.width,e.height,e.offsetX,e.offsetY,e.width,e.height),i.update(this.game.time)}drawSparks(){let{sparksAnimation:t}=this.game.entities.sprites,e=t.frame;this.entitiesContext.drawImage(this.sparksSprite.image,this.sparksSprite.width*e.index,this.sparksSprite.height*t.row,this.sparksSprite.width,this.sparksSprite.height,0,0,this.sparksSprite.width,this.sparksSprite.height)}drawMedal(t,e,i){let n="goldmedal"===t?this.goldMedal:this.silverMedal;n&&this.textContext.drawImage(n.image,0,0,n.width,n.height,(e-2)*this.camera.zoomFactor,(i+1)*this.camera.zoomFactor,n.width,n.height)}drawHealth(t){if(!t.hitPoints||t.hitPoints<0||!t.healthBarVisible)return;let e=this.tileSize,i=t.x*this.camera.zoomFactor-e/2+8,n=(t.y-t.sprite.height/4)*this.camera.zoomFactor,r=Math.round(t.hitPoints/t.maxHitPoints*e*this.camera.zoomFactor),o=2*this.camera.zoomFactor;this.textContext.save(),this.setCameraView(this.textContext),this.textContext.strokeStyle="rbga(0, 0, 0, 1)",this.textContext.lineWidth=1,this.textContext.strokeRect(i,n,e*this.camera.zoomFactor,o),this.textContext.fillStyle="rgba(253, 0, 0, 1)",this.textContext.fillRect(i,n,r,o),this.textContext.restore()}drawName(t){if(t.hidden||!t.level||!t.drawNames()||!this.drawNames&&!this.drawLevels)return;let e=t.wanted?"red":"white";if(t.isAdmin()&&(e="rgba(186,20,20, 1)"),t.isModerator()&&(e="rgba(165, 154, 154, 1)"),t.instance===this.game.player.instance&&(e="rgba(252,218,92, 1)"),t.nameColour&&(e=t.nameColour),this.textContext.save(),this.setCameraView(this.textContext),this.textContext.font="11px AdvoCut",t.hasCounter)this.game.time-t.countdownTime>1e3&&(t.countdownTime=this.game.time,t.counter--),t.counter<=0&&(t.hasCounter=!1),this.drawText(t.counter.toString(),t.x+8,t.y-10,!0,e);else{let i=t.x+8,n=t.y-Math.floor(t.sprite.height/5);if(this.drawNames&&t instanceof tg){let r=this.drawLevels&&!t.isNPC()?n-10:n-4;this.drawText(t.name,i,r,!0,e,"rbga(0, 0, 0, 1)"),t.hasMedal()&&this.drawMedal(t.getMedalKey(),i,r)}this.drawLevels&&(t.isMob()||t.isPlayer())&&this.drawText(`Level ${t.level}`,i,n,!0,e,"rbga(0, 0, 0, 1)"),t.isItem()&&t.count>1&&this.drawText(t.count.toString(),i,n,!0,e)}this.textContext.restore()}drawMinigameGUI(){if(this.game.minigame.exists())switch(this.game.minigame.status){case"lobby":return void this.drawText(this.game.minigame.started?`There is a game in progress: ${this.game.minigame.countdown} seconds`:`Game starts in ${this.game.minigame.countdown} seconds`,this.textCanvas.width/6,30,!0,"white");case"ingame":return this.drawText(`Red: ${this.game.minigame.redTeamScore}`,this.textCanvas.width/6-20,30,!0,"red"),this.drawText(`Blue: ${this.game.minigame.blueTeamScore}`,this.textCanvas.width/6+20,30,!0,"blue"),void this.drawText(`Time left: ${this.game.minigame.countdown} seconds`,this.textCanvas.width/6,50,!0,"white")}}drawLighting(t){if(t.relative){let e=(t.light.origX-this.camera.x/this.tileSize)*this.actualTileSize,i=(t.light.origY-this.camera.y/this.tileSize)*this.actualTileSize;t.light.position=new B_(e,i),t.compute(this.canvasWidth,this.canvasHeight),this.darkMask.compute(this.canvasWidth,this.canvasHeight)}else t.computed||(t.compute(this.canvasWidth,this.canvasHeight),t.computed=!0);t.render(this.overlayContext)}drawTile(t,e,i,n=[]){if(e<0)return;let r=this.map.getTilesetFromId(e);if(r){if(!(e in this.tiles)){let t=r.width/this.tileSize,i=e-r.firstGID;this.tiles[e]={relativeTileId:i,setWidth:t,x:this.getX(i+1,t)*this.tileSize,y:Math.floor(i/t)*this.tileSize,width:this.tileSize,height:this.tileSize}}(!(i in this.cells)||n.length>0)&&(this.cells[i]={dx:this.getX(i+1,this.map.width)*this.actualTileSize,dy:Math.floor(i/this.map.width)*this.actualTileSize,width:this.actualTileSize,height:this.actualTileSize}),this.drawImage(t,r,this.tiles[e],this.cells[i],n)}}drawImage(t,e,i,n,r=[]){let o=0,a=0,s=r.length>0;if(s){({dx:o,dy:a}=n),t.save();let e=o;for(let i=0;i<r.length;i++)switch(r[i]){case 0:o=-o-n.width,t.scale(-1,1);break;case 1:a=-a-n.height,t.scale(1,-1);break;case 2:t.rotate(Math.PI/2),t.translate(0,-n.height),o=a,a=-e,0===r[i+1]?r.push(0):r.push(1)}}t.drawImage(e,i.x,i.y,i.width,i.height,o||n.dx,a||n.dy,n.width,n.height),s&&t.restore()}drawText(t,e,i,n,r,o,a=this.fontSize){let s=this.textContext;s.save(),n&&(s.textAlign="center"),a+=2*this.camera.zoomFactor,s.strokeStyle=o||"rgba(55, 55, 55, 1)",s.lineWidth=3,s.font=`${a}px AdvoCut`,s.strokeText(t,e*this.camera.zoomFactor,i*this.camera.zoomFactor),s.fillStyle=r||"white",s.fillText(t,e*this.camera.zoomFactor,i*this.camera.zoomFactor),s.restore()}updateAnimatedTiles(){this.animateTiles&&this.forEachVisibleTile(((t,e)=>{let i=this.isFlipped(t);i&&(t=t.tileId),this.map.isAnimatedTile(t)&&(e in this.animatedTiles||(this.animatedTiles[e]=new _k(t,e,this.map.getTileAnimation(t),i)))}),2)}resetAnimatedTiles(){ve.each(this.animatedTiles,(t=>{t.animationIndex=0}))}drawCellRect(t,e,i){this.entitiesContext.save(),this.setCameraView(this.entitiesContext),this.entitiesContext.lineWidth=2*this.camera.zoomFactor,this.entitiesContext.translate(t+4,e+2),this.entitiesContext.strokeStyle=i,this.entitiesContext.strokeRect(0,0,this.actualTileSize-8,this.actualTileSize-8),this.entitiesContext.restore()}drawCellHighlight(t,e,i){this.drawCellRect(t*this.actualTileSize,e*this.actualTileSize,i)}updateDarkMask(t="rgba(0, 0, 0, 0.5)"){this.darkMask.color=t,this.darkMask.compute(this.canvasWidth,this.canvasHeight)}addLight(t){let e=new dk(this.getLightData(t.x,t.y,t.distance,t.diffuse,t.colour)),i=new mk({light:e});e.origX=e.position.x,e.origY=e.position.y,e.diff=Math.round(e.distance/this.tileSize),this.hasLighting(i)||(i.relative=!0,this.lightings.push(i),this.darkMask.lights.push(e),this.drawLighting(i),this.darkMask.compute(this.canvasWidth,this.canvasHeight))}removeAllLights(){this.lightings=[],this.darkMask.lights=[],this.darkMask.compute(this.canvasWidth,this.canvasHeight)}removeNonRelativeLights(){ve.each(this.lightings,((t,e)=>{t.light.relative||(this.lightings.splice(e,1),this.darkMask.lights.splice(e,1))})),this.darkMask.compute(this.canvasWidth,this.canvasHeight)}hasLighting(t){for(let{light:e}of this.lightings)if(t.light.origX===e.origX&&t.light.origY===e.origY&&t.light.distance===e.distance)return!0;return!1}clear(){this.forEachContext((t=>t.clearRect(0,0,t.canvas.width,t.canvas.height)))}clearDrawing(){this.forEachDrawingContext((t=>t.clearRect(0,0,t.canvas.width,t.canvas.height)))}restore(){this.forEachContext((t=>t.restore()))}restoreDrawing(){this.forEachDrawingContext((t=>t.restore()))}hasRenderedFrame(){return!(this.forceRendering||!this.isLowPowerMode())&&(!!this.stopRendering||this.renderedFrame[0]===this.camera.x&&this.renderedFrame[1]===this.camera.y)}save(){this.forEachContext((t=>t.save()))}saveDrawing(){this.forEachDrawingContext((t=>t.save()))}saveFrame(){this.isLowPowerMode()&&(this.renderedFrame[0]=this.camera.x,this.renderedFrame[1]=this.camera.y,this.forceRendering=!1)}updateDrawingView(){this.forEachDrawingContext((t=>this.setCameraView(t)))}setCameraView(t){this.camera&&!this.stopRendering&&t.translate(-this.camera.x*this.camera.zoomFactor,-this.camera.y*this.camera.zoomFactor)}clearScreen(t){t.clearRect(0,0,this.entitiesContext.canvas.width,this.entitiesContext.canvas.height)}setBrightness(t){t<0||t>100||this.forEachCanvas((e=>{e.style.background=`rgba(0,0,0,${.25-t/200})`}))}getX(t,e){return 0===t?0:t%e==0?e-1:t%e-1}isFlipped(t){return t.v||t.h||t.d}isSelectedCell(t,e){return this.game.input.selectedX===t&&this.game.input.selectedY===e}isLowPowerMode(){return!this.camera.isCentered()&&!this.animateTiles}inRadius(t){let e=t.light.origX,i=t.light.origY,n=t.light.diff;return e>this.camera.gridX-n&&e<this.camera.gridX+this.camera.gridWidth+n&&i>this.camera.gridY-n&&i<this.camera.gridY+this.camera.gridHeight+n}getMiddle(){return{x:this.canvasWidth/2,y:this.canvasHeight/2}}getFlipped(t){let e=[];return this.isFlipped(t)?(t.v&&e.push(1),t.d&&e.push(2),t.h&&e.push(0),e):e}getLightData(t,e,i,n,r){return{position:new B_(t,e),distance:i,diffuse:n,color:r,radius:0,samples:2,roughness:0,angle:0}}forAllContexts(t){ve.each(this.allContexts,t)}forEachContext(t){ve.each(this.contexts,t)}forEachDrawingContext(t){ve.each(this.drawingContexts,t)}forEachCanvas(t){ve.each(this.canvases,t)}forEachLighting(t){ve.each(this.lightings,t)}forEachAnimatedTile(t){ve.each(this.animatedTiles,t)}forEachVisibleIndex(t,e){this.camera.forEachVisiblePosition(((e,i)=>{this.map.isOutOfBounds(e,i)||t(this.map.coordToIndex(e,i))}),e)}forEachVisibleTile(t,e){this.map?.mapLoaded&&this.forEachVisibleIndex((e=>{let i=this.map.data[e];if(Array.isArray(i))for(let n of i)t(n,e);else this.map.data[e]&&t(this.map.data[e],e)}),e)}forEachVisibleEntity(t){let{grids:e}=this.game.entities;this.camera.forEachVisiblePosition(((i,n)=>{!this.map.isOutOfBounds(i,n)&&e.renderingGrid[n][i]&&ve.each(e.renderingGrid[n][i],(e=>t(e)))}))}}class bk{constructor(e){t(this,"tileSize",void 0),t(this,"sprites",void 0),this.game=e,this.tileSize=e.map.tileSize,this.sprites=e.sprites}update(){this.game.player.dead||(this.updateEntities(),this.updateKeyboard(),this.updateAnimations(),this.updateInfos(),this.updateBubbles(),this.updateSounds())}updateEntities(){this.game.entities.forEachEntity((t=>{if(!t.spriteLoaded)return;if(this.updateFading(t),t.animation?.update(this.game.time),t instanceof wg){let e=t.speed*t.getTimeDiff(),i=t.target.x-t.x,n=t.target.y-t.y,r=Math.sqrt(i*i+n*n),o=e/r;return t.updateAngle(),o>1&&(o=1),t.x+=i*o,t.y+=n*o,r<5&&t.impact(),void(t.lastUpdate=this.game.time)}if(!(t instanceof tg))return;if(t.movement.inProgress)return t.movement.step(this.game.time);if(!t.hasPath())return;let e,i,n=t.orientation===j.Left||t.orientation===j.Right,r=t.orientation===j.Up||t.orientation===j.Down;n&&(e=t.orientation===j.Left),r&&(i=t.orientation===j.Up),t.movement.start(this.game.time,n?t.x+(e?-1:1):t.y+(i?-1:1),n?t.x+(e?-this.tileSize:this.tileSize):t.y+(i?-this.tileSize:this.tileSize),t.movementSpeed,(e=>{n&&(t.x=e),r&&(t.y=e),t.moved()}),(()=>{n&&(t.x=t.movement.endValue),r&&(t.y=t.movement.endValue),t.moved(),t.nextStep()}))}))}updateFading(t){if(!t.fading)return;let{time:e}=this.game,i=e-t.fadingTime;i>t.fadingDuration?(t.fading=!1,t.fadingAlpha=1):t.fadingAlpha=i/t.fadingDuration}updateKeyboard(){let{player:t,input:e}=this.game,i={x:t.gridX,y:t.gridY};t.moving||t.teleporting||t.frozen||!t.hasKeyboardMovement()||(t.moveUp?i.y--:t.moveDown?i.y++:t.moveRight?i.x++:t.moveLeft&&i.x--,e.keyMove(i))}updateAnimations(){let t=this.game.input.targetAnimation;t&&this.game.input.selectedCellVisible&&t.update(this.game.time),this.sprites&&this.sprites.sparksAnimation?.update(this.game.time)}updateInfos(){this.game.info.update(this.game.time)}updateBubbles(){this.game.bubble?.update(this.game.time),this.game.pointer?.update()}updateSounds(){this.game.audio.updatePlayerListener()}}
/**
             * A* (A-Star) algorithm for a path finder
             * @author  Andrea Giammarchi
             * @license Mit Style License
             */let vk=(t,e,i,n,r,o,a,s,l,h,d,u,c)=>(t&&(i&&!l[r][a]&&(u[c++]={x:a,y:r}),n&&!l[r][s]&&(u[c++]={x:s,y:r})),e&&(i&&!l[o][a]&&(u[c++]={x:a,y:o}),n&&!l[o][s]&&(u[c++]={x:s,y:o})),u),yk=(t,e,i,n,r,o,a,s,l,h,d,u,c)=>(t=r>-1,e=o<h,n=s>-1,a<d&&(t&&!l[r][a]&&(u[c++]={x:a,y:r}),e&&!l[o][a]&&(u[c++]={x:a,y:o})),n&&(t&&!l[r][s]&&(u[c++]={x:s,y:r}),e&&!l[o][s]&&(u[c++]={x:s,y:o})),u),xk=(t,e,i,n,r,o,a,s,l,h,d,u)=>u;function Sk(t,e,i,n,r,o){let a=i-1,s=i+1,l=e+1,h=e-1,d=a>-1&&!n[a][e],u=s<r&&!n[s][e],c=l<o&&!n[i][l],g=h>-1&&!n[i][h],p=[],f=0;return d&&(p[f++]={x:e,y:a}),c&&(p[f++]={x:l,y:i}),u&&(p[f++]={x:e,y:s}),g&&(p[f++]={x:h,y:i}),t(d,u,c,g,a,s,l,h,n,r,o,p,f)}let Ck=(t,e,i,n)=>n(i(t.x-e.x),i(t.y-e.y)),Ek=(t,e,i,n)=>{let r=t.x-e.x,o=t.y-e.y;return n(r*r+o*o)},Ik=(t,e,i)=>i(t.x-e.x)+i(t.y-e.y);class Ak{constructor(){t(this,"mode","DEFAULT"),t(this,"ignores",[])}find(t,e,i,n,r){return this.handleIgnore(t,!0),function(t,e,i,n){let r,o,a,s,l=t[0].length,h=t.length,d=l*h,u=Math.max,c={},g=[],p=[{x:e[0],y:e[1],f:0,g:0,v:e[0]+e[1]*l}],f=1,w={x:i[0],y:i[1],v:i[0]+i[1]*l};switch(n){case"Diagonal":case"Euclidean":o=vk;case"DiagonalFree":r=Ck;break;case"EuclideanFree":u=Math.sqrt,r=Ek;break;default:r=Ik,o=xk}o||=yk;do{if(f>100)return[];let e=d,i=0;for(let t=0;t<f;++t){let n=p[t].f;n<e&&(e=n,i=t)}if([a]=p.splice(i,1),a.v===w.v){let t=f=0;do{g[t++]=[a.x,a.y]}while(a=a.p);g.reverse()}else{--f,s=Sk(o,a.x,a.y,t,h,l);for(let t=0,e=s.length;t<e;++t){let e=s[t];e.p=a,e.f=e.g=0,e.v=e.x+e.y*l,e.v in c||(e.f=(e.g=a.g+r(e,a,Math.abs,u))+r(e,w,Math.abs,u),p[f++]=e,c[e.v]=1)}}}while(f);return g}(t,[e,i],[n,r],this.mode)}handleIgnore(t,e){ve.each(this.ignores,(i=>{let n=i.hasPath()?i.nextGridX:i.gridX,r=i.hasPath()?i.nextGridY:i.gridY;n>=0&&r>=0&&(t[r][n]=e?0:1)}))}addIgnore(t){t&&this.ignores.push(t)}clearIgnores(t){this.handleIgnore(t,!1),this.ignores=[]}}new class{constructor(e){t(this,"storage",void 0),t(this,"map",new rp(this)),t(this,"camera",new M_(this.map.width,this.map.height,this.map.tileSize)),t(this,"player",new gg("")),t(this,"zoning",new Zg),t(this,"overlays",new N_),t(this,"pathfinder",new Ak),t(this,"info",new bg),t(this,"sprites",new Gg),t(this,"minigame",new D_),t(this,"renderer",void 0),t(this,"input",void 0),t(this,"socket",void 0),t(this,"pointer",void 0),t(this,"updater",void 0),t(this,"audio",void 0),t(this,"entities",void 0),t(this,"bubble",void 0),t(this,"menu",void 0),t(this,"connection",void 0),t(this,"time",Date.now()),t(this,"lastTime",Date.now()),t(this,"started",!1),t(this,"ready",!1),t(this,"pvp",!1),this.app=e,this.storage=e.storage,this.renderer=new kk(this),this.menu=new Wg(this),this.input=new xg(this),this.socket=new q_(this),this.pointer=new Ug(this),this.updater=new bk(this),this.audio=new Hc(this),this.entities=new _g(this),this.bubble=new Gc(this),this.connection=new xm(this),e.sendStatus("Loading game"),this.map.onReady((()=>e.ready())),e.onLogin(this.socket.connect.bind(this.socket)),e.onResize(this.resize.bind(this)),e.onRespawn(this.respawn.bind(this)),this.player.onSync(this.handlePlayerSync.bind(this))}start(){this.started||(this.started=!0,this.tick())}tick(){this.time=Date.now(),this.renderer.render(),this.updater.update(),this.started&&requestAnimationFrame((()=>this.tick()))}handleDisconnection(){this.app.isMenuHidden()&&location.reload()}handlePlayerSync(){this.menu.synchronize(),this.player.setSprite(this.sprites.get(this.player.getSpriteName()))}postLoad(){this.entities.addEntity(this.player),this.player.setSprite(this.sprites.get(this.player.getSpriteName())),this.player.idle(),this.storage&&this.player.setOrientation(this.storage.data.player.orientation),this.camera.centreOn(this.player),new Kg(this,this.player),this.renderer.updateAnimatedTiles(),this.socket.send(V.Ready,{regionsLoaded:this.map.regionsLoaded,userAgent:a}),this.storage.data.new&&(this.storage.data.new=!1,this.storage.save()),this.map.hasCachedDate()&&this.app.fadeMenu()}findPath(t,e,i,n=[]){let r=[];return this.map.isColliding(e,i)&&!this.map.isObject(e,i)||(n&&ve.each(n,(t=>this.pathfinder.addIgnore(t))),r=this.pathfinder.find(this.map.grid,t.gridX,t.gridY,e,i),n&&this.pathfinder.clearIgnores(this.map.grid)),r}respawn(){this.audio.playSound("revive"),this.app.body.classList.remove("death"),this.socket.send(V.Respawn,[])}resize(){this.renderer.resize(),this.pointer.resize(),this.menu.resize()}getEntityAt(t,e){if(!this.entities)return;let i=this.entities.grids.renderingGrid[e][t],n=ve.keys(i),r=n.indexOf(this.player.instance);return-1!==r&&n.splice(r,1),i[n[0]]}teleport(t,e,i){this.entities.unregisterPosition(t),t.setGridPosition(e,i),this.entities.registerPosition(t),t.frozen=!1,t.teleporting=!1,t.instance===this.player.instance&&(t.clearHealthBar(),this.player.moving=!1,this.player.disableAction=!1,this.camera.centreOn(this.player),this.renderer.updateAnimatedTiles())}}(new class{constructor(){t(this,"config",{name:"Poke Online",host:"localhost",ssl:!1,serverId:1,debug:!1,version:"alpha-2.3.2",port:9001,hub:!1}),t(this,"storage",new K),t(this,"body",document.querySelector("body")),t(this,"parchment",document.querySelector("#parchment")),t(this,"canvas",document.querySelector("#canvas")),t(this,"loginForm",document.querySelector("#load-character form")),t(this,"registerForm",document.querySelector("#create-character form")),t(this,"worldsList",document.querySelector("#worlds")),t(this,"passwordConfirmation",document.querySelector("#register-password-confirmation-input")),t(this,"emailField",document.querySelector("#register-email-input")),t(this,"loginButton",document.querySelector("#login")),t(this,"registerButton",document.querySelector("#new-account")),t(this,"cancelRegister",document.querySelector("#cancel-register")),t(this,"cancelWorlds",document.querySelector("#cancel-worlds")),t(this,"continueWorlds",document.querySelector("#continue-worlds")),t(this,"respawn",document.querySelector("#respawn")),t(this,"rememberMe",document.querySelector("#remember-me input")),t(this,"guest",document.querySelector("#guest input")),t(this,"about",document.querySelector("#toggle-about")),t(this,"credits",document.querySelector("#toggle-credits")),t(this,"validation",document.querySelectorAll(".validation-summary")),t(this,"loading",document.querySelector(".loader")),t(this,"worldSelectButton",document.querySelector("#world-select-button")),t(this,"gameVersion",document.querySelector("#game-version")),t(this,"currentScroll","load-character"),t(this,"parchmentAnimating",!1),t(this,"loggingIn",!1),t(this,"menuHidden",!1),t(this,"statusMessage",""),t(this,"selectedServer",void 0),t(this,"showWorldSelect",!1),t(this,"keyDownCallback",void 0),t(this,"keyUpCallback",void 0),t(this,"loginCallback",void 0),t(this,"leftClickCallback",void 0),t(this,"rightClickCallback",void 0),t(this,"mouseMoveCallback",void 0),t(this,"resizeCallback",void 0),t(this,"respawnCallback",void 0),t(this,"focusCallback",void 0),this.sendStatus("Initializing the game client"),this.load()}load(){this.loginForm.addEventListener("submit",this.login.bind(this)),this.registerForm.addEventListener("submit",this.login.bind(this)),this.registerButton.addEventListener("click",(()=>this.openScroll("create-character"))),this.cancelRegister.addEventListener("click",(()=>this.openScroll("load-character"))),this.cancelWorlds.addEventListener("click",(()=>this.openScroll("load-character"))),this.continueWorlds.addEventListener("click",(()=>this.openScroll("load-character"))),this.about.addEventListener("click",(()=>this.openScroll("about"))),this.credits.addEventListener("click",(()=>this.openScroll("credits"))),this.respawn.addEventListener("click",(()=>this.respawnCallback?.())),this.parchment.addEventListener("click",(()=>{this.hasFooterOpen()&&this.openScroll("load-character"),this.body.classList.contains("news")&&this.body.classList.remove("news")})),this.worldSelectButton.addEventListener("click",(()=>this.openScroll("world-select"))),this.gameVersion.textContent=`${this.config.version}`,document.addEventListener("keydown",(t=>"Enter"!==t.key)),document.addEventListener("keydown",this.handleKeyDown.bind(this)),document.addEventListener("keyup",(t=>this.keyUpCallback?.(t))),document.addEventListener("mousemove",(t=>this.mouseMoveCallback?.(t))),this.canvas.addEventListener("click",(t=>this.leftClickCallback?.(t))),window.addEventListener("resize",(()=>this.resizeCallback?.())),window.addEventListener("focus",(()=>this.focusCallback?.())),document.querySelector("#canvas").addEventListener("contextmenu",this.handleRightClick.bind(this))}loadLogin(){let t=this.storage.getError();t&&this.sendError(t),this.storage.hasRemember()&&(this.getUsernameField().value=this.storage.getUsername(),this.getPasswordField().value=this.storage.getPassword(),this.rememberMe.checked=!0)}handleKeyDown(t){if(this.isMenuHidden())return this.keyDownCallback?.(t);"Enter"===t.key&&this.login()}handleRightClick(t){return this.rightClickCallback?.(t),t.preventDefault(),!1}ready(){this.sendStatus(),this.loginButton.disabled=!1,this.loadLogin(),this.loadWorlds(),"indexedDB"in window||this.setValidation("validation-warning","Your browser does not support IndexedDB. Regions will not be cached.")}login(){this.loggingIn||this.statusMessage||!this.verifyForm()||(this.clearErrors(),this.toggleLogin(!0),this.loginCallback?.(this.selectedServer),async function(){o&&("true"!==localStorage.getItem("prompted")&&await o.prompt().catch((t=>r.error("[SW ERROR]",t))),await o.userChoice,localStorage.setItem("prompted","true"),o=null)}())}saveLogin(){this.storage.setRemember(this.isRememberMe()),this.storage.setCredentials(),this.isRememberMe()&&this.storage.setCredentials(this.getUsername(),this.getPassword())}showMenu(){this.body.className="intro",this.menuHidden=!1,this.worldSelectButton.hidden=!1,this.gameVersion.hidden=!1}fadeMenu(){this.menuHidden||(this.body.className="game",this.menuHidden=!0,this.worldSelectButton.hidden=!this.showWorldSelect,this.gameVersion.hidden=!0,this.updateLoader(),this.saveLogin(),setTimeout((()=>this.displayNews()),1e3))}openScroll(t){this.loggingIn||this.parchmentAnimating||(this.clearErrors(),this.changeScroll(t,!s()))}changeScroll(t,e=!1){e?(this.parchmentAnimating=!0,this.parchment.classList.toggle("animate"),this.parchment.classList.remove(this.currentScroll),window.setTimeout((()=>{this.parchmentAnimating=!1,this.parchment.classList.toggle("animate"),this.parchment.classList.add(t),document.querySelector(`#${t} input`)?.focus()}),1e3)):(this.parchment.classList.remove(this.currentScroll),this.parchment.classList.add(t)),this.currentScroll=t}verifyForm(){if(this.isGuest())return!0;if(!this.getUsername())return this.sendError("Please enter a username.",this.getUsernameField());if(!this.getPassword())return this.sendError("Please enter a password.",this.getPasswordField());if(this.isRegistering()){if(this.getPassword().length<3)return this.sendError("Password must be at least 3 characters long.",this.getPasswordField());if(this.getPassword()!==this.getPasswordConfirmation())return this.sendError("Passwords do not match.",this.passwordConfirmation);if(""!==this.getEmail()&&!J.isEmail(this.getEmail()))return this.sendError("The email you've entered is not valid.",this.emailField)}return!0}sendStatus(t=""){if(this.clearErrors(),this.statusMessage=t,!t)return;this.setValidation("status",t);let e=document.querySelector(".status");e&&(e.innerHTML=t+this.getLoaderDots())}updateLoader(t=""){this.loading.innerHTML=t?t+this.getLoaderDots():""}displayNews(){let t=document.querySelector("#news-title"),e=document.querySelector("#news-content");if(t&&e){if(this.storage.isNew())return this.body.classList.add("news");if(this.storage.newVersion){t.textContent=`Kaetram ${this.config.version} Changelog`;let i=n[this.config.version];if(!i)return;e.textContent="";for(let t of i.content)e.innerHTML+=`${t}<br>`;this.body.classList.add("news")}}}sendError(t,e){if(this.isMenuHidden())return this.storage.setError(t);if(this.clearErrors(),this.setValidation("validation-error",t),!e)return!1;e.classList.add("field-error"),e.focus();let i=()=>{e.removeEventListener("keypress",i,!1),e.classList.remove("field-error"),document.querySelector(".validation-error")?.remove()};return e.addEventListener("keypress",i),!1}clearErrors(){document.querySelector(".status")?.remove(),this.clearValidation(),this.getUsernameField().classList.remove("field-error"),this.getPasswordField().classList.remove("field-error"),this.passwordConfirmation.classList.remove("field-error"),this.emailField.classList.remove("field-error")}toggleLogin(t){this.updateLoader("Connecting"),this.toggleTyping(t),this.loggingIn=t,this.loading.hidden=!t,this.loginButton.disabled=t,this.registerButton.disabled=t}toggleTyping(t){this.getUsernameField().readOnly=t,this.getPasswordField().readOnly=t,this.passwordConfirmation.readOnly=t,this.emailField.readOnly=t}hasFooterOpen(){return this.parchment.classList.contains("about")||this.parchment.classList.contains("credits")}isGuest(){return this.guest.checked}isRememberMe(){return this.rememberMe.checked}isRegistering(){return"create-character"===this.currentScroll}isMenuHidden(){return this.menuHidden}getUsernameField(){return document.querySelector(this.isRegistering()?"#register-name-input":"#login-name-input")}getUsername(){return this.getUsernameField().value}getPasswordField(){return document.querySelector(this.isRegistering()?"#register-password-input":"#login-password-input")}getPassword(){return this.getPasswordField().value}getPasswordConfirmation(){return this.passwordConfirmation.value}getEmail(){return this.isRegistering()?this.emailField.value:""}getLoaderDots(){return'<span class="loader-dot">.</span><span class="loader-dot">.</span><span class="loader-dot">.</span>'}clearValidation(){for(let t of this.validation)t.innerHTML=""}setValidation(t,e=""){this.clearValidation();for(let i of this.validation)i.append(this.createValidation(t,e))}createValidation(t,e=""){let i=document.createElement("span");return i.classList.add(t),i.classList.add("blink"),i.textContent=e,i}selectServer(t){this.selectedServer=t,this.worldSelectButton.querySelector("strong").textContent=`${t.name}`,this.worldSelectButton.querySelector("span").textContent=`(${t.players}/${t.maxPlayers} players)`}async loadWorlds(){if(!this.config.hub)return;let t=await fetch(`${this.config.hub}/all`).catch((()=>null));if(!t)return this.setValidation("validation-error","Unable to load world list.");let e=await t.json(),[i]=e;if(!i)return this.setValidation("validation-error","No servers are currently available.");if(this.selectServer(i),!(e.length<2)){this.showWorldSelect=!0,this.worldSelectButton.hidden=!1;for(let[t,i]of Object.entries(e)){let e=document.createElement("li"),n=document.createElement("strong"),r=document.createElement("span");"0"===t&&e.classList.add("active"),n.textContent=i.name,r.textContent=`${i.players}/${i.maxPlayers} players`,e.append(n),e.append(r),e.addEventListener("click",(()=>{this.selectServer(i),this.worldsList.querySelector("li.active")?.classList.remove("active"),e.classList.add("active")})),this.worldsList.append(e)}}}onKeyDown(t){this.keyDownCallback=t}onKeyUp(t){this.keyUpCallback=t}onLogin(t){this.loginCallback=t}onLeftClick(t){this.leftClickCallback=t}onRightClick(t){this.rightClickCallback=t}onMouseMove(t){this.mouseMoveCallback=t}onResize(t){this.resizeCallback=t}onRespawn(t){this.respawnCallback=t}onFocus(t){this.focusCallback=t}})}}}))}();
//# sourceMappingURL=index-legacy-2f72bdc6.js.map
